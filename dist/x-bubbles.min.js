var XBubbles=function(e){function t(u){if(n[u])return n[u].exports;var r=n[u]={exports:{},id:u,loaded:!1};return e[u].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function u(e){for(var t in v){var n=s(v[t],2),u=n[0],r=n[1];e[t]=h[u](e[t]),"undefined"==typeof e[t]&&(e[t]=r)}}function r(e){e.editor||Object.defineProperty(e,"editor",{configurable:!0,value:d.init(e)})}function o(e){e.editor&&(d.destroy(e),delete e.editor)}function i(e){return e.map(function(e){return e.innerHTML}).join(", ")}function a(){return!0}var s=function(){function e(e,t){var n=[],u=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(u=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);u=!0);}catch(s){r=!0,o=s}finally{try{!u&&a["return"]&&a["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),f=n(2),d=n(19),p=n(5),b=n(7),v={begining:["noop",null,"begining"],bubbleCopy:["funk",i,"bubble-copy"],bubbleDeformation:["funk",function(){},"bubble-deformation"],bubbleFormation:["funk",function(){},"bubble-formation"],checkBubblePaste:["funk",a,"check-bubble-paste"],classBubble:["noop","bubble","class-bubble"],disableControls:["bool",!1,"disable-controls"],draggable:["bool",!0,"draggable"],ending:["noop",null,"ending"],separator:["noop",/[,;]/,"separator"]},g=Object.create(HTMLDivElement.prototype,{createdCallback:{value:function(){r(this)}},attachedCallback:{value:function(){r(this),f.init(this),p.bubbling(this)}},detachedCallback:{value:function(){f.destroy(this),o(this)}},options:{value:function(e,t){if(!this._options){this._options={};for(var n in v){this._options[n]=void 0;var r="data-"+v[n][2];this.hasAttribute(r)&&(this._options[n]=this.getAttribute(r))}u(this._options)}return"undefined"==typeof t?this._options[e]:(this._options[e]=t,void u(this._options))}},items:{get:function(){return b.getBubbles(this)}},inputValue:{get:function(){return this.editor.inputValue()}},setContent:{value:function(e){return this.editor.setContent(e)}},addBubble:{value:function(e,t){return this.editor.addBubble(e,t)}},removeBubble:{value:function(e){return this.editor.removeBubble(e)}},editBubble:{value:function(e){return this.editor.editBubble(e)}}});e.exports=c.document.registerElement("x-bubbles",{"extends":"div",prototype:g});var h={funk:function(e){var t="undefined"==typeof e?"undefined":l(e);switch(t){case"string":return new Function("context","return context."+e+";")(c);case"function":return e}},bool:function(e){var t="undefined"==typeof e?"undefined":l(e);switch(t){case"string":return"true"===e||"on"===e;case"boolean":return e}},noop:function(e){return e}}},function(e,t){"use strict";e.exports=function(){return this||(0,eval)("this")}()},function(e,t,n){"use strict";var u=n(3),r=n(17),o=n(8),i=o.canUseDrag;t.init=function(e){return i?u.init(e):r.init(e)},t.destroy=function(e){return i?u.destroy(e):r.destroy(e)}},function(e,t,n){"use strict";function u(e){e.stopPropagation();var t=f.closestNodeSet(e.target),n=f.closestNodeBubble(e.target);if(!t||!n)return void e.preventDefault();var u=l.getSelection();u&&u.removeAllRanges(),E=t,t.classList.add(b.DRAGSTART),c.add(n),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain","");var r=c.get(E);r.length>1&&e.dataTransfer.setDragImage(g(),A.w,A.h)}function r(e){if(e.stopPropagation(),e.preventDefault(),E){var t=f.closestNodeSet(e.target);if(t&&t!==E){var n=c.get(E);n.length&&(n.forEach(function(e){return t.appendChild(e)}),l.setTimeout(h,0,E,t))}}}function o(e){e.stopPropagation(),e.preventDefault(),E&&(e.dataTransfer.dropEffect="move")}function i(e){if(e.stopPropagation(),e.preventDefault(),E){var t=f.closestNodeSet(e.target);t&&t!==E&&t.classList.add(b.DROPZONE)}}function a(e){if(e.stopPropagation(),e.preventDefault(),E){var t=f.closestNodeSet(e.target);t&&t!==E&&t.classList.remove(b.DROPZONE)}}function s(e){if(e.stopPropagation(),e.preventDefault(),E){E.classList.remove(b.DRAGSTART);var t=f.closestNodeSet(e.target);t&&t!==E&&t.classList.remove(b.DROPZONE),E=null}}var l=n(1),c=n(4),f=n(7),d=n(12),p=n(14),b=p.CLS,v=n(15),g=v.getDragImage,h=v.onDropSuccess,A=v.DRAG_IMG,F={dragend:s,dragenter:i,dragleave:a,dragover:o,dragstart:u,drop:r},E=null;t.init=function(e){d.on(e,F)},t.destroy=function(e){d.off(e,F)}},function(e,t,n){"use strict";function u(e){if(h.isBubbleNode(e)){var t=e.parentNode,n=s(t);if(!n.length)return void f(e);l(t);var u=n[0],r=n[n.length-1];u!==r&&t.startRangeSelect||(t.startRangeSelect=u);var o=void 0,i=void 0,a=e.compareDocumentPosition(t.startRangeSelect);if(a&Node.DOCUMENT_POSITION_PRECEDING?(o=t.startRangeSelect,i=e):(o=e,i=t.startRangeSelect),o&&i){for(var c=o;c&&b(c)&&c!==i;)c=c.nextSibling;h.bubbling(t)}}}function r(e){F.call(e.querySelectorAll(C)).forEach(function(e){return b(e)}),e.startRangeSelect=e.querySelector(E),h.bubbling(e);var t=g.getSelection();t&&t.removeAllRanges()}function o(e){return Boolean(e.querySelector(E))}function i(e){return s(e)[0]}function a(e){var t=s(e);return t[t.length-1]}function s(e){return F.call(e.querySelectorAll(E))}function l(e){s(e).forEach(function(e){return e.removeAttribute("selected")})}function c(e){if(b(e)){var t=A.closestNodeSet(e);return t.startRangeSelect=e,h.bubbling(t),!0}return!1}function f(e){if(!h.isBubbleNode(e))return!1;var t=A.closestNodeSet(e),n=g.getSelection();return n&&n.removeAllRanges(),l(t),c(e)}function d(e){if(p(e)){var t=A.closestNodeSet(e);if(1===s(t).length)return v(e)}return f(e)}function p(e){return h.isBubbleNode(e)&&e.hasAttribute("selected")||!1}function b(e){return!!h.isBubbleNode(e)&&(e.setAttribute("selected",""),!0)}function v(e){return!!h.isBubbleNode(e)&&(e.removeAttribute("selected"),!0)}var g=n(1),h=n(5),A=n(7),F=Array.prototype.slice,E="[bubble][selected]",C="[bubble]:not([selected])";t.all=r,t.add=c,t.clear=l,t.get=s,t.uniq=f,t.head=i,t.last=a,t.has=o,t.range=u,t.toggleUniq=d},function(e,t,n){"use strict";function u(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE)&&e.hasAttribute("bubble")}function r(e,t){if(t.hasAttribute("readonly"))return!1;var n=d.getSelection();if(!n)return!1;var u=e.options("bubbleDeformation"),r=u(t);if(!r){var o=p.textClean(t.innerText);r={text:o,startOffset:0,endOffset:o.length}}var i=p.createZws(),a=d.document.createTextNode(r.text);e.fireEdit(t),e.replaceChild(a,t),e.insertBefore(i,a);var s=d.document.createRange();return s.setStart(a,r.startOffset),s.setEnd(a,r.endOffset),n.removeAllRanges(),n.addRange(s),!0}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t=p.textClean(t)){var u=e.options("bubbleFormation"),r=e.options("classBubble"),o=g&&e.options("draggable"),i=e.ownerDocument.createElement("span");i.innerText=t;for(var a in n)n[a]&&i.setAttribute("data-"+a,v(n[a]));if(u(i),r)for(var s=String(r).trim().split(/\s+/),l=s.length;l--;)i.classList.add(s[l]);return i.setAttribute("bubble",""),i.setAttribute("contenteditable","false"),o&&i.setAttribute("draggable","true"),i}}function i(e){var t=e.options("separator"),n=e.options("ending"),u=e.options("begining"),r=a(e),i=[];return r.forEach(function(r){var a=p.textClean(r.toString());if(!a)return void r.deleteContents();var b=[a];t&&(b=a.split(t).map(s).filter(l)),n?b=b.reduce(function(e,t){return e.concat(c(t,n))},[]).map(s).filter(l):u&&(b=b.reduce(function(e,t){return e.concat(f(t,u))},[]).map(s).filter(l)),b.length||r.deleteContents();var v=d.document.createDocumentFragment();b.forEach(function(t){var n=o(e,t);n&&(v.appendChild(n),i.push(n))}),r.deleteContents(),r.insertNode(v)}),e.fireInput(),i.length&&e.fireChange(),i}function a(e){for(var t=[],n=e.childNodes,r=void 0,o=void 0,i=0;i<n.length;i++)o=n[i],u(o)?r&&(r.setEndBefore(o),t.push(r),r=void 0):r||(r=d.document.createRange(),r.setStartBefore(o));return r&&(r.setEndAfter(o),t.push(r)),t}function s(e){return e.trim()}function l(e){return Boolean(e)}function c(e,t){var n=[],u=0,r=999;for(t.lastIndex=0;null!==t.exec(e)&&r;)r--,n.push(e.substring(u,t.lastIndex)),u=t.lastIndex;return n}function f(e,t){var n=[],u=void 0,r=0,o=999;for(t.lastIndex=0;null!==(u=t.exec(e))&&o;)o--,r!==u.index&&(n.push(e.substring(r,u.index)),r=u.index);return n.push(e.substring(r,e.length)),n}var d=n(1),p=n(6),b=n(8),v=b.escape,g=b.canUseDrag;t.isBubbleNode=u,t.bubbling=i,t.create=o,t.edit=r},function(e,t,n){"use strict";function u(e,t){var n=F(e),u=n&&r(e,n);return u?(n.removeAllRanges(),n.addRange(u),i(n,t)):e.appendChild(t),!0}function r(e,t){if(t=t||F(e)){var n=t.focusNode&&t.focusNode.nodeType===Node.TEXT_NODE?t.focusNode:t.anchorNode&&t.anchorNode.nodeType===Node.TEXT_NODE?t.anchorNode:void 0;if(n){for(var u=n,r=n,o=n;o&&o.nodeType===Node.TEXT_NODE;)u=o,o=o.previousSibling;for(o=n;o&&o.nodeType===Node.TEXT_NODE;)r=o,o=o.nextSibling;var i=e.ownerDocument.createRange();return i.setStartBefore(u),i.setEndAfter(r),i}}}function o(e){return i(e,d())}function i(e,t){if(!e||!e.rangeCount)return!1;var n=g.document.createElement("span");if(e.getRangeAt(0).surroundContents(n),n.parentNode.replaceChild(t,n),e.removeAllRanges(),t.nodeType===Node.TEXT_NODE){var u=g.document.createRange();u.setStart(t,t.nodeValue.length),u.collapse(!1),e.addRange(u)}else e.collapse(t,0);return!0}function a(e,t){if(e=b(e),!e)return!1;t=t||g.getSelection();var n=g.document.createTextNode(e);return!!i(t,n)&&(t.collapse(n,n.nodeValue.length),!0)}function s(e,t){if(e=e||g.getSelection(),!e||!e.anchorNode||e.anchorNode.nodeType!==Node.TEXT_NODE)return!1;var n=v(e),u=n.startNode,r=n.endNode,o=n.startOffset,i=n.endOffset,a=n.revert;if(!e.isCollapsed&&!t)return e.collapse(u,o),!0;var s=Boolean(e.extend);a=s?a:!a;for(var l=a?u:r,c=a?o:i;l;){if(l.nodeType!==Node.TEXT_NODE)return!1;if(null===c&&(c=l.nodeValue.length),c-1<0)l=l.previousSibling,c=null;else{var f=l.nodeValue.substring(c-1,c);if(!p(f))break;c-=1}}if(!l||null===c)return!1;if(t)if(s)e.extend(l,c-1);else{var d=g.document.createRange();a?(d.setStart(l,c-1),d.setEnd(r,i)):(d.setStart(u,o),d.setEnd(l,c-1)),e.removeAllRanges(),e.addRange(d)}else e.collapse(l,c-1);return!0}function l(e,t){if(e=e||g.getSelection(),!e||!e.focusNode||e.focusNode.nodeType!==Node.TEXT_NODE)return!1;var n=v(e),u=n.startNode,r=n.endNode,o=n.startOffset,i=n.endOffset,a=n.revert;if(!e.isCollapsed&&!t)return e.collapse(r,i),!0;for(var s=a?u:r,l=a?o:i;s;){if(s.nodeType!==Node.TEXT_NODE)return!1;var c=s.nodeValue.length;if(l+1>c)s=s.nextSibling,l=0;else{var f=s.nodeValue.substring(l,l+1);if(!p(f))break;l+=1}}if(!s)return!1;if(t){var d=Boolean(e.extend);if(d)e.extend(s,l+1);else{var b=g.document.createRange();a?(b.setStart(s,l+1),b.setEnd(r,i)):(b.setStart(u,o),b.setEnd(s,l+1)),e.removeAllRanges(),e.addRange(b)}}else e.collapse(s,l+1);return!0}function c(e){if(!e)return"";var t=g.document.implementation.createHTMLDocument("").body;return t.innerText=e,t.innerText.replace(/^[\u0020\u00a0]+$/gm,"").replace(/\n/gm," ").trim()}function f(e,t){e=e||g.getSelection();var n=e&&e.anchorNode;if(!n||n.nodeType!==Node.TEXT_NODE)return!1;for(var u=void 0,r=void 0,o=n;o&&o.nodeType===Node.TEXT_NODE;)u=o,o=o.previousSibling;for(o=n;o&&o.nodeType===Node.TEXT_NODE;)r=o,o=o.nextSibling;var i=h.hasBubbles(t),a=g.document.createRange();a.setStartBefore(u),a.setEndAfter(r);var s=b(a.toString());return!(!s&&(s||i))&&(s||a.collapse(),e.removeAllRanges(),e.addRange(a),!0)}function d(){return g.document.createTextNode(D)}function p(e){return C.test(e)}function b(e){return String(e||"").trim().replace(E,"")}function v(e){var t=e.anchorNode,n=e.focusNode,u=e.anchorOffset,r=e.focusOffset,o=!1;if(t===n)u=Math.min(e.anchorOffset,e.focusOffset),r=Math.max(e.anchorOffset,e.focusOffset),o=e.anchorOffset>e.focusOffset;else{var i=e.anchorNode.compareDocumentPosition(e.focusNode);i&Node.DOCUMENT_POSITION_PRECEDING&&(t=e.focusNode,u=e.focusOffset,n=e.anchorNode,r=e.anchorOffset,o=!0)}return{startNode:t,endNode:n,startOffset:u,endOffset:r,revert:o}}var g=n(1),h=n(7),A=n(8),F=A.getSelection,E=/[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g,C=/\u200B/,D="​";t.arrowRight=l,t.arrowLeft=s,t.remove=o,t.html2text=c,t.currentTextRange=r,t.text2bubble=u,t.replaceString=a,t.selectAll=f,t.textClean=b,t.checkZws=p,t.createZws=d},function(e,t,n){"use strict";function u(e){return e.querySelector("[bubble]:last-child")}function r(e){return e.querySelector("[bubble]:first-child")}function o(e){return Array.prototype.slice.call(e.querySelectorAll("[bubble]"))}function i(e){return Boolean(e.querySelector("[bubble]"))}function a(e){if(e.focusNode&&e.anchorNode){var t=e.focusNode.previousSibling;for(e.anchorNode!==e.focusNode&&e.anchorNode.compareDocumentPosition(e.focusNode)&Node.DOCUMENT_POSITION_FOLLOWING&&(t=e.anchorNode.previousSibling);t;){if(b.isBubbleNode(t))return t;if(t.nodeType===Node.TEXT_NODE&&v.textClean(t.nodeValue))return;t=t.previousSibling}}}function s(e){if(e.focusNode&&e.anchorNode){var t=e.focusNode.nextSibling;for(e.anchorNode!==e.focusNode&&e.anchorNode.compareDocumentPosition(e.focusNode)&Node.DOCUMENT_POSITION_FOLLOWING&&(t=e.anchorNode.nextSibling);t;){if(b.isBubbleNode(t))return t;if(t.nodeType===Node.TEXT_NODE&&v.textClean(t.nodeValue))return;t=t.nextSibling}}}function l(e){for(;e;){if(p(e))return e;e=e.parentNode}}function c(e){for(;e;){if(b.isBubbleNode(e))return e;if(p(e))return;e=e.parentNode}}function f(e){for(var t=e&&e.previousSibling;t;){if(b.isBubbleNode(t))return t;t=t.previousSibling}}function d(e){for(var t=e&&e.nextSibling;t;){if(b.isBubbleNode(t))return t;t=t.nextSibling}}function p(e){return e.nodeType===Node.ELEMENT_NODE&&"x-bubbles"===e.getAttribute("is")}var b=n(5),v=n(6);t.closestNodeBubble=c,t.closestNodeSet=l,t.findBubbleLeft=a,t.findBubbleRight=s,t.getBubbles=o,t.hasBubbles=i,t.headBubble=r,t.lastBubble=u,t.nextBubble=d,t.prevBubble=f},function(e,t,n){"use strict";function u(e){return s[e]}function r(e){return a[e]}var o=n(9),i=n(1),a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},l=/&(?:amp|lt|gt|quot|#39|#96);/g,c=/[&<>"'`]/g,f=RegExp(l.source),d=RegExp(c.source),p=/Trident|Edge/;t.getSelection=function(e){var t=i.getSelection();if(t&&t.anchorNode&&e.compareDocumentPosition(t.anchorNode)&Node.DOCUMENT_POSITION_CONTAINED_BY)return t},t.throttle=function(e,t){var n=0,u=function(){n=0};return function(){n||(n=o(u),e.apply(t||this,arguments))}},t.escape=function(e){return e=String(e),e&&d.test(e)?e.replace(c,r):e},t.unescape=function(e){return e=String(e),e&&f.test(e)?e.replace(l,u):e},t.canUseDrag=function(){return!p.test(i.navigator.userAgent)}(),t.isIE=function(){return p.test(i.navigator.userAgent)}()},function(e,t,n){(function(t){for(var u=n(10),r="undefined"==typeof window?t:window,o=["moz","webkit"],i="AnimationFrame",a=r["request"+i],s=r["cancel"+i]||r["cancelRequest"+i],l=0;!a&&l<o.length;l++)a=r[o[l]+"Request"+i],s=r[o[l]+"Cancel"+i]||r[o[l]+"CancelRequest"+i];if(!a||!s){var c=0,f=0,d=[],p=1e3/60;a=function(e){if(0===d.length){var t=u(),n=Math.max(0,p-(t-c));c=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return d.push({handle:++f,callback:e,cancelled:!1}),f},s=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return a.call(r,e)},e.exports.cancel=function(){s.apply(r,arguments)},e.exports.polyfill=function(){r.requestAnimationFrame=a,r.cancelAnimationFrame=s}}).call(t,function(){return this}())},function(e,t,n){(function(t){(function(){var n,u,r;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-r)/1e6},u=t.hrtime,n=function(){var e;return e=u(),1e9*e[0]+e[1]},r=n()):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)}).call(t,n(11))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===u||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function i(){v&&p&&(v=!1,p.length?b=p.concat(b):g=-1,b.length&&a())}function a(){if(!v){var e=r(i);v=!0;for(var t=b.length;t;){for(p=b,b=[];++g<t;)p&&p[g].run();g=-1,t=b.length}p=null,v=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:u}catch(e){f=u}}();var p,b=[],v=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];b.push(new s(e,t)),1!==b.length||v||r(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){var e=s.document.documentElement,t=s.document.body;return(e&&e.scrollLeft||t&&t.scrollLeft||0)-(e.clientLeft||0)}function o(){var e=s.document.documentElement,t=s.document.body;return(e&&e.scrollTop||t&&t.scrollTop||0)-(e.clientTop||0)}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.dispatchEvent(new c(t,n))}function a(e,t,n){return function u(r){e.removeEventListener(t,u),n(r)}}var s=n(1),l=n(13);t.scrollX=r,t.scrollY=o,t.dispatch=i,t.keyCode=function(e){return e.charCode||e.keyCode},t.metaKey=function(e){return e.ctrlKey||e.metaKey},t.pageX=function(e){return null===e.pageX&&null!==e.clientX?e.clientX+r():e.pageX},t.pageY=function(e){return null===e.pageY&&null!==e.clientY?e.clientY+o():e.pageY},t.one=function(e,t,n){var r=n?u({},t,n):t;for(var o in r)e.addEventListener(o,a(e,o,r[o]))},t.on=function(e,t,n){var r=n?u({},t,n):t;for(var o in r)e.addEventListener(o,r[o])},t.off=function(e,t,n){var r=n?u({},t,n):t;for(var o in r)e.removeEventListener(o,r[o])},t.prevent=function(e){return e.cancelBubble=!0,e.returnValue=!1,e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1};var c=function(){return"function"==typeof s.CustomEvent?s.CustomEvent:l}()},function(e,t,n){"use strict";var u=n(1),r=u.document,o=u.Event.prototype,i=!1;try{i=Boolean(r.createEvent("CustomEvent"))}catch(a){}var s=o.stopImmediatePropagation;o.stopImmediatePropagation=function(){this.immediatePropagationStopped=!0,s?s.call(this):this.stopPropagation()};var l=function(){return i?function(e,t){t=t||{};var n=Boolean(t.bubbles),u=Boolean(t.cancelable),o=r.createEvent("CustomEvent");return o.initCustomEvent(e,n,u,t.detail),o}:function(e,t){t=t||{};var n=Boolean(t.bubbles),u=Boolean(t.cancelable),o=r.createEvent("Event");return o.initEvent(e,n,u),o.detail=t.detail,o}}();l.prototype=o,e.exports=l},function(e,t){"use strict";t.KEY={a:65,Backspace:8,Bottom:40,c:67,Cmd:91,Comma:44,Delete:46,Enter:13,Esc:27,Left:37,Right:39,Semicolon:59,Space:32,Tab:9,Top:38,x:88},t.CLS={DRAGSTART:"drag",DROPZONE:"dropzone"},t.EV={BUBBLE_EDIT:"bubble-edit",BUBBLE_INPUT:"bubble-input",CHANGE:"change",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGLEAVE:"dragleave",DRAGSTART:"dragstart",DROP:"drop"},t.PROPS={BUBBLE_VALUE:"_bubbleValue",CLICK_TIME:"_clickTime",LOCK_COPY:"_lockCopy"}},function(e,t,n){"use strict";var u={w:16,h:16},r=null;t.DRAG_IMG=u,t.getDragImage=function(){return r||(r=new Image,r.src=n(16)),r},t.onDropSuccess=function(e,t){e.fireChange(),t.focus(),t.fireChange()}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAVCAMAAAAw/0MlAAABblBMVEUAAABOXIZJWIKCkbeNnMKMmsJNW4VNW4VWZY57ibFHV4KVpMxRYImCkLh9jbpgcJ1fcJ1JWoaZqdNUZpaHmMaVpdJIWolTZJKHmMZEV4iXqNdkdqhjdal2iLx2ib2Knc6PodNJXpJJXpNOYpdpfLKCk8JPYpdofLNugblugrqUptdZdLdZd8Nfeb93js1+ksuGm9SGm9VHaLhJarxKZqxKbL9La7pNbr9Pb71Ucr1Wbag/XqU/X6pAVopffMdjf8ZphMpwicx2js9BW51CWZN/ldCBl9KCmNNFYKRFZbGJndWOodVKX5RKX5ZKYJdWdcNXbKJYdL1KYJtAVYpaeMVJXpJKbMBgebpjeLBjf8VLYp5kd65kgMlofLRog8log8tJYqBth8xugrpviMtNabBxi851jc8/X6t3i8BOaK56kdB9lNFOaa5Ob8FPY5qBl9NGXJODmNOEmdNQbrpRcsJUb7RGXJSTptmUptiUp9kfFguNAAAAK3RSTlMAJCQkJDw8P0JCRUVubpaWlpmZwMDAw8nJzMzV29vb7e3t7fDw+Pn5+fn8jndhZAAAAQhJREFUeF6tz2VXwgAYBtBnhBKKkgoGKPY2urvT7u7ujn/vtsM5fN/e+w8uJEaLa+HvR7Zfl8WILo293Qq8vykQaLXtGnRoPcH6i1L1oEcLidpde6BQc6shslXvaVSHIdD7S9c0Sv5+ACbfFRXftBoYuzijUry1AXPHJ1QK5349pvYOqeSPfCaM8Dkq/EFxHAMst0mDY3cL89Clkis0kqmd/CxgvUt8Ukg8rub4UYCZicTiT0rFY5HnNY4dBNC32GiGwtFt+aLhULOx9CWMdRAMbVXK6cyNfJl0ubL8IYytEDHe0/XX7IZ82e/9S3HsZSDpmSQZT/SiQ+UgGDtU6DKYnYrGTrMBon97+TS1J80efgAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function u(e){var t=f.closestNodeBubble(e.target);if(t){var n=f.closestNodeSet(e.target);if(n){e.preventDefault(),n.focus();var u=n.__drag__={onMouseup:r.bind(this,n),onMousemove:l.throttle(o.bind(this,n)),onScroll:l.throttle(i.bind(this,n)),nodeOffsetX:e.offsetX,nodeOffsetY:e.offsetY,x:0,y:0};E=null,C=null,D=null,s.one(document,"mouseup",u.onMouseup),s.on(document,"mousemove",u.onMousemove),s.on(document,"scroll",u.onScroll)}}}function r(e,t){var n=e.__drag__;if(n){if(s.off(document,"mousemove",n.onMousemove),s.off(document,"scroll",n.onScroll),delete e.__drag__,D&&(D.parentNode&&D.parentNode.removeChild(D),D=null),C){var u=C;C=null,u.classList.remove(b.DROPZONE),s.dispatch(u,v.DRAGLEAVE,{bubbles:!1,cancelable:!1})}E&&!function(){var e=f.closestNodeSet(t.target);if(e&&e!==E){var n=c.get(E);n.length&&(n.forEach(function(t){return e.appendChild(t)}),a.setTimeout(A,0,E,e))}var u=E;E=null,u.classList.remove(b.DRAGSTART),s.dispatch(u,v.DROP,{bubbles:!1,cancelable:!1}),s.dispatch(u,v.DRAGEND,{bubbles:!1,cancelable:!1})}()}}function o(e,t){var n=e.__drag__;if(n){if(!E){var u=a.getSelection();u&&u.removeAllRanges(),E=e,E.classList.add(b.DRAGSTART);var r=f.closestNodeBubble(t.target),o=void 0;r&&(c.add(r),1===c.get(E).length&&(o=r.cloneNode(!0))),o||(o=h(),n.nodeOffsetX=F.w,n.nodeOffsetY=F.h),D=document.body.appendChild(document.createElement("div")),D.style.cssText="position:absolute;z-index:9999;pointer-events:none;top:0;left:0;",D.appendChild(o),s.dispatch(E,v.DRAGSTART,{bubbles:!1,cancelable:!1})}n.x=t.clientX,n.y=t.clientY,i(e);var l=f.closestNodeSet(t.target);if(l&&l!==E)C&&C!==l?(C.classList.remove(b.DROPZONE),l.classList.add(b.DROPZONE),C=l,s.dispatch(C,v.DRAGENTER,{bubbles:!1,cancelable:!1})):C||(l.classList.add(b.DROPZONE),C=l,s.dispatch(C,v.DRAGENTER,{bubbles:!1,cancelable:!1}));else if(C){var d=C;C=null,d.classList.remove(b.DROPZONE),s.dispatch(d,v.DRAGLEAVE,{bubbles:!1,cancelable:!1})}}}function i(e){var t=e.__drag__;if(t&&D){var n=t.x-t.nodeOffsetX+s.scrollX(),u=t.y-t.nodeOffsetY+s.scrollY();d.csstransforms3d?D.style.transform="translate3d("+n+"px, "+u+"px, 0px)":d.csstransforms?D.style.transform="translate("+n+"px, "+u+"px)":(D.style.top=u+"px",D.style.left=n+"px")}}var a=n(1),s=n(12),l=n(8),c=n(4),f=n(7),d=n(18),p=n(14),b=p.CLS,v=p.EV,g=n(15),h=g.getDragImage,A=g.onDropSuccess,F=g.DRAG_IMG,E=null,C=null,D=null;t.init=function(e){s.on(e,"mousedown",u)},t.destroy=function(e){s.off(e,"mousedown",u)}},function(e,t){!function(t){!function(e,t,n){function u(e,t){return typeof e===t}function r(){var e,t,n,r,o,i,a;for(var s in h)if(h.hasOwnProperty(s)){if(e=[],t=h[s],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=u(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)i=e[o],a=i.split("."),1===a.length?F[a[0]]=r:(!F[a[0]]||F[a[0]]instanceof Boolean||(F[a[0]]=new Boolean(F[a[0]])),F[a[0]][a[1]]=r),E.push((r?"":"no-")+a.join("-"))}}function o(e,t){return!!~(""+e).indexOf(t)}function i(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):B?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function a(){var e=t.body;return e||(e=i(B?"svg":"body"),e.fake=!0),e}function s(e,n,u,r){var o,s,l,c,f="modernizr",d=i("div"),p=a();if(parseInt(u,10))for(;u--;)l=i("div"),l.id=r?r[u]:f+(u+1),d.appendChild(l);return o=i("style"),o.type="text/css",o.id="s"+f,(p.fake?p:d).appendChild(o),p.appendChild(d),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),d.id=f,p.fake&&(p.style.background="",p.style.overflow="hidden",c=m.style.overflow,m.style.overflow="hidden",m.appendChild(p)),s=n(d,e),p.fake?(p.parentNode.removeChild(p),m.style.overflow=c,m.offsetHeight):d.parentNode.removeChild(d),!!s}function l(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function c(t,u){var r=t.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(l(t[r]),u))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];r--;)o.push("("+l(t[r])+":"+u+")");return o=o.join(" or "),s("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function f(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function d(e,t,r,a){function s(){d&&(delete y.style,delete y.modElem)}if(a=!u(a,"undefined")&&a,!u(r,"undefined")){var l=c(e,r);if(!u(l,"undefined"))return l}for(var d,p,b,v,g,h=["modernizr","tspan"];!y.style;)d=!0,y.modElem=i(h.shift()),y.style=y.modElem.style;for(b=e.length,p=0;p<b;p++)if(v=e[p],g=y.style[v],o(v,"-")&&(v=f(v)),y.style[v]!==n){if(a||u(r,"undefined"))return s(),"pfx"!=t||v;try{y.style[v]=r}catch(A){}if(y.style[v]!=g)return s(),"pfx"!=t||v}return s(),!1}function p(e,t){return function(){return e.apply(t,arguments)}}function b(e,t,n){var r;for(var o in e)if(e[o]in t)return n===!1?e[o]:(r=t[e[o]],u(r,"function")?p(r,n||t):r);return!1}function v(e,t,n,r,o){var i=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+D.join(i+" ")+i).split(" ");return u(t,"string")||u(t,"undefined")?d(a,t,r,o):(a=(e+" "+T.join(i+" ")+i).split(" "),b(a,t,n))}function g(e,t,u){return v(e,n,n,t,u)}var h=[],A={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){h.push({name:e,fn:t,options:n})},addAsyncTest:function(e){h.push({name:null,fn:e})}},F=function(){};F.prototype=A,F=new F;var E=[],C="Moz O ms Webkit",D=A._config.usePrefixes?C.split(" "):[];A._cssomPrefixes=D;var m=t.documentElement,B="svg"===m.nodeName.toLowerCase(),N={elem:i("modernizr")};F._q.push(function(){delete N.elem});var y={style:N.elem.style};F._q.unshift(function(){delete y.style});var T=A._config.usePrefixes?C.toLowerCase().split(" "):[];A._domPrefixes=T,A.testAllProps=v,A.testAllProps=g,F.addTest("csstransforms",function(){return navigator.userAgent.indexOf("Android 2.")===-1&&g("transform","scale(1)",!0)});var S=A.testStyles=s,x="CSS"in e&&"supports"in e.CSS,O="supportsCSS"in e;F.addTest("supports",x||O),F.addTest("csstransforms3d",function(){var e=!!g("perspective","1px",!0),t=F._config.usePrefixes;if(e&&(!t||"webkitPerspective"in m.style)){var n,u="#modernizr{width:0;height:0}";F.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",t&&(n+=",(-webkit-transform-3d)")),
n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",S(u+n,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),r(),delete A.addTest,delete A.addAsyncTest;for(var R=0;R<F._q.length;R++)F._q[R]();e.Modernizr=F}(t,document),e.exports=t.Modernizr}(window)},function(e,t,n){"use strict";function u(e){var t=e.currentTarget;return t[x.LOCK_COPY]?R.prevent(e):(N.clear(t),void m.bubbling(t))}function r(e){var t=e.currentTarget;return t[x.LOCK_COPY]?(R.prevent(e),delete t[x.LOCK_COPY],E(function(){var e=C.getSelection();e&&e.removeAllRanges()}),!1):void B.restore(t)}function o(e){var t=e.currentTarget,n=R.keyCode(e),u=e.key?1===e.key.length:(n>47||n===T.Space||n===T.Backspace)&&n!==T.Cmd;u&&t.fireInput()}function i(e){var t=R.keyCode(e),n=e.currentTarget;switch(t){case T.Enter:e.preventDefault(),n.options("disableControls")||f(n)||(m.bubbling(n),B.restore(n));break;case T.Space:f(n)&&e.preventDefault();break;case T.Comma:case T.Semicolon:e.preventDefault(),m.bubbling(n),B.restore(n)}}function a(e){var t=R.keyCode(e),n=R.metaKey(e),u=e.currentTarget,r=!u.options("disableControls");switch(t){case T.Esc:e.preventDefault(),m.bubbling(u),B.restore(u);break;case T.Backspace:e.preventDefault(),k(e);break;case T.Delete:e.preventDefault(),P(e);break;case T.Left:e.preventDefault(),s(e);break;case T.Top:if(e.preventDefault(),r){var o=D.headBubble(u);o&&N.uniq(o)}break;case T.Right:e.preventDefault(),l(e);break;case T.Bottom:e.preventDefault(),r&&N.has(u)&&B.restore(u);break;case T.a:n&&(e.preventDefault(),O.selectAll(null,e.currentTarget)||N.all(u));break;case T.c:n&&w(e);break;case T.x:n&&w(e,function(){return P(e)})}}function s(e){var t=C.getSelection();if(!O.arrowLeft(t,e.shiftKey)){if(t.anchorNode&&t.anchorNode.nodeType===Node.TEXT_NODE){var n=D.prevBubble(t.anchorNode);return void(n&&N.uniq(n))}var u=e.currentTarget,r=N.get(u),o=r.length>1&&r[0]===u.startRangeSelect?r[r.length-1]:r[0],i=D.prevBubble(o);i&&(e.shiftKey?N.range(i):N.uniq(i))}}function l(e){var t=C.getSelection();if(!O.arrowRight(t,e.shiftKey)){if(t.focusNode&&t.focusNode.nodeType===Node.TEXT_NODE){var n=D.nextBubble(t.focusNode);return void(n&&N.uniq(n))}var u=e.currentTarget,r=N.get(u),o=r.length>1&&r[r.length-1]===u.startRangeSelect?r[0]:r[r.length-1],i=D.nextBubble(o);i?e.shiftKey?N.range(i):N.uniq(i):o&&o.nextSibling&&o.nextSibling.nodeType===Node.TEXT_NODE?(N.clear(u),t.collapse(o.nextSibling,0)):B.restore(u)}}function c(e){var t=D.closestNodeSet(e.target);if(t){var n=D.closestNodeBubble(e.target);if(n){var u=Date.now(),r=t[x.CLICK_TIME]&&u-t[x.CLICK_TIME]<200;t[x.CLICK_TIME]=u,R.metaKey(e)?N.add(n):e.shiftKey?t.startRangeSelect?N.range(n):N.uniq(n):r?m.edit(t,n):N.toggleUniq(n)}else{N.clear(t);var o=C.getSelection();o&&o.anchorNode&&o.anchorNode.nodeType===Node.TEXT_NODE||B.restore(t)}}}function f(e){var t=C.getSelection();if(!t||!t.rangeCount){var n=N.get(e);if(1===n.length)return m.edit(e,n[0])}return!1}function d(e){var t=C.getSelection();for(t&&t.removeAllRanges();this.firstChild;)this.removeChild(this.firstChild);e=O.html2text(e),this.appendChild(this.ownerDocument.createTextNode(e)),m.bubbling(this),B.restore(this)}function p(e,t){var n=m.create(this,e,t);return!!n&&(!!O.text2bubble(this,n)&&(this.fireInput(),this.fireChange(),B.restore(this),!0))}function b(e){return!!this.contains(e)&&(this.removeChild(e),this.fireChange(),!0)}function v(e){return!!this.contains(e)&&m.edit(this,e)}function g(){var e=O.currentTextRange(this);return e&&O.textClean(e.toString())||""}function h(e){R.dispatch(this,S.BUBBLE_EDIT,{bubbles:!1,cancelable:!1,detail:{data:e}})}function A(){R.dispatch(this,S.CHANGE,{bubbles:!1,cancelable:!1})}function F(){var e=g.call(this);this[x.BUBBLE_VALUE]!==e&&(this[x.BUBBLE_VALUE]=e,R.dispatch(this,S.BUBBLE_INPUT,{bubbles:!1,cancelable:!1,detail:{data:e}}))}var E=n(9),C=n(1),D=n(7),m=n(5),B=n(20),N=n(4),y=n(14),T=y.KEY,S=y.EV,x=y.PROPS,O=n(6),R=n(12),_=n(8),w=n(21),L=n(22),k=n(23),P=n(24),I={blur:u,click:c,focus:r,keydown:a,keypress:i,keyup:o,mscontrolselect:R.prevent,paste:L,resize:R.prevent,resizestart:R.prevent};t.init=function(e){var t=e;return t.setAttribute("contenteditable","true"),t.setAttribute("spellcheck","false"),t.fireChange=_.throttle(A,e),t.fireEdit=_.throttle(h,e),t.fireInput=_.throttle(F,e),R.on(t,I),{addBubble:p.bind(t),editBubble:v.bind(t),inputValue:g.bind(t),removeBubble:b.bind(t),setContent:d.bind(t)}},t.destroy=function(e){R.off(e,I)}},function(e,t,n){"use strict";function u(e){a.clear(e);var t=r(e),n=o.getSelection();n.removeAllRanges(),n.collapse(t,1)}function r(e){var t=i.createZws();if(e.hasChildNodes()){var n=e.childNodes[e.childNodes.length-1];n.isEqualNode(t)?t=n:e.appendChild(t)}else e.appendChild(t);return t}var o=n(1),i=n(6),a=n(4);t.restore=u,t.restoreBasis=r},function(e,t,n){"use strict";function u(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var r=n(9),o=n(12),i=n(4),a=n(14),s=a.PROPS,l=n(8);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=e.target,a=l.getSelection(n);if(a)return!1;var c=i.get(n);if(!c.length)return!1;var f=n.options("bubbleCopy"),d=f(c);if(!d)return!1;n[s.LOCK_COPY]=!0;var p=n.ownerDocument.createElement("input");return p.value=d,p.style.cssText="\n        position: absolute;\n        left: -9999px;\n        width: 1px;\n        height: 1px;\n        margin: 0;\n        padding: 0;\n        border: none;",n.parentNode.appendChild(p),o.one(p,{keyup:function(){return n.focus()},blur:function(){u(p),r(t)}}),p.select(),!0}},function(e,t,n){"use strict";function u(e,t){var n=e.options("checkBubblePaste"),u=i.getSelection(),a=!(!t||!u.isCollapsed||e.inputValue)&&n(t);return!!l.replaceString(t,u)&&(a?f?o(function(){return r(e)}):r(e):e.fireInput(),!0)}function r(e){a.bubbling(e),e.focus(),o(function(){return s.restore(e)})}var o=n(9),i=n(1),a=n(5),s=n(20),l=n(6),c=n(8),f=c.isIE;e.exports=function(e){e.preventDefault();var t=e.currentTarget;i.clipboardData&&i.clipboardData.getData?u(t,i.clipboardData.getData("Text")):e.clipboardData&&!function(){var n="text/plain",r=e.clipboardData,o=r.getData&&r.getData(n);!u(t,o)&&r.items&&Array.prototype.slice.call(r.items).filter(function(e){return"string"===e.kind&&e.type===n}).some(function(e){return e.getAsString(function(e){u(t,e)}),!0})}()}},function(e,t,n){"use strict";function u(e){var t=o.get(e);if(!t.length)return!1;var n=t[0].previousSibling,u=t[t.length-1].nextSibling;return t.forEach(function(e){return e.parentNode.removeChild(e)}),s.isBubbleNode(n)?o.uniq(n):s.isBubbleNode(u)?o.uniq(u):(e.focus(),r(function(){return l.restore(e)})),e.fireChange(),!0}var r=n(9),o=n(4),i=n(6),a=n(7),s=n(5),l=n(20),c=n(8);e.exports=function(e){var t=e.target,n=c.getSelection(t);if(n)if(n.isCollapsed)if(i.arrowLeft(n,!0))i.remove(n),t.fireInput();else{var s=a.findBubbleLeft(n);s&&o.uniq(s)}else i.remove(n),t.fireInput();else u(t)||(t.focus(),r(function(){return l.restore(t)}))}},function(e,t,n){"use strict";function u(e){var t=o.get(e);if(!t.length)return!1;var n=t[0].previousSibling,u=t[t.length-1].nextSibling;return t.forEach(function(e){return e.parentNode.removeChild(e)}),s.isBubbleNode(u)?o.uniq(u):s.isBubbleNode(n)?o.uniq(n):(e.focus(),r(function(){return l.restore(e)})),e.fireChange(),!0}var r=n(9),o=n(4),i=n(6),a=n(7),s=n(5),l=n(20),c=n(8);e.exports=function(e){var t=e.target,n=c.getSelection(t);if(n)if(n.isCollapsed)if(i.arrowRight(n,!0))i.remove(n),t.fireInput();else{var s=a.findBubbleRight(n);s&&o.uniq(s)}else i.remove(n),t.fireInput();else u(t)||(t.focus(),r(function(){return l.restore(t)}))}}]);
//# sourceMappingURL=x-bubbles.min.js.map