{"version":3,"sources":["webpack:///x-bubbles.min.js","webpack:///webpack/bootstrap db90271e2c08d24fa49f","webpack:///./index.js","webpack:///./x-bubbles/events.js","webpack:///./x-bubbles/events/backSpace.js","webpack:///./context.js","webpack:///./x-bubbles/bubble.js","webpack:///./x-bubbles/zws.js","webpack:///./x-bubbles/event.js","webpack:///./polyfills/CustomEventCommon.js","webpack:///./x-bubbles/cursor.js","webpack:///./x-bubbles/select.js","webpack:///./x-bubbles/bubbleset.js","webpack:///./x-bubbles/text.js","webpack:///./x-bubbles/events/paste.js","webpack:///./x-bubbles/events/arrowLeft.js","webpack:///./x-bubbles/events/arrowRight.js","webpack:///./x-bubbles/events/arrowBottom.js","webpack:///./x-bubbles/events/arrowTop.js","webpack:///./x-bubbles/events/tab.js","webpack:///./x-bubbles/events/selectAll.js","webpack:///./x-bubbles/events/dblclick.js","webpack:///./x-bubbles/events/click.js","webpack:///./x-bubbles/events/focus.js","webpack:///./x-bubbles/events/blur.js","webpack:///./x-bubbles/events/keypress.js","webpack:///./x-bubbles/events/keydown.js","webpack:///./x-bubbles/drag.js","webpack:///./x-bubbles/classes.js"],"names":["XBubbles","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","events","drag","bubble","create","HTMLElement","createdCallback","value","this","setAttribute","attachedCallback","addEventListener","blur","click","dblclick","focus","keydown","keypress","paste","init","bubbling","detachedCallback","removeEventListener","destroy","attributeChangedCallback","options","name","_options","classBubble","draggable","separator","ending","begining","bubbleFormation","dataset","items","get","innerText","set","innerHtml","document","registerElement","extends","backSpace","arrowLeft","arrowRight","arrowBottom","arrowTop","tab","selectAll","EV_BUBBLING","context","cursor","select","text","bubbleset","event","preventDefault","nodeSet","closestNodeSet","currentTarget","normalize","selection","getSelection","isCollapsed","remove","node","findBubbleLeft","uniq","list","prevBubble","previousSibling","nextBubble","nextSibling","forEach","item","parentNode","removeChild","isBubbleNode","restore","eval","nodeType","Node","ELEMENT_NODE","hasAttribute","ranges","getBubbleRanges","nodes","range","zws","textClean","toString","deleteContents","textParts","split","map","trimIterator","filter","nonEmptyIterator","reduce","parts","str","concat","parseFragmentByEnding","parseFragmentByBeginning","fragment","createDocumentFragment","textPart","wrap","createElement","classList","add","appendChild","push","insertNode","dispatch","bubbles","cancelable","detail","data","rng","children","childNodes","setEndBefore","undefined","createRange","setStartBefore","setEndAfter","trim","Boolean","reg","lastIndex","loop","exec","substring","res","index","_require","_require2","REG_REPLACE_NON_PRINTABLE","REG_ZWS","TEXT_ZWS","String","replace","check","test","createTextNode","element","params","dispatchEvent","Custom","forwardingEvents","fromElement","toElement","capture","callback","cancel","CustomEventCommon","CustomEvent","doc","protoEvent","Event","issetCustomEvent","createEvent","e","stopImmediatePropagation","immediatePropagationStopped","stopPropagation","eventName","evt","initCustomEvent","initEvent","clear","fakeText","hasChildNodes","lastNode","isEqualNode","sel","removeAllRanges","collapse","headList","lastList","startRangeSelect","fromNode","toNode","position","compareDocumentPosition","DOCUMENT_POSITION_PRECEDING","setSelected","all","slice","querySelectorAll","PATH_NOT_SELECTED","querySelector","PATH_SELECTED","has","head","last","removeAttribute","toggleUniq","isSelected","removeSelected","Array","getAttribute","closestNodeBubble","lastBubble","headBubble","focusNode","TEXT_NODE","nodeValue","len","rangeCount","getRangeAt","addRange","extend","anchorNode","offset","anchorOffset","Math","min","focusOffset","DOCUMENT_POSITION_FOLLOWING","max","pasteString","anchor","surroundContents","replaceChild","clipboardData","getData","kind","type","some","getAsString","shiftKey","nodeBubble","begin","hasBubble","insertBefore","metaKey","code","charCode","keyCode","onDragstart","currentDragSet","classes","DRAGSTART","dataTransfer","effectAllowed","setData","onDrop","onDragover","dropEffect","onDragenter","DROPZONE","onDragleave","onDragend"],"mappings":"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","file":"x-bubbles.min.js","sourcesContent":["var XBubbles =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar events = __webpack_require__(1);\n\tvar drag = __webpack_require__(25);\n\tvar bubble = __webpack_require__(4);\n\t\n\tvar XBubbles = Object.create(HTMLElement.prototype, {\n\t    createdCallback: {\n\t        value: function value() {\n\t            this.setAttribute('contenteditable', 'true');\n\t            this.setAttribute('spellcheck', 'false');\n\t        }\n\t    },\n\t\n\t    attachedCallback: {\n\t        value: function value() {\n\t            this.addEventListener('blur', events.blur);\n\t            this.addEventListener('click', events.click);\n\t            this.addEventListener('dblclick', events.dblclick);\n\t            this.addEventListener('focus', events.focus);\n\t            this.addEventListener('keydown', events.keydown);\n\t            this.addEventListener('keypress', events.keypress);\n\t            this.addEventListener('paste', events.paste);\n\t\n\t            drag.init(this);\n\t\n\t            bubble.bubbling(this);\n\t        }\n\t    },\n\t\n\t    detachedCallback: {\n\t        value: function value() {\n\t            this.removeEventListener('blur', events.blur);\n\t            this.removeEventListener('click', events.click);\n\t            this.removeEventListener('dblclick', events.dblclick);\n\t            this.removeEventListener('focus', events.focus);\n\t            this.removeEventListener('keydown', events.keydown);\n\t            this.removeEventListener('keypress', events.keypress);\n\t            this.removeEventListener('paste', events.paste);\n\t\n\t            drag.destroy(this);\n\t        }\n\t    },\n\t\n\t    attributeChangedCallback: {\n\t        value: function value() {} // name, previousValue, value\n\t    },\n\t\n\t    options: {\n\t        value: function value(name, _value) {\n\t            if (!this._options) {\n\t                this._options = _extends({\n\t                    classBubble: 'bubble',\n\t                    draggable: true,\n\t                    separator: /[,]/,\n\t                    ending: null, // /\\@ya\\.ru/g;\n\t                    begining: null,\n\t                    bubbleFormation: function bubbleFormation() {}\n\t                }, this.dataset);\n\t            }\n\t\n\t            if (typeof _value !== 'undefined') {\n\t                this._options[name] = _value;\n\t            } else {\n\t                return this._options[name];\n\t            }\n\t        }\n\t    },\n\t\n\t    items: {\n\t        get: function get() {\n\t            return [];\n\t        }\n\t    },\n\t\n\t    innerText: {\n\t        get: function get() {\n\t            return '';\n\t        },\n\t\n\t        set: function set() {}\n\t    },\n\t\n\t    innerHtml: {\n\t        get: function get() {\n\t            return '';\n\t        },\n\t\n\t        set: function set() {}\n\t    }\n\t});\n\t\n\tmodule.exports = document.registerElement('x-bubbles', {\n\t    extends: 'div',\n\t    prototype: XBubbles\n\t});\n\t\n\tmodule.exports = XBubbles;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.backSpace = __webpack_require__(2);\n\texports.paste = __webpack_require__(12);\n\texports.arrowLeft = __webpack_require__(13);\n\texports.arrowRight = __webpack_require__(14);\n\texports.arrowBottom = __webpack_require__(15);\n\texports.arrowTop = __webpack_require__(16);\n\texports.tab = __webpack_require__(17);\n\texports.selectAll = __webpack_require__(18);\n\texports.dblclick = __webpack_require__(19);\n\texports.click = __webpack_require__(20);\n\texports.focus = __webpack_require__(21);\n\texports.blur = __webpack_require__(22);\n\texports.keypress = __webpack_require__(23);\n\texports.keydown = __webpack_require__(24);\n\t\n\texports.EV_BUBBLING = 'bubbling';\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(3);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(8);\n\tvar select = __webpack_require__(9);\n\tvar text = __webpack_require__(11);\n\tvar bubbleset = __webpack_require__(10);\n\t\n\tmodule.exports = function (event) {\n\t    event.preventDefault();\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\t\n\t    if (!nodeSet) {\n\t        return;\n\t    }\n\t\n\t    nodeSet.normalize();\n\t\n\t    var selection = context.getSelection();\n\t    if (!selection) {\n\t        return;\n\t    }\n\t\n\t    if (selection.isCollapsed) {\n\t        if (text.arrowLeft(selection, true)) {\n\t            text.remove(selection);\n\t            return;\n\t        }\n\t    } else {\n\t        text.remove(selection);\n\t        return;\n\t    }\n\t\n\t    var node = bubbleset.findBubbleLeft(selection);\n\t    if (node) {\n\t        select.uniq(node);\n\t        return;\n\t    }\n\t\n\t    var list = select.get(nodeSet);\n\t\n\t    if (list.length) {\n\t        var prevBubble = list[0].previousSibling;\n\t        var nextBubble = list[list.length - 1].nextSibling;\n\t        list.forEach(function (item) {\n\t            return item.parentNode.removeChild(item);\n\t        });\n\t\n\t        if (bubble.isBubbleNode(prevBubble)) {\n\t            select.uniq(prevBubble);\n\t        } else if (bubble.isBubbleNode(nextBubble)) {\n\t            select.uniq(nextBubble);\n\t        } else {\n\t            nodeSet.focus();\n\t            cursor.restore(nodeSet);\n\t        }\n\t    }\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function () {\n\t    /* eslint no-eval: 0 */\n\t    return this || (1, eval)('this');\n\t}();\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar zws = __webpack_require__(5);\n\t\n\tvar _require = __webpack_require__(6);\n\t\n\tvar dispatch = _require.dispatch;\n\t\n\tvar _require2 = __webpack_require__(1);\n\t\n\tvar EV_BUBBLING = _require2.EV_BUBBLING;\n\t\n\t\n\texports.isBubbleNode = isBubbleNode;\n\texports.bubbling = bubbling;\n\t\n\tfunction isBubbleNode(node) {\n\t    if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n\t        return false;\n\t    }\n\t\n\t    return node.hasAttribute('bubble');\n\t}\n\t\n\tfunction bubbling(nodeSet) {\n\t    var classBubble = nodeSet.options('classBubble');\n\t    var bubbleFormation = nodeSet.options('bubbleFormation');\n\t    var draggable = nodeSet.options('draggable');\n\t    var separator = nodeSet.options('separator');\n\t    var ending = nodeSet.options('ending');\n\t    var begining = nodeSet.options('begining');\n\t    var ranges = getBubbleRanges(nodeSet);\n\t    var nodes = [];\n\t\n\t    ranges.forEach(function (range) {\n\t        var text = zws.textClean(range.toString());\n\t\n\t        if (!text) {\n\t            range.deleteContents();\n\t            return;\n\t        }\n\t\n\t        var textParts = [text];\n\t\n\t        if (separator) {\n\t            textParts = text.split(separator).map(trimIterator).filter(nonEmptyIterator);\n\t        }\n\t\n\t        if (ending) {\n\t            textParts = textParts.reduce(function (parts, str) {\n\t                return parts.concat(parseFragmentByEnding(str, ending));\n\t            }, []).map(trimIterator).filter(nonEmptyIterator);\n\t        } else if (begining) {\n\t            textParts = textParts.reduce(function (parts, str) {\n\t                return parts.concat(parseFragmentByBeginning(str, begining));\n\t            }, []).map(trimIterator).filter(nonEmptyIterator);\n\t        }\n\t\n\t        if (!textParts.length) {\n\t            range.deleteContents();\n\t        }\n\t\n\t        var fragment = document.createDocumentFragment();\n\t\n\t        textParts.forEach(function (textPart) {\n\t            var wrap = document.createElement('span');\n\t            wrap.innerText = textPart;\n\t\n\t            if (draggable) {\n\t                wrap.setAttribute('draggable', 'true');\n\t            }\n\t\n\t            bubbleFormation(wrap);\n\t\n\t            wrap.classList.add(classBubble);\n\t            wrap.setAttribute('bubble', '');\n\t            wrap.setAttribute('contenteditable', 'false');\n\t\n\t            fragment.appendChild(wrap);\n\t            nodes.push(wrap);\n\t        });\n\t\n\t        range.deleteContents();\n\t        range.insertNode(fragment);\n\t    });\n\t\n\t    if (nodes.length) {\n\t        dispatch(nodeSet, EV_BUBBLING, {\n\t            bubbles: false,\n\t            cancelable: false,\n\t            detail: { data: nodes }\n\t        });\n\t    }\n\t\n\t    return nodes;\n\t}\n\t\n\tfunction getBubbleRanges(set) {\n\t    var i = void 0;\n\t    var rng = void 0;\n\t    var node = void 0;\n\t    var ranges = [];\n\t    var children = set.childNodes;\n\t\n\t    for (i = 0; i < children.length; i++) {\n\t        node = children[i];\n\t\n\t        if (isBubbleNode(node)) {\n\t            if (rng) {\n\t                rng.setEndBefore(node);\n\t                ranges.push(rng);\n\t                rng = undefined;\n\t            }\n\t        } else {\n\t            if (!rng) {\n\t                rng = document.createRange();\n\t                rng.setStartBefore(node);\n\t            }\n\t        }\n\t    }\n\t\n\t    if (rng) {\n\t        rng.setEndAfter(node);\n\t        ranges.push(rng);\n\t    }\n\t\n\t    return ranges;\n\t}\n\t\n\tfunction trimIterator(str) {\n\t    return str.trim();\n\t}\n\t\n\tfunction nonEmptyIterator(str) {\n\t    return Boolean(str);\n\t}\n\t\n\tfunction parseFragmentByEnding(str, reg) {\n\t    var parts = [];\n\t    var lastIndex = 0;\n\t    var loop = 999;\n\t\n\t    reg.lastIndex = 0;\n\t    while (reg.exec(str) !== null && loop) {\n\t        loop--;\n\t        parts.push(str.substring(lastIndex, reg.lastIndex));\n\t        lastIndex = reg.lastIndex;\n\t    }\n\t\n\t    return parts;\n\t}\n\t\n\tfunction parseFragmentByBeginning(str, reg) {\n\t    var parts = [];\n\t    var res = void 0;\n\t    var index = 0;\n\t    var loop = 999;\n\t\n\t    reg.lastIndex = 0;\n\t    while ((res = reg.exec(str)) !== null && loop) {\n\t        loop--;\n\t        if (index !== res.index) {\n\t            parts.push(str.substring(index, res.index));\n\t            index = res.index;\n\t        }\n\t    }\n\t\n\t    parts.push(str.substring(index, str.length));\n\t    return parts;\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/* eslint-disable max-len */\n\tvar REG_REPLACE_NON_PRINTABLE = /[\\0-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u037F-\\u0383\\u038B\\u038D\\u03A2\\u0528-\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B-\\u058E\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08A1\\u08AD-\\u08E3\\u08FF\\u0978\\u0980\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0C00\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C34\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5A-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C80\\u0C81\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D01\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D4F-\\u0D56\\u0D58-\\u0D5F\\u0D64\\u0D65\\u0D76-\\u0D78\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F5-\\u13FF\\u169D-\\u169F\\u16F1-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191D-\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C80-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7-\\u1CFF\\u1DE7-\\u1DFB\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BB-\\u20CF\\u20F1-\\u20FF\\u218A-\\u218F\\u23F4-\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2700\\u2B4D-\\u2B4F\\u2B5A-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E3C-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FCD-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA698-\\uA69E\\uA6F8-\\uA6FF\\uA78F\\uA794-\\uA79F\\uA7AB-\\uA7F7\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C5-\\uA8CD\\uA8DA-\\uA8DF\\uA8FC-\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9E0-\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAA7C-\\uAA7F\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F-\\uABBF\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE27-\\uFE2F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF]/g;\n\tvar REG_ZWS = /\\u200B/;\n\tvar TEXT_ZWS = '​';\n\t\n\texports.textClean = function (text) {\n\t    return String(text || '').trim().replace(REG_REPLACE_NON_PRINTABLE, '');\n\t};\n\t\n\texports.check = function (text) {\n\t    return REG_ZWS.test(text);\n\t};\n\t\n\texports.createElement = function () {\n\t    return document.createTextNode(TEXT_ZWS);\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * @module x-bubbles/event\n\t */\n\t\n\tvar context = __webpack_require__(3);\n\tvar CustomEventCommon = __webpack_require__(7);\n\t\n\t/**\n\t * Designer events.\n\t *\n\t * @example\n\t * const { Custom } = require('event');\n\t *\n\t * new Custom('custom-event', {\n\t *     bubbles: true,\n\t *     cancelable: true,\n\t *     detail: { data: '123' }\n\t * })\n\t *\n\t * @alias module:x-bubbles/event~Custom\n\t * @constructor\n\t */\n\tvar Custom = function () {\n\t    if (typeof context.CustomEvent === 'function') {\n\t        return context.CustomEvent;\n\t    }\n\t\n\t    return CustomEventCommon;\n\t}();\n\t\n\t/**\n\t * Dispatch event.\n\t *\n\t * @example\n\t * const { dispatch } = require('event');\n\t * dispatch(node, 'custom-event', {\n\t *     bubbles: true,\n\t *     cancelable: true,\n\t *     detail: { data: '123' }\n\t * })\n\t *\n\t * @alias module:x-bubbles/event.dispatch\n\t * @param {HTMLElement} element node events\n\t * @param {string} name event name\n\t * @param {Object} params the event parameters\n\t * @param {boolean} [params.bubbles=false]\n\t * @param {boolean} [params.cancelable=false]\n\t * @param {*} [params.detail]\n\t */\n\tfunction dispatch(element, name, params) {\n\t    element.dispatchEvent(new Custom(name, params || {}));\n\t}\n\t\n\t/**\n\t * Forwarding events\n\t *\n\t * @example\n\t * const { forwardingEvents } = require('event');\n\t * forwardingEvents('custom-event', fromNode, toNode, false);\n\t *\n\t * @param {string} name event name\n\t * @param {HTMLElement} fromElement\n\t * @param {HTMLElement} toElement\n\t * @param {boolean} [capture=false]\n\t * @returns {function} callback\n\t */\n\tfunction forwardingEvents(name, fromElement, toElement) {\n\t    var capture = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\t\n\t    var callback = function callback(event) {\n\t        dispatch(toElement, name, {\n\t            bubbles: event.bubbles,\n\t            cancelable: event.cancelable,\n\t            detail: event.detail\n\t        });\n\t    };\n\t\n\t    callback.cancel = function () {\n\t        fromElement.removeEventListener(name, callback, capture);\n\t    };\n\t\n\t    fromElement.addEventListener(name, callback, capture);\n\t\n\t    return callback;\n\t}\n\t\n\texports.Custom = Custom;\n\texports.dispatch = dispatch;\n\texports.forwardingEvents = forwardingEvents;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(3);\n\t\n\t/**\n\t * @constant {Document}\n\t * @private\n\t */\n\tvar doc = context.document;\n\t\n\t/**\n\t * @constant {Object}\n\t * @private\n\t */\n\tvar protoEvent = context.Event.prototype;\n\t\n\tvar issetCustomEvent = false;\n\t\n\ttry {\n\t    issetCustomEvent = Boolean(doc.createEvent('CustomEvent'));\n\t} catch (e) {}\n\t// do nothing\n\t\n\t\n\t/**\n\t * The original function \"stopImmediatePropagation\"\n\t * @constant {function}\n\t * @private\n\t */\n\tvar stopImmediatePropagation = protoEvent.stopImmediatePropagation;\n\t\n\t/**\n\t * Override function to set properties \"immediatePropagationStopped\"\n\t */\n\tprotoEvent.stopImmediatePropagation = function () {\n\t    this.immediatePropagationStopped = true;\n\t\n\t    if (stopImmediatePropagation) {\n\t        stopImmediatePropagation.call(this);\n\t    } else {\n\t        this.stopPropagation();\n\t    }\n\t};\n\t\n\tvar CustomEventCommon = function () {\n\t    if (issetCustomEvent) {\n\t        return function (eventName, params) {\n\t            params = params || {};\n\t\n\t            var bubbles = Boolean(params.bubbles);\n\t            var cancelable = Boolean(params.cancelable);\n\t            var evt = doc.createEvent('CustomEvent');\n\t\n\t            evt.initCustomEvent(eventName, bubbles, cancelable, params.detail);\n\t\n\t            return evt;\n\t        };\n\t    }\n\t\n\t    return function (eventName, params) {\n\t        params = params || {};\n\t\n\t        var bubbles = Boolean(params.bubbles);\n\t        var cancelable = Boolean(params.cancelable);\n\t        var evt = doc.createEvent('Event');\n\t\n\t        evt.initEvent(eventName, bubbles, cancelable);\n\t        evt.detail = params.detail;\n\t\n\t        return evt;\n\t    };\n\t}();\n\t\n\tCustomEventCommon.prototype = protoEvent;\n\t\n\tmodule.exports = CustomEventCommon;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(3);\n\tvar zws = __webpack_require__(5);\n\tvar select = __webpack_require__(9);\n\t\n\texports.restore = function (node) {\n\t    select.clear(node);\n\t    var fakeText = zws.createElement();\n\t\n\t    if (node.hasChildNodes()) {\n\t        var lastNode = node.childNodes[node.childNodes.length - 1];\n\t\n\t        if (lastNode.isEqualNode(fakeText)) {\n\t            fakeText = lastNode;\n\t        } else {\n\t            node.appendChild(fakeText);\n\t        }\n\t    } else {\n\t        node.appendChild(fakeText);\n\t    }\n\t\n\t    var sel = context.getSelection();\n\t    sel.removeAllRanges();\n\t    sel.collapse(fakeText, 1);\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(3);\n\tvar bubble = __webpack_require__(4);\n\tvar bubbleset = __webpack_require__(10);\n\t\n\tvar slice = Array.prototype.slice;\n\tvar PATH_SELECTED = '[bubble][selected]';\n\tvar PATH_NOT_SELECTED = '[bubble]:not([selected])';\n\t\n\texports.all = all;\n\texports.add = add;\n\texports.clear = clear;\n\texports.get = get;\n\texports.uniq = uniq;\n\texports.head = head;\n\texports.last = last;\n\texports.has = has;\n\texports.range = range;\n\texports.toggleUniq = toggleUniq;\n\t\n\tfunction range(node) {\n\t    if (!bubble.isBubbleNode(node)) {\n\t        return;\n\t    }\n\t\n\t    var set = node.parentNode;\n\t    var list = get(set);\n\t\n\t    if (!list.length) {\n\t        uniq(node);\n\t        return;\n\t    }\n\t\n\t    clear(set);\n\t\n\t    var headList = list[0];\n\t    var lastList = list[list.length - 1];\n\t\n\t    if (headList === lastList || !set.startRangeSelect) {\n\t        set.startRangeSelect = headList;\n\t    }\n\t\n\t    var fromNode = void 0;\n\t    var toNode = void 0;\n\t    var position = node.compareDocumentPosition(set.startRangeSelect);\n\t\n\t    if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n\t        fromNode = set.startRangeSelect;\n\t        toNode = node;\n\t    } else {\n\t        fromNode = node;\n\t        toNode = set.startRangeSelect;\n\t    }\n\t\n\t    if (fromNode && toNode) {\n\t        var item = fromNode;\n\t\n\t        while (item) {\n\t            if (!setSelected(item)) {\n\t                break;\n\t            }\n\t\n\t            if (item === toNode) {\n\t                break;\n\t            }\n\t\n\t            item = item.nextSibling;\n\t        }\n\t\n\t        bubble.bubbling(set);\n\t    }\n\t}\n\t\n\tfunction all(nodeSet) {\n\t    slice.call(nodeSet.querySelectorAll(PATH_NOT_SELECTED)).forEach(function (item) {\n\t        return setSelected(item);\n\t    });\n\t    nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\t\n\t    bubble.bubbling(nodeSet);\n\t\n\t    var selection = context.getSelection();\n\t    selection && selection.removeAllRanges();\n\t}\n\t\n\tfunction has(nodeSet) {\n\t    return Boolean(nodeSet.querySelector(PATH_SELECTED));\n\t}\n\t\n\tfunction head(set) {\n\t    return get(set)[0];\n\t}\n\t\n\tfunction last(set) {\n\t    var list = get(set);\n\t    return list[list.length - 1];\n\t}\n\t\n\tfunction get(nodeSet) {\n\t    return slice.call(nodeSet.querySelectorAll(PATH_SELECTED));\n\t}\n\t\n\tfunction clear(nodeSet) {\n\t    get(nodeSet).forEach(function (item) {\n\t        return item.removeAttribute('selected');\n\t    });\n\t}\n\t\n\tfunction add(node) {\n\t    if (setSelected(node)) {\n\t        var nodeSet = bubbleset.closestNodeSet(node);\n\t\n\t        nodeSet.startRangeSelect = node;\n\t        // ???\n\t        bubble.bubbling(nodeSet);\n\t\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction uniq(node) {\n\t    if (!bubble.isBubbleNode(node)) {\n\t        return false;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(node);\n\t    var selection = context.getSelection();\n\t\n\t    selection && selection.removeAllRanges();\n\t    clear(nodeSet);\n\t\n\t    return add(node);\n\t}\n\t\n\tfunction toggleUniq(node) {\n\t    if (isSelected(node)) {\n\t        var nodeSet = bubbleset.closestNodeSet(node);\n\t\n\t        if (get(nodeSet).length === 1) {\n\t            return removeSelected(node);\n\t        }\n\t    }\n\t\n\t    return uniq(node);\n\t}\n\t\n\tfunction isSelected(node) {\n\t    return bubble.isBubbleNode(node) && node.hasAttribute('selected') || false;\n\t}\n\t\n\tfunction setSelected(node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t        node.setAttribute('selected', '');\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction removeSelected(node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t        node.removeAttribute('selected');\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubble = __webpack_require__(4);\n\tvar zws = __webpack_require__(5);\n\tvar context = __webpack_require__(3);\n\t\n\texports.lastBubble = function (nodeSet) {\n\t    return nodeSet.querySelector('[bubble]:last-child');\n\t};\n\t\n\texports.headBubble = function (nodeSet) {\n\t    return nodeSet.querySelector('[bubble]:first-child');\n\t};\n\t\n\texports.closestNodeSet = closestNodeSet;\n\texports.closestNodeBubble = closestNodeBubble;\n\t\n\texports.findBubbleLeft = function (selection) {\n\t    selection = selection || context.getSelection();\n\t\n\t    if (!selection || !selection.focusNode) {\n\t        return;\n\t    }\n\t\n\t    var node = selection.focusNode.previousSibling;\n\t\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        if (node.nodeType === Node.TEXT_NODE && zws.textClean(node.nodeValue)) {\n\t            return;\n\t        }\n\t\n\t        node = node.previousSibling;\n\t    }\n\t};\n\t\n\tfunction closestNodeSet(node) {\n\t    while (node) {\n\t        if (node.nodeType === Node.ELEMENT_NODE && node.getAttribute('is') === 'x-bubbles') {\n\t\n\t            return node;\n\t        }\n\t\n\t        node = node.parentNode;\n\t    }\n\t}\n\t\n\tfunction closestNodeBubble(node) {\n\t    while (node) {\n\t        if (node.nodeType === Node.ELEMENT_NODE && node.hasAttribute('bubble')) {\n\t\n\t            return node;\n\t        }\n\t\n\t        node = node.parentNode;\n\t    }\n\t}\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(3);\n\tvar zws = __webpack_require__(5);\n\t\n\texports.arrowRight = arrowRight;\n\texports.arrowLeft = arrowLeft;\n\texports.remove = remove;\n\t\n\tfunction remove(selection) {\n\t    selection = selection || context.getSelection();\n\t\n\t    if (!selection || selection.isCollapsed) {\n\t        return false;\n\t    }\n\t\n\t    var len = selection.rangeCount;\n\t\n\t    for (var i = 0; i < len; i++) {\n\t        selection.getRangeAt(i).deleteContents();\n\t    }\n\t\n\t    var fakeText = zws.createElement();\n\t    var range = selection.getRangeAt(0);\n\t    range.insertNode(fakeText);\n\t    range.collapse();\n\t\n\t    selection.removeAllRanges();\n\t    selection.addRange(range);\n\t\n\t    return true;\n\t}\n\t\n\tfunction arrowLeft(selection, extend) {\n\t    selection = selection || context.getSelection();\n\t\n\t    if (!selection) {\n\t        return false;\n\t    }\n\t\n\t    if (!selection.anchorNode || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n\t        return false;\n\t    }\n\t\n\t    if (!selection.isCollapsed && !extend) {\n\t        var node = selection.anchorNode;\n\t        var _offset = selection.anchorOffset;\n\t\n\t        if (selection.anchorNode === selection.focusNode) {\n\t            _offset = Math.min(selection.anchorOffset, selection.focusOffset);\n\t        } else {\n\t            var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n\t            if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\n\t                _offset = selection.focusOffset;\n\t                node = selection.focusNode;\n\t            }\n\t        }\n\t\n\t        selection.collapse(node, _offset);\n\t        return true;\n\t    }\n\t\n\t    var item = selection.focusNode;\n\t    var offset = selection.focusOffset;\n\t\n\t    while (item) {\n\t        if (item.nodeType !== Node.TEXT_NODE) {\n\t            return false;\n\t        }\n\t\n\t        if (offset === null) {\n\t            offset = item.nodeValue.length;\n\t        }\n\t\n\t        if (offset - 1 < 0) {\n\t            item = item.previousSibling;\n\t            offset = null;\n\t            continue;\n\t        }\n\t\n\t        var text = item.nodeValue.substring(offset - 1, offset);\n\t\n\t        if (zws.check(text)) {\n\t            offset = offset - 1;\n\t            continue;\n\t        }\n\t\n\t        break;\n\t    }\n\t\n\t    if (!item || offset === null) {\n\t        return false;\n\t    }\n\t\n\t    if (extend) {\n\t        selection.extend(item, offset - 1);\n\t    } else {\n\t        selection.collapse(item, offset - 1);\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction arrowRight(selection, extend) {\n\t    selection = selection || context.getSelection();\n\t\n\t    if (!selection) {\n\t        return false;\n\t    }\n\t\n\t    if (!selection.focusNode || selection.focusNode.nodeType !== Node.TEXT_NODE) {\n\t        return false;\n\t    }\n\t\n\t    if (!selection.isCollapsed && !extend) {\n\t        var node = selection.focusNode;\n\t        var _offset2 = selection.focusOffset;\n\t\n\t        if (selection.focusNode === selection.anchorNode) {\n\t            _offset2 = Math.max(selection.focusOffset, selection.anchorOffset);\n\t        } else {\n\t            var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n\t            if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n\t                _offset2 = selection.anchorOffset;\n\t                node = selection.anchorNode;\n\t            }\n\t        }\n\t\n\t        selection.collapse(node, _offset2);\n\t        return true;\n\t    }\n\t\n\t    var item = selection.focusNode;\n\t    var offset = selection.focusOffset;\n\t\n\t    while (item) {\n\t        if (item.nodeType !== Node.TEXT_NODE) {\n\t            return false;\n\t        }\n\t\n\t        var len = item.nodeValue.length;\n\t\n\t        if (offset + 1 > len) {\n\t            item = item.nextSibling;\n\t            offset = 0;\n\t            continue;\n\t        }\n\t\n\t        var text = item.nodeValue.substring(offset, offset + 1);\n\t\n\t        if (zws.check(text)) {\n\t            offset = offset + 1;\n\t            continue;\n\t        }\n\t\n\t        break;\n\t    }\n\t\n\t    if (!item) {\n\t        return false;\n\t    }\n\t\n\t    if (extend) {\n\t        selection.extend(item, offset + 1);\n\t    } else {\n\t        selection.collapse(item, offset + 1);\n\t    }\n\t\n\t    return true;\n\t}\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(3);\n\tvar zws = __webpack_require__(5);\n\t\n\tvar slice = Array.prototype.slice;\n\t\n\tmodule.exports = function (event) {\n\t    event.preventDefault();\n\t\n\t    var clipboardData = event.clipboardData;\n\t\n\t    if (!clipboardData) {\n\t        return;\n\t    }\n\t\n\t    var data = clipboardData.getData && clipboardData.getData('text/plain');\n\t\n\t    if (!pasteString(data) && clipboardData.items) {\n\t        slice.call(clipboardData.items).filter(function (item) {\n\t            return item.kind === 'string' && item.type === 'text/plain';\n\t        }).some(function (item) {\n\t            item.getAsString(pasteString);\n\t            return true;\n\t        });\n\t    }\n\t};\n\t\n\tfunction pasteString(data) {\n\t    data = zws.textClean(data);\n\t    if (!data) {\n\t        return false;\n\t    }\n\t\n\t    var sel = context.getSelection();\n\t    if (!sel || !sel.rangeCount) {\n\t        return false;\n\t    }\n\t\n\t    var anchor = document.createElement('span');\n\t    var text = document.createTextNode(data);\n\t\n\t    sel.getRangeAt(0).surroundContents(anchor);\n\t    anchor.parentNode.replaceChild(text, anchor);\n\t    sel.removeAllRanges();\n\t    sel.collapse(text, text.nodeValue.length);\n\t\n\t    return true;\n\t}\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(3);\n\tvar bubble = __webpack_require__(4);\n\tvar select = __webpack_require__(9);\n\tvar text = __webpack_require__(11);\n\tvar bubbleset = __webpack_require__(10);\n\t\n\tmodule.exports = function (event) {\n\t    event.preventDefault();\n\t\n\t    var selection = context.getSelection();\n\t\n\t    if (text.arrowLeft(selection, event.shiftKey)) {\n\t        return;\n\t    }\n\t\n\t    if (selection.anchorNode && selection.anchorNode.nodeType === Node.TEXT_NODE) {\n\t        var nodeBubble = prevBubble(selection.anchorNode);\n\t        nodeBubble && select.uniq(nodeBubble);\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\t\n\t    if (!nodeSet) {\n\t        return;\n\t    }\n\t\n\t    var list = select.get(nodeSet);\n\t    var begin = list.length > 1 && list[0] === nodeSet.startRangeSelect ? list[list.length - 1] : list[0];\n\t\n\t    var node = prevBubble(begin);\n\t\n\t    if (node) {\n\t        if (event.shiftKey) {\n\t            select.range(node);\n\t        } else {\n\t            select.uniq(node);\n\t        }\n\t    }\n\t};\n\t\n\tfunction prevBubble(target) {\n\t    var node = target && target.previousSibling;\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        node = node.previousSibling;\n\t    }\n\t}\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(3);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(8);\n\tvar select = __webpack_require__(9);\n\tvar text = __webpack_require__(11);\n\tvar bubbleset = __webpack_require__(10);\n\t\n\tmodule.exports = function (event) {\n\t    event.preventDefault();\n\t\n\t    var selection = context.getSelection();\n\t\n\t    if (text.arrowRight(selection, event.shiftKey)) {\n\t        return;\n\t    }\n\t\n\t    if (selection.focusNode && selection.focusNode.nodeType === Node.TEXT_NODE) {\n\t        var nodeBubble = nextBubble(selection.focusNode);\n\t        nodeBubble && select.uniq(nodeBubble);\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\t\n\t    if (!nodeSet) {\n\t        return;\n\t    }\n\t\n\t    var list = select.get(nodeSet);\n\t    var begin = list.length > 1 && list[list.length - 1] === nodeSet.startRangeSelect ? list[0] : list[list.length - 1];\n\t\n\t    var node = nextBubble(begin);\n\t\n\t    if (node) {\n\t        if (event.shiftKey) {\n\t            select.range(node);\n\t        } else {\n\t            select.uniq(node);\n\t        }\n\t    } else if (begin && begin.nextSibling && begin.nextSibling.nodeType === Node.TEXT_NODE) {\n\t        select.clear(nodeSet);\n\t        selection.collapse(begin.nextSibling, 0);\n\t    } else {\n\t        cursor.restore(nodeSet);\n\t    }\n\t};\n\t\n\tfunction nextBubble(target) {\n\t    var node = target && target.nextSibling;\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        node = node.nextSibling;\n\t    }\n\t}\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar select = __webpack_require__(9);\n\tvar cursor = __webpack_require__(8);\n\t\n\tmodule.exports = function (event) {\n\t    var nodeSet = event.currentTarget;\n\t\n\t    if (select.has(nodeSet)) {\n\t        event.preventDefault();\n\t        cursor.restore(nodeSet);\n\t    }\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubbleset = __webpack_require__(10);\n\tvar select = __webpack_require__(9);\n\t\n\tmodule.exports = function (event) {\n\t    event.preventDefault();\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\t    var headBubble = nodeSet && bubbleset.headBubble(nodeSet);\n\t\n\t    if (headBubble) {\n\t        select.uniq(headBubble);\n\t    }\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar select = __webpack_require__(9);\n\tvar cursor = __webpack_require__(8);\n\t\n\tmodule.exports = function (event) {\n\t    var nodeSet = event.currentTarget;\n\t    if (select.has(nodeSet)) {\n\t        event.preventDefault();\n\t        cursor.restore(nodeSet);\n\t    }\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(3);\n\tvar zws = __webpack_require__(5);\n\t\n\tmodule.exports = function (event) {\n\t    event.preventDefault();\n\t\n\t    var nodeSet = event.currentTarget;\n\t    var selection = context.getSelection();\n\t    var node = selection && selection.anchorNode;\n\t    var hasBubble = Boolean(nodeSet.querySelector('[bubble]'));\n\t\n\t    if (node && node.nodeType === Node.TEXT_NODE) {\n\t        var fromNode = void 0;\n\t        var toNode = void 0;\n\t        var item = node;\n\t\n\t        while (item && item.nodeType === Node.TEXT_NODE) {\n\t            fromNode = item;\n\t            item = item.previousSibling;\n\t        }\n\t\n\t        item = node;\n\t\n\t        while (item && item.nodeType === Node.TEXT_NODE) {\n\t            toNode = item;\n\t            item = item.nextSibling;\n\t        }\n\t\n\t        var range = document.createRange();\n\t        range.setStartBefore(fromNode);\n\t        range.setEndAfter(toNode);\n\t\n\t        var text = zws.textClean(range.toString());\n\t\n\t        if (text || !text && !hasBubble) {\n\t            if (!text) {\n\t                range.collapse();\n\t            }\n\t\n\t            selection.removeAllRanges();\n\t            selection.addRange(range);\n\t            return true;\n\t        }\n\t    }\n\t\n\t    return false;\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(3);\n\tvar zws = __webpack_require__(5);\n\tvar bubbleset = __webpack_require__(10);\n\t\n\tmodule.exports = function (event) {\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (!nodeSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t\n\t    if (!nodeBubble) {\n\t        return;\n\t    }\n\t\n\t    event.preventDefault();\n\t\n\t    var fakeText = zws.createElement();\n\t    var text = document.createTextNode(zws.textClean(nodeBubble.innerText));\n\t\n\t    nodeSet.replaceChild(text, nodeBubble);\n\t    nodeSet.insertBefore(fakeText, text);\n\t\n\t    var selection = context.getSelection();\n\t\n\t    if (selection) {\n\t        var range = document.createRange();\n\t        range.setStartBefore(fakeText);\n\t        range.setEndAfter(text);\n\t\n\t        selection.removeAllRanges();\n\t        selection.addRange(range);\n\t    }\n\t};\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubbleset = __webpack_require__(10);\n\tvar select = __webpack_require__(9);\n\t\n\tmodule.exports = function (event) {\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (!nodeSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t\n\t    if (!nodeBubble) {\n\t        select.clear(nodeSet);\n\t        return;\n\t    }\n\t\n\t    if (event.metaKey) {\n\t        select.add(nodeBubble);\n\t    } else if (event.shiftKey) {\n\t        if (!nodeSet.startRangeSelect) {\n\t            select.uniq(nodeBubble);\n\t        } else {\n\t            select.range(nodeBubble);\n\t        }\n\t    } else {\n\t        select.toggleUniq(nodeBubble);\n\t    }\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar cursor = __webpack_require__(8);\n\t\n\tmodule.exports = function (event) {\n\t    cursor.restore(event.currentTarget);\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubble = __webpack_require__(4);\n\tvar select = __webpack_require__(9);\n\t\n\tmodule.exports = function (event) {\n\t    bubble.bubbling(event.currentTarget);\n\t    select.clear(event.currentTarget);\n\t};\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubbleset = __webpack_require__(10);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(8);\n\t\n\tmodule.exports = function (event) {\n\t    var code = event.charCode || event.keyCode;\n\t\n\t    /* eslint no-case-declarations: 0 */\n\t    switch (code) {\n\t        case 13: // Enter\n\t        case 44: // ,\n\t        case 59:\n\t            // ;\n\t            event.preventDefault();\n\t\n\t            var nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\t\n\t            if (!nodeSet) {\n\t                return;\n\t            }\n\t\n\t            bubble.bubbling(nodeSet);\n\t            cursor.restore(nodeSet);\n\t            break;\n\t    }\n\t};\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubbleset = __webpack_require__(10);\n\tvar events = __webpack_require__(1);\n\tvar select = __webpack_require__(9);\n\t\n\tmodule.exports = function (event) {\n\t    var code = event.charCode || event.keyCode;\n\t\n\t    switch (code) {\n\t        case 8:\n\t            // Backspace\n\t            events.backSpace(event);\n\t            break;\n\t\n\t        case 9:\n\t            // Tab\n\t            events.tab(event);\n\t            break;\n\t\n\t        case 37:\n\t            // Left\n\t            events.arrowLeft(event);\n\t            break;\n\t\n\t        // сдвигаем курсор в начало списка\n\t        case 38:\n\t            // Top\n\t            events.arrowTop(event);\n\t            break;\n\t\n\t        case 39:\n\t            // Right\n\t            events.arrowRight(event);\n\t            break;\n\t\n\t        // сдвигаем курсор в конец списка\n\t        case 40:\n\t            // Bottom\n\t            events.arrowBottom(event);\n\t            break;\n\t\n\t        case 65:\n\t            // a\n\t            if (event.metaKey) {\n\t                if (!events.selectAll(event)) {\n\t                    var nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\t\n\t                    if (!nodeSet) {\n\t                        return;\n\t                    }\n\t\n\t                    select.all(nodeSet);\n\t                }\n\t            }\n\t            break;\n\t    }\n\t};\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar select = __webpack_require__(9);\n\tvar bubble = __webpack_require__(4);\n\tvar bubbleset = __webpack_require__(10);\n\tvar classes = __webpack_require__(26);\n\t\n\tvar currentDragSet = null;\n\t\n\texports.init = function (nodeSet) {\n\t    nodeSet.addEventListener('drop', onDrop);\n\t    nodeSet.addEventListener('dragover', onDragover);\n\t    nodeSet.addEventListener('dragenter', onDragenter);\n\t    nodeSet.addEventListener('dragleave', onDragleave);\n\t    nodeSet.addEventListener('dragstart', onDragstart);\n\t    nodeSet.addEventListener('dragend', onDragend);\n\t};\n\t\n\texports.destroy = function (nodeSet) {\n\t    nodeSet.removeEventListener('drop', onDrop);\n\t    nodeSet.removeEventListener('dragover', onDragover);\n\t    nodeSet.removeEventListener('dragenter', onDragenter);\n\t    nodeSet.removeEventListener('dragleave', onDragleave);\n\t    nodeSet.removeEventListener('dragstart', onDragstart);\n\t    nodeSet.removeEventListener('dragend', onDragend);\n\t};\n\t\n\tfunction onDragstart(event) {\n\t    event.stopPropagation();\n\t\n\t    var nodeBubble = event.target;\n\t    var nodeSet = bubbleset.closestNodeSet(nodeBubble);\n\t\n\t    if (!nodeSet || !bubble.isBubbleNode(nodeBubble)) {\n\t        event.preventDefault();\n\t        return;\n\t    }\n\t\n\t    currentDragSet = nodeSet;\n\t    nodeSet.classList.add(classes.DRAGSTART);\n\t    select.add(nodeBubble);\n\t\n\t    event.dataTransfer.effectAllowed = 'move';\n\t    event.dataTransfer.setData('text/plain', '');\n\t}\n\t\n\tfunction onDrop(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (!nodeSet || nodeSet === currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var list = select.get(currentDragSet);\n\t\n\t    if (!list.length) {\n\t        return;\n\t    }\n\t\n\t    list.forEach(function (item) {\n\t        return nodeSet.appendChild(item);\n\t    });\n\t    nodeSet.focus();\n\t}\n\t\n\tfunction onDragover(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    event.dataTransfer.dropEffect = 'move';\n\t}\n\t\n\tfunction onDragenter(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (!nodeSet || nodeSet === currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    nodeSet.classList.add(classes.DROPZONE);\n\t}\n\t\n\tfunction onDragleave(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (!nodeSet || nodeSet === currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    nodeSet.classList.remove(classes.DROPZONE);\n\t}\n\t\n\tfunction onDragend(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    currentDragSet.classList.remove(classes.DRAGSTART);\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (nodeSet && nodeSet !== currentDragSet) {\n\t        nodeSet.classList.remove(classes.DROPZONE);\n\t    }\n\t\n\t    currentDragSet = null;\n\t}\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.DRAGSTART = 'drag';\n\texports.DROPZONE = 'dropzone';\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** x-bubbles.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap db90271e2c08d24fa49f\n **/","const events = require('./x-bubbles/events');\nconst drag = require('./x-bubbles/drag');\nconst bubble = require('./x-bubbles/bubble');\n\nconst XBubbles = Object.create(HTMLElement.prototype, {\n    createdCallback: {\n        value: function () {\n            this.setAttribute('contenteditable', 'true');\n            this.setAttribute('spellcheck', 'false');\n        }\n    },\n\n    attachedCallback: {\n        value: function () {\n            this.addEventListener('blur', events.blur);\n            this.addEventListener('click', events.click);\n            this.addEventListener('dblclick', events.dblclick);\n            this.addEventListener('focus', events.focus);\n            this.addEventListener('keydown', events.keydown);\n            this.addEventListener('keypress', events.keypress);\n            this.addEventListener('paste', events.paste);\n\n            drag.init(this);\n\n            bubble.bubbling(this);\n        }\n    },\n\n    detachedCallback: {\n        value: function () {\n            this.removeEventListener('blur', events.blur);\n            this.removeEventListener('click', events.click);\n            this.removeEventListener('dblclick', events.dblclick);\n            this.removeEventListener('focus', events.focus);\n            this.removeEventListener('keydown', events.keydown);\n            this.removeEventListener('keypress', events.keypress);\n            this.removeEventListener('paste', events.paste);\n\n            drag.destroy(this);\n        }\n    },\n\n    attributeChangedCallback: {\n        value: function () {} // name, previousValue, value\n    },\n\n    options: {\n        value: function (name, value) {\n            if (!this._options) {\n                this._options = {\n                    classBubble: 'bubble',\n                    draggable: true,\n                    separator: /[,]/,\n                    ending: null, // /\\@ya\\.ru/g;\n                    begining: null,\n                    bubbleFormation: function () {},\n                    ...this.dataset\n                };\n            }\n\n            if (typeof value !== 'undefined') {\n                this._options[ name ] = value;\n\n            } else {\n                return this._options[ name ];\n            }\n        }\n    },\n\n    items: {\n        get: function () {\n            return [];\n        }\n    },\n\n    innerText: {\n        get: function () {\n            return '';\n        },\n\n        set: function () {}\n    },\n\n    innerHtml: {\n        get: function () {\n            return '';\n        },\n\n        set: function () {}\n    }\n});\n\nmodule.exports = document.registerElement('x-bubbles', {\n    extends: 'div',\n    prototype: XBubbles\n});\n\nmodule.exports = XBubbles;\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","\n\nexports.backSpace = require('./events/backSpace');\nexports.paste = require('./events/paste');\nexports.arrowLeft = require('./events/arrowLeft');\nexports.arrowRight = require('./events/arrowRight');\nexports.arrowBottom = require('./events/arrowBottom');\nexports.arrowTop = require('./events/arrowTop');\nexports.tab = require('./events/tab');\nexports.selectAll = require('./events/selectAll');\nexports.dblclick = require('./events/dblclick');\nexports.click = require('./events/click');\nexports.focus = require('./events/focus');\nexports.blur = require('./events/blur');\nexports.keypress = require('./events/keypress');\nexports.keydown = require('./events/keydown');\n\nexports.EV_BUBBLING = 'bubbling';\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events.js\n **/","const context = require('../../context');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst select = require('../select');\nconst text = require('../text');\nconst bubbleset = require('../bubbleset');\n\nmodule.exports = function (event) {\n    event.preventDefault();\n\n    const nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\n    if (!nodeSet) {\n        return;\n    }\n\n    nodeSet.normalize();\n\n    const selection = context.getSelection();\n    if (!selection) {\n        return;\n    }\n\n    if (selection.isCollapsed) {\n        if (text.arrowLeft(selection, true)) {\n            text.remove(selection);\n            return;\n        }\n\n    } else {\n        text.remove(selection);\n        return;\n    }\n\n    let node = bubbleset.findBubbleLeft(selection);\n    if (node) {\n        select.uniq(node);\n        return;\n    }\n\n    const list = select.get(nodeSet);\n\n    if (list.length) {\n        const prevBubble = list[ 0 ].previousSibling;\n        const nextBubble = list[ list.length - 1 ].nextSibling;\n        list.forEach(item => item.parentNode.removeChild(item));\n\n        if (bubble.isBubbleNode(prevBubble)) {\n            select.uniq(prevBubble);\n\n        } else if (bubble.isBubbleNode(nextBubble)) {\n            select.uniq(nextBubble);\n\n        } else {\n            nodeSet.focus();\n            cursor.restore(nodeSet);\n        }\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/backSpace.js\n **/","module.exports = (function () {\n    /* eslint no-eval: 0 */\n    return this || (1, eval)('this');\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./context.js\n **/","const zws = require('./zws');\nconst { dispatch } = require('./event');\nconst { EV_BUBBLING } = require('./events');\n\nexports.isBubbleNode = isBubbleNode;\nexports.bubbling = bubbling;\n\nfunction isBubbleNode(node) {\n    if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n        return false;\n    }\n\n    return node.hasAttribute('bubble');\n}\n\nfunction bubbling(nodeSet) {\n    const classBubble = nodeSet.options('classBubble');\n    const bubbleFormation = nodeSet.options('bubbleFormation');\n    const draggable = nodeSet.options('draggable');\n    const separator = nodeSet.options('separator');\n    const ending = nodeSet.options('ending');\n    const begining = nodeSet.options('begining');\n    const ranges = getBubbleRanges(nodeSet);\n    const nodes = [];\n\n    ranges.forEach(function (range) {\n        const text = zws.textClean(range.toString());\n\n        if (!text) {\n            range.deleteContents();\n            return;\n        }\n\n        let textParts = [ text ];\n\n        if (separator) {\n            textParts = text\n                .split(separator)\n                .map(trimIterator)\n                .filter(nonEmptyIterator);\n        }\n\n        if (ending) {\n            textParts = textParts\n                .reduce((parts, str) => parts.concat(parseFragmentByEnding(str, ending)), [])\n                .map(trimIterator)\n                .filter(nonEmptyIterator);\n\n        } else if (begining) {\n            textParts = textParts\n                .reduce((parts, str) => parts.concat(parseFragmentByBeginning(str, begining)), [])\n                .map(trimIterator)\n                .filter(nonEmptyIterator);\n        }\n\n        if (!textParts.length) {\n            range.deleteContents();\n        }\n\n        const fragment = document.createDocumentFragment();\n\n        textParts.forEach(function (textPart) {\n            const wrap = document.createElement('span');\n            wrap.innerText = textPart;\n\n            if (draggable) {\n                wrap.setAttribute('draggable', 'true');\n            }\n\n            bubbleFormation(wrap);\n\n            wrap.classList.add(classBubble);\n            wrap.setAttribute('bubble', '');\n            wrap.setAttribute('contenteditable', 'false');\n\n            fragment.appendChild(wrap);\n            nodes.push(wrap);\n        });\n\n        range.deleteContents();\n        range.insertNode(fragment);\n    });\n\n    if (nodes.length) {\n        dispatch(nodeSet, EV_BUBBLING, {\n            bubbles: false,\n            cancelable: false,\n            detail: { data: nodes }\n        });\n    }\n\n    return nodes;\n}\n\nfunction getBubbleRanges(set) {\n    let i;\n    let rng;\n    let node;\n    const ranges = [];\n    const children = set.childNodes;\n\n    for (i = 0; i < children.length; i++) {\n        node = children[ i ];\n\n        if (isBubbleNode(node)) {\n            if (rng) {\n                rng.setEndBefore(node);\n                ranges.push(rng);\n                rng = undefined;\n            }\n\n        } else {\n            if (!rng) {\n                rng = document.createRange();\n                rng.setStartBefore(node);\n            }\n        }\n    }\n\n    if (rng) {\n        rng.setEndAfter(node);\n        ranges.push(rng);\n    }\n\n    return ranges;\n}\n\nfunction trimIterator(str) {\n    return str.trim();\n}\n\nfunction nonEmptyIterator(str) {\n    return Boolean(str);\n}\n\nfunction parseFragmentByEnding(str, reg) {\n    const parts = [];\n    let lastIndex = 0;\n    let loop = 999;\n\n    reg.lastIndex = 0;\n    while (reg.exec(str) !== null && loop) {\n        loop--;\n        parts.push(str.substring(lastIndex, reg.lastIndex));\n        lastIndex = reg.lastIndex;\n    }\n\n    return parts;\n}\n\nfunction parseFragmentByBeginning(str, reg) {\n    const parts = [];\n    let res;\n    let index = 0;\n    let loop = 999;\n\n    reg.lastIndex = 0;\n    while ((res = reg.exec(str)) !== null && loop) {\n        loop--;\n        if (index !== res.index) {\n            parts.push(str.substring(index, res.index));\n            index = res.index;\n        }\n    }\n\n    parts.push(str.substring(index, str.length));\n    return parts;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/bubble.js\n **/","/* eslint-disable max-len */\nconst REG_REPLACE_NON_PRINTABLE = /[\\0-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u037F-\\u0383\\u038B\\u038D\\u03A2\\u0528-\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B-\\u058E\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08A1\\u08AD-\\u08E3\\u08FF\\u0978\\u0980\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0C00\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C34\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5A-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C80\\u0C81\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D01\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D4F-\\u0D56\\u0D58-\\u0D5F\\u0D64\\u0D65\\u0D76-\\u0D78\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F5-\\u13FF\\u169D-\\u169F\\u16F1-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191D-\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C80-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7-\\u1CFF\\u1DE7-\\u1DFB\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BB-\\u20CF\\u20F1-\\u20FF\\u218A-\\u218F\\u23F4-\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2700\\u2B4D-\\u2B4F\\u2B5A-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E3C-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FCD-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA698-\\uA69E\\uA6F8-\\uA6FF\\uA78F\\uA794-\\uA79F\\uA7AB-\\uA7F7\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C5-\\uA8CD\\uA8DA-\\uA8DF\\uA8FC-\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9E0-\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAA7C-\\uAA7F\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F-\\uABBF\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE27-\\uFE2F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF]/g;\nconst REG_ZWS = /\\u200B/;\nconst TEXT_ZWS = '\\u200B';\n\nexports.textClean = function (text) {\n    return String(text || '')\n        .trim()\n        .replace(REG_REPLACE_NON_PRINTABLE, '');\n};\n\nexports.check = function (text) {\n    return REG_ZWS.test(text);\n};\n\nexports.createElement = function () {\n    return document.createTextNode(TEXT_ZWS);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/zws.js\n **/","/**\n * @module x-bubbles/event\n */\n\nconst context = require('../context');\nconst CustomEventCommon = require('../polyfills/CustomEventCommon');\n\n/**\n * Designer events.\n *\n * @example\n * const { Custom } = require('event');\n *\n * new Custom('custom-event', {\n *     bubbles: true,\n *     cancelable: true,\n *     detail: { data: '123' }\n * })\n *\n * @alias module:x-bubbles/event~Custom\n * @constructor\n */\nconst Custom = (function () {\n    if (typeof context.CustomEvent === 'function') {\n        return context.CustomEvent;\n    }\n\n    return CustomEventCommon;\n}());\n\n/**\n * Dispatch event.\n *\n * @example\n * const { dispatch } = require('event');\n * dispatch(node, 'custom-event', {\n *     bubbles: true,\n *     cancelable: true,\n *     detail: { data: '123' }\n * })\n *\n * @alias module:x-bubbles/event.dispatch\n * @param {HTMLElement} element node events\n * @param {string} name event name\n * @param {Object} params the event parameters\n * @param {boolean} [params.bubbles=false]\n * @param {boolean} [params.cancelable=false]\n * @param {*} [params.detail]\n */\nfunction dispatch(element, name, params) {\n    element.dispatchEvent(new Custom(name, params || {}));\n}\n\n/**\n * Forwarding events\n *\n * @example\n * const { forwardingEvents } = require('event');\n * forwardingEvents('custom-event', fromNode, toNode, false);\n *\n * @param {string} name event name\n * @param {HTMLElement} fromElement\n * @param {HTMLElement} toElement\n * @param {boolean} [capture=false]\n * @returns {function} callback\n */\nfunction forwardingEvents(name, fromElement, toElement, capture = false) {\n    const callback = function (event) {\n        dispatch(toElement, name, {\n            bubbles: event.bubbles,\n            cancelable: event.cancelable,\n            detail: event.detail\n        });\n    };\n\n    callback.cancel = function () {\n        fromElement.removeEventListener(name, callback, capture);\n    };\n\n    fromElement.addEventListener(name, callback, capture);\n\n    return callback;\n}\n\nexports.Custom = Custom;\nexports.dispatch = dispatch;\nexports.forwardingEvents = forwardingEvents;\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/event.js\n **/","const context = require('../context');\n\n/**\n * @constant {Document}\n * @private\n */\nconst doc = context.document;\n\n/**\n * @constant {Object}\n * @private\n */\nconst protoEvent = context.Event.prototype;\n\nlet issetCustomEvent = false;\n\ntry {\n    issetCustomEvent = Boolean(doc.createEvent('CustomEvent'));\n} catch (e) {\n    // do nothing\n}\n\n/**\n * The original function \"stopImmediatePropagation\"\n * @constant {function}\n * @private\n */\nconst stopImmediatePropagation = protoEvent.stopImmediatePropagation;\n\n/**\n * Override function to set properties \"immediatePropagationStopped\"\n */\nprotoEvent.stopImmediatePropagation = function () {\n    this.immediatePropagationStopped = true;\n\n    if (stopImmediatePropagation) {\n        stopImmediatePropagation.call(this);\n\n    } else {\n        this.stopPropagation();\n    }\n};\n\nlet CustomEventCommon = (function () {\n    if (issetCustomEvent) {\n        return function (eventName, params) {\n            params = params || {};\n\n            let bubbles = Boolean(params.bubbles);\n            let cancelable = Boolean(params.cancelable);\n            let evt = doc.createEvent('CustomEvent');\n\n            evt.initCustomEvent(eventName, bubbles, cancelable, params.detail);\n\n            return evt;\n        };\n    }\n\n    return function (eventName, params) {\n        params = params || {};\n\n        let bubbles = Boolean(params.bubbles);\n        let cancelable = Boolean(params.cancelable);\n        let evt = doc.createEvent('Event');\n\n        evt.initEvent(eventName, bubbles, cancelable);\n        evt.detail = params.detail;\n\n        return evt;\n    };\n}());\n\nCustomEventCommon.prototype = protoEvent;\n\nmodule.exports = CustomEventCommon;\n\n\n\n/** WEBPACK FOOTER **\n ** ./polyfills/CustomEventCommon.js\n **/","const context = require('../context');\nconst zws = require('./zws');\nconst select = require('./select');\n\nexports.restore = function (node) {\n    select.clear(node);\n    let fakeText = zws.createElement();\n\n    if (node.hasChildNodes()) {\n        const lastNode = node.childNodes[ node.childNodes.length - 1 ];\n\n        if (lastNode.isEqualNode(fakeText)) {\n            fakeText = lastNode;\n\n        } else {\n            node.appendChild(fakeText);\n        }\n\n    } else {\n        node.appendChild(fakeText);\n    }\n\n    const sel = context.getSelection();\n    sel.removeAllRanges();\n    sel.collapse(fakeText, 1);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/cursor.js\n **/","const context = require('../context');\nconst bubble = require('./bubble');\nconst bubbleset = require('./bubbleset');\n\nconst slice = Array.prototype.slice;\nconst PATH_SELECTED = '[bubble][selected]';\nconst PATH_NOT_SELECTED = '[bubble]:not([selected])';\n\nexports.all = all;\nexports.add = add;\nexports.clear = clear;\nexports.get = get;\nexports.uniq = uniq;\nexports.head = head;\nexports.last = last;\nexports.has = has;\nexports.range = range;\nexports.toggleUniq = toggleUniq;\n\nfunction range(node) {\n    if (!bubble.isBubbleNode(node)) {\n        return;\n    }\n\n    const set = node.parentNode;\n    const list = get(set);\n\n    if (!list.length) {\n        uniq(node);\n        return;\n    }\n\n    clear(set);\n\n    const headList = list[0];\n    const lastList = list[ list.length - 1 ];\n\n    if (headList === lastList || !set.startRangeSelect) {\n        set.startRangeSelect = headList;\n    }\n\n    let fromNode;\n    let toNode;\n    const position = node.compareDocumentPosition(set.startRangeSelect);\n\n    if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n        fromNode = set.startRangeSelect;\n        toNode = node;\n\n    } else {\n        fromNode = node;\n        toNode = set.startRangeSelect;\n    }\n\n    if (fromNode && toNode) {\n        let item = fromNode;\n\n        while (item) {\n            if (!setSelected(item)) {\n                break;\n            }\n\n            if (item === toNode) {\n                break;\n            }\n\n            item = item.nextSibling;\n        }\n\n        bubble.bubbling(set);\n    }\n}\n\nfunction all(nodeSet) {\n    slice.call(nodeSet.querySelectorAll(PATH_NOT_SELECTED)).forEach(item => setSelected(item));\n    nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\n    bubble.bubbling(nodeSet);\n\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n}\n\nfunction has(nodeSet) {\n    return Boolean(nodeSet.querySelector(PATH_SELECTED));\n}\n\nfunction head(set) {\n    return get(set)[0];\n}\n\nfunction last(set) {\n    const list = get(set);\n    return list[ list.length - 1 ];\n}\n\nfunction get(nodeSet) {\n    return slice.call(nodeSet.querySelectorAll(PATH_SELECTED));\n}\n\nfunction clear(nodeSet) {\n    get(nodeSet).forEach(item => item.removeAttribute('selected'));\n}\n\nfunction add(node) {\n    if (setSelected(node)) {\n        const nodeSet = bubbleset.closestNodeSet(node);\n\n        nodeSet.startRangeSelect = node;\n        // ???\n        bubble.bubbling(nodeSet);\n\n        return true;\n    }\n\n    return false;\n}\n\nfunction uniq(node) {\n    if (!bubble.isBubbleNode(node)) {\n        return false;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(node);\n    const selection = context.getSelection();\n\n    selection && selection.removeAllRanges();\n    clear(nodeSet);\n\n    return add(node);\n}\n\nfunction toggleUniq(node) {\n    if (isSelected(node)) {\n        const nodeSet = bubbleset.closestNodeSet(node);\n\n        if (get(nodeSet).length === 1) {\n            return removeSelected(node);\n        }\n    }\n\n    return uniq(node);\n}\n\nfunction isSelected(node) {\n    return bubble.isBubbleNode(node) && node.hasAttribute('selected') || false;\n}\n\nfunction setSelected(node) {\n    if (bubble.isBubbleNode(node)) {\n        node.setAttribute('selected', '');\n        return true;\n    }\n\n    return false;\n}\n\nfunction removeSelected(node) {\n    if (bubble.isBubbleNode(node)) {\n        node.removeAttribute('selected');\n        return true;\n    }\n\n    return false;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/select.js\n **/","const bubble = require('./bubble');\nconst zws = require('./zws');\nconst context = require('../context');\n\nexports.lastBubble = function (nodeSet) {\n    return nodeSet.querySelector('[bubble]:last-child');\n};\n\nexports.headBubble = function (nodeSet) {\n    return nodeSet.querySelector('[bubble]:first-child');\n};\n\nexports.closestNodeSet = closestNodeSet;\nexports.closestNodeBubble = closestNodeBubble;\n\nexports.findBubbleLeft = function (selection) {\n    selection = selection || context.getSelection();\n\n    if (!selection || !selection.focusNode) {\n        return;\n    }\n\n    let node = selection.focusNode.previousSibling;\n\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        if (node.nodeType === Node.TEXT_NODE && zws.textClean(node.nodeValue)) {\n            return;\n        }\n\n        node = node.previousSibling;\n    }\n};\n\nfunction closestNodeSet(node) {\n    while (node) {\n        if (node.nodeType === Node.ELEMENT_NODE &&\n            node.getAttribute('is') === 'x-bubbles') {\n\n            return node;\n        }\n\n        node = node.parentNode;\n    }\n}\n\nfunction closestNodeBubble(node) {\n    while (node) {\n        if (node.nodeType === Node.ELEMENT_NODE &&\n            node.hasAttribute('bubble')) {\n\n            return node;\n        }\n\n        node = node.parentNode;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/bubbleset.js\n **/","const context = require('../context');\nconst zws = require('./zws');\n\nexports.arrowRight = arrowRight;\nexports.arrowLeft = arrowLeft;\nexports.remove = remove;\n\nfunction remove(selection) {\n    selection = selection || context.getSelection();\n\n    if (!selection || selection.isCollapsed) {\n        return false;\n    }\n\n    const len = selection.rangeCount;\n\n    for (let i = 0; i < len; i++) {\n        selection.getRangeAt(i).deleteContents();\n    }\n\n    const fakeText = zws.createElement();\n    const range = selection.getRangeAt(0);\n    range.insertNode(fakeText);\n    range.collapse();\n\n    selection.removeAllRanges();\n    selection.addRange(range);\n\n    return true;\n}\n\nfunction arrowLeft(selection, extend) {\n    selection = selection || context.getSelection();\n\n    if (!selection) {\n        return false;\n    }\n\n    if (!selection.anchorNode || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n        return false;\n    }\n\n    if (!selection.isCollapsed && !extend) {\n        let node = selection.anchorNode;\n        let offset = selection.anchorOffset;\n\n        if (selection.anchorNode === selection.focusNode) {\n            offset = Math.min(selection.anchorOffset, selection.focusOffset);\n\n        } else {\n            const position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n            if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\n                offset = selection.focusOffset;\n                node = selection.focusNode;\n            }\n        }\n\n        selection.collapse(node, offset);\n        return true;\n    }\n\n    let item = selection.focusNode;\n    let offset = selection.focusOffset;\n\n    while (item) {\n        if (item.nodeType !== Node.TEXT_NODE) {\n            return false;\n        }\n\n        if (offset === null) {\n            offset = item.nodeValue.length;\n        }\n\n        if (offset - 1 < 0) {\n            item = item.previousSibling;\n            offset = null;\n            continue;\n        }\n\n        const text = item.nodeValue.substring(offset - 1, offset);\n\n        if (zws.check(text)) {\n            offset = offset - 1;\n            continue;\n        }\n\n        break;\n    }\n\n    if (!item || offset === null) {\n        return false;\n    }\n\n    if (extend) {\n        selection.extend(item, offset - 1);\n\n    } else {\n        selection.collapse(item, offset - 1);\n    }\n\n    return true;\n}\n\nfunction arrowRight(selection, extend) {\n    selection = selection || context.getSelection();\n\n    if (!selection) {\n        return false;\n    }\n\n    if (!selection.focusNode || selection.focusNode.nodeType !== Node.TEXT_NODE) {\n        return false;\n    }\n\n    if (!selection.isCollapsed && !extend) {\n        let node = selection.focusNode;\n        let offset = selection.focusOffset;\n\n        if (selection.focusNode === selection.anchorNode) {\n            offset = Math.max(selection.focusOffset, selection.anchorOffset);\n\n        } else {\n            const position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n            if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n                offset = selection.anchorOffset;\n                node = selection.anchorNode;\n            }\n        }\n\n        selection.collapse(node, offset);\n        return true;\n    }\n\n    let item = selection.focusNode;\n    let offset = selection.focusOffset;\n\n    while (item) {\n        if (item.nodeType !== Node.TEXT_NODE) {\n            return false;\n        }\n\n        const len = item.nodeValue.length;\n\n        if (offset + 1 > len) {\n            item = item.nextSibling;\n            offset = 0;\n            continue;\n        }\n\n        const text = item.nodeValue.substring(offset, offset + 1);\n\n        if (zws.check(text)) {\n            offset = offset + 1;\n            continue;\n        }\n\n        break;\n    }\n\n    if (!item) {\n        return false;\n    }\n\n    if (extend) {\n        selection.extend(item, offset + 1);\n\n    } else {\n        selection.collapse(item, offset + 1);\n    }\n\n    return true;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/text.js\n **/","const context = require('../../context');\nconst zws = require('../zws');\n\nconst slice = Array.prototype.slice;\n\nmodule.exports = function (event) {\n    event.preventDefault();\n\n    const clipboardData = event.clipboardData;\n\n    if (!clipboardData) {\n        return;\n    }\n\n    let data = clipboardData.getData && clipboardData.getData('text/plain');\n\n    if (!pasteString(data) && clipboardData.items) {\n        slice.call(clipboardData.items)\n            .filter(item => item.kind === 'string' && item.type === 'text/plain')\n            .some(function (item) {\n                item.getAsString(pasteString);\n                return true;\n            });\n    }\n};\n\nfunction pasteString(data) {\n    data = zws.textClean(data);\n    if (!data) {\n        return false;\n    }\n\n    const sel = context.getSelection();\n    if (!sel || !sel.rangeCount) {\n        return false;\n    }\n\n    const anchor = document.createElement('span');\n    const text = document.createTextNode(data);\n\n    sel.getRangeAt(0).surroundContents(anchor);\n    anchor.parentNode.replaceChild(text, anchor);\n    sel.removeAllRanges();\n    sel.collapse(text, text.nodeValue.length);\n\n    return true;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/paste.js\n **/","const context = require('../../context');\nconst bubble = require('../bubble');\nconst select = require('../select');\nconst text = require('../text');\nconst bubbleset = require('../bubbleset');\n\nmodule.exports = function (event) {\n    event.preventDefault();\n\n    const selection = context.getSelection();\n\n    if (text.arrowLeft(selection, event.shiftKey)) {\n        return;\n    }\n\n    if (selection.anchorNode && selection.anchorNode.nodeType === Node.TEXT_NODE) {\n        const nodeBubble = prevBubble(selection.anchorNode);\n        nodeBubble && select.uniq(nodeBubble);\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\n    if (!nodeSet) {\n        return;\n    }\n\n    const list = select.get(nodeSet);\n    const begin = do {\n        if (list.length > 1 && list[ 0 ] === nodeSet.startRangeSelect) {\n            list[ list.length - 1 ];\n\n        } else {\n            list[ 0 ];\n        }\n    };\n\n    const node = prevBubble(begin);\n\n    if (node) {\n        if (event.shiftKey) {\n            select.range(node);\n\n        } else {\n            select.uniq(node);\n        }\n    }\n};\n\nfunction prevBubble(target) {\n    let node = target && target.previousSibling;\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        node = node.previousSibling;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/arrowLeft.js\n **/","const context = require('../../context');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst select = require('../select');\nconst text = require('../text');\nconst bubbleset = require('../bubbleset');\n\nmodule.exports = function (event) {\n    event.preventDefault();\n\n    const selection = context.getSelection();\n\n    if (text.arrowRight(selection, event.shiftKey)) {\n        return;\n    }\n\n    if (selection.focusNode && selection.focusNode.nodeType === Node.TEXT_NODE) {\n        const nodeBubble = nextBubble(selection.focusNode);\n        nodeBubble && select.uniq(nodeBubble);\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\n    if (!nodeSet) {\n        return;\n    }\n\n    const list = select.get(nodeSet);\n    const begin = do {\n        if (list.length > 1 && list[ list.length - 1 ] === nodeSet.startRangeSelect) {\n            list[ 0 ];\n\n        } else {\n            list[ list.length - 1 ];\n        }\n    };\n\n    const node = nextBubble(begin);\n\n    if (node) {\n        if (event.shiftKey) {\n            select.range(node);\n\n        } else {\n            select.uniq(node);\n        }\n\n    } else if (begin && begin.nextSibling && begin.nextSibling.nodeType === Node.TEXT_NODE) {\n        select.clear(nodeSet);\n        selection.collapse(begin.nextSibling, 0);\n\n    } else {\n        cursor.restore(nodeSet);\n    }\n};\n\nfunction nextBubble(target) {\n    let node = target && target.nextSibling;\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        node = node.nextSibling;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/arrowRight.js\n **/","const select = require('../select');\nconst cursor = require('../cursor');\n\nmodule.exports = function (event) {\n    const nodeSet = event.currentTarget;\n\n    if (select.has(nodeSet)) {\n        event.preventDefault();\n        cursor.restore(nodeSet);\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/arrowBottom.js\n **/","const bubbleset = require('../bubbleset');\nconst select = require('../select');\n\nmodule.exports = function (event) {\n    event.preventDefault();\n\n    const nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n    const headBubble = nodeSet && bubbleset.headBubble(nodeSet);\n\n    if (headBubble) {\n        select.uniq(headBubble);\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/arrowTop.js\n **/","const select = require('../select');\nconst cursor = require('../cursor');\n\nmodule.exports = function (event) {\n    const nodeSet = event.currentTarget;\n    if (select.has(nodeSet)) {\n        event.preventDefault();\n        cursor.restore(nodeSet);\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/tab.js\n **/","const context = require('../../context');\nconst zws = require('../zws');\n\nmodule.exports = function (event) {\n    event.preventDefault();\n\n    const nodeSet = event.currentTarget;\n    const selection = context.getSelection();\n    const node = selection && selection.anchorNode;\n    const hasBubble = Boolean(nodeSet.querySelector('[bubble]'));\n\n    if (node && node.nodeType === Node.TEXT_NODE) {\n        let fromNode;\n        let toNode;\n        let item = node;\n\n        while (item && item.nodeType === Node.TEXT_NODE) {\n            fromNode = item;\n            item = item.previousSibling;\n        }\n\n        item = node;\n\n        while (item && item.nodeType === Node.TEXT_NODE) {\n            toNode = item;\n            item = item.nextSibling;\n        }\n\n        const range = document.createRange();\n        range.setStartBefore(fromNode);\n        range.setEndAfter(toNode);\n\n        const text = zws.textClean(range.toString());\n\n        if (text || (!text && !hasBubble)) {\n            if (!text) {\n                range.collapse();\n            }\n\n            selection.removeAllRanges();\n            selection.addRange(range);\n            return true;\n        }\n    }\n\n    return false;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/selectAll.js\n **/","const context = require('../../context');\nconst zws = require('../zws');\nconst bubbleset = require('../bubbleset');\n\nmodule.exports = function (event) {\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (!nodeSet) {\n        return;\n    }\n\n    const nodeBubble = bubbleset.closestNodeBubble(event.target);\n\n    if (!nodeBubble) {\n        return;\n    }\n\n    event.preventDefault();\n\n    const fakeText = zws.createElement();\n    const text = document.createTextNode(zws.textClean(nodeBubble.innerText));\n\n    nodeSet.replaceChild(text, nodeBubble);\n    nodeSet.insertBefore(fakeText, text);\n\n    const selection = context.getSelection();\n\n    if (selection) {\n        const range = document.createRange();\n        range.setStartBefore(fakeText);\n        range.setEndAfter(text);\n\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/dblclick.js\n **/","const bubbleset = require('../bubbleset');\nconst select = require('../select');\n\nmodule.exports = function (event) {\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (!nodeSet) {\n        return;\n    }\n\n    const nodeBubble = bubbleset.closestNodeBubble(event.target);\n\n    if (!nodeBubble) {\n        select.clear(nodeSet);\n        return;\n    }\n\n    if (event.metaKey) {\n        select.add(nodeBubble);\n\n    } else if (event.shiftKey) {\n        if (!nodeSet.startRangeSelect) {\n            select.uniq(nodeBubble);\n\n        } else {\n            select.range(nodeBubble);\n        }\n\n    } else {\n        select.toggleUniq(nodeBubble);\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/click.js\n **/","const cursor = require('../cursor');\n\nmodule.exports = function (event) {\n    cursor.restore(event.currentTarget);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/focus.js\n **/","const bubble = require('../bubble');\nconst select = require('../select');\n\nmodule.exports = function (event) {\n    bubble.bubbling(event.currentTarget);\n    select.clear(event.currentTarget);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/blur.js\n **/","const bubbleset = require('../bubbleset');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\n\nmodule.exports = function (event) {\n    const code = event.charCode || event.keyCode;\n\n    /* eslint no-case-declarations: 0 */\n    switch (code) {\n    case 13: // Enter\n    case 44: // ,\n    case 59: // ;\n        event.preventDefault();\n\n        const nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\n        if (!nodeSet) {\n            return;\n        }\n\n        bubble.bubbling(nodeSet);\n        cursor.restore(nodeSet);\n        break;\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/keypress.js\n **/","const bubbleset = require('../bubbleset');\nconst events = require('../events');\nconst select = require('../select');\n\nmodule.exports = function (event) {\n    const code = event.charCode || event.keyCode;\n\n    switch (code) {\n    case 8: // Backspace\n        events.backSpace(event);\n        break;\n\n    case 9: // Tab\n        events.tab(event);\n        break;\n\n    case 37: // Left\n        events.arrowLeft(event);\n        break;\n\n    // сдвигаем курсор в начало списка\n    case 38: // Top\n        events.arrowTop(event);\n        break;\n\n    case 39: // Right\n        events.arrowRight(event);\n        break;\n\n    // сдвигаем курсор в конец списка\n    case 40: // Bottom\n        events.arrowBottom(event);\n        break;\n\n    case 65: // a\n        if (event.metaKey) {\n            if (!events.selectAll(event)) {\n                const nodeSet = bubbleset.closestNodeSet(event.currentTarget);\n\n                if (!nodeSet) {\n                    return;\n                }\n\n                select.all(nodeSet);\n            }\n        }\n        break;\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/events/keydown.js\n **/","const select = require('./select');\nconst bubble = require('./bubble');\nconst bubbleset = require('./bubbleset');\nconst classes = require('./classes');\n\nlet currentDragSet = null;\n\nexports.init = function (nodeSet) {\n    nodeSet.addEventListener('drop', onDrop);\n    nodeSet.addEventListener('dragover', onDragover);\n    nodeSet.addEventListener('dragenter', onDragenter);\n    nodeSet.addEventListener('dragleave', onDragleave);\n    nodeSet.addEventListener('dragstart', onDragstart);\n    nodeSet.addEventListener('dragend', onDragend);\n};\n\nexports.destroy = function (nodeSet) {\n    nodeSet.removeEventListener('drop', onDrop);\n    nodeSet.removeEventListener('dragover', onDragover);\n    nodeSet.removeEventListener('dragenter', onDragenter);\n    nodeSet.removeEventListener('dragleave', onDragleave);\n    nodeSet.removeEventListener('dragstart', onDragstart);\n    nodeSet.removeEventListener('dragend', onDragend);\n};\n\nfunction onDragstart(event) {\n    event.stopPropagation();\n\n    const nodeBubble = event.target;\n    const nodeSet = bubbleset.closestNodeSet(nodeBubble);\n\n    if (!nodeSet || !bubble.isBubbleNode(nodeBubble)) {\n        event.preventDefault();\n        return;\n    }\n\n    currentDragSet = nodeSet;\n    nodeSet.classList.add(classes.DRAGSTART);\n    select.add(nodeBubble);\n\n    event.dataTransfer.effectAllowed = 'move';\n    event.dataTransfer.setData('text/plain', '');\n}\n\nfunction onDrop(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (!nodeSet || nodeSet === currentDragSet) {\n        return;\n    }\n\n    const list = select.get(currentDragSet);\n\n    if (!list.length) {\n        return;\n    }\n\n    list.forEach(item => nodeSet.appendChild(item));\n    nodeSet.focus();\n}\n\nfunction onDragover(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    event.dataTransfer.dropEffect = 'move';\n}\n\nfunction onDragenter(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (!nodeSet || nodeSet === currentDragSet) {\n        return;\n    }\n\n    nodeSet.classList.add(classes.DROPZONE);\n}\n\nfunction onDragleave(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (!nodeSet || nodeSet === currentDragSet) {\n        return;\n    }\n\n    nodeSet.classList.remove(classes.DROPZONE);\n}\n\nfunction onDragend(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    currentDragSet.classList.remove(classes.DRAGSTART);\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (nodeSet && nodeSet !== currentDragSet) {\n        nodeSet.classList.remove(classes.DROPZONE);\n    }\n\n    currentDragSet = null;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/drag.js\n **/","\nexports.DRAGSTART = 'drag';\nexports.DROPZONE = 'dropzone';\n\n\n\n/** WEBPACK FOOTER **\n ** ./x-bubbles/classes.js\n **/"],"sourceRoot":""}