{"version":3,"sources":["webpack:///x-bubbles-compact.min.js","webpack:///webpack/bootstrap 64bde8ef5bd9efdee1bb","webpack:///./index.js","webpack:///./context.js","webpack:///./core/editor.js","webpack:///./core/bubbleset.js","webpack:///./core/bubble.js","webpack:///./core/text.js","webpack:///./core/utils.js","webpack:///../~/raf/index.js","webpack:///../~/performance-now/lib/performance-now.js","webpack:///../~/process/browser.js","webpack:///./core/cursor.js","webpack:///./core/select.js","webpack:///./core/constant.js","webpack:///./core/events.js","webpack:///./polyfills/CustomEventCommon.js","webpack:///./core/drag.js","webpack:///./core/drag/native.js","webpack:///./core/drag/common.js","webpack:///./core/drag/bubbles.png","webpack:///./core/drag/mouse.js","webpack:///external {\"var\":\"Modernizr\",\"root\":\"modernizr\",\"commonjs2\":\"modernizr\",\"commonjs\":\"modernizr\",\"amd\":\"modernizr\"}","webpack:///./core/common/blur.js","webpack:///./core/common/click.js","webpack:///./core/common/focus.js","webpack:///./core/common/keydown.js","webpack:///./core/editor/blur.js","webpack:///./core/editor/click.js","webpack:///./core/editor/focus.js","webpack:///./core/editor/keydown.js","webpack:///./core/editor/keypress.js","webpack:///./core/editor/keyup.js","webpack:///./core/editor/paste.js","webpack:///./core/select/blur.js","webpack:///./core/select/click.js","webpack:///./core/select/keydown.js","webpack:///./core/select/keypress.js","webpack:///./core/options.js"],"names":["XBubbles","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","initEditor","node","editor","Object","defineProperty","configurable","value","init","destroyEditor","destroy","context","utils","options","create","HTMLDivElement","prototype","createdCallback","this","attachedCallback","bubbling","detachedCallback","attributeChangedCallback","name","items","get","getItems","inputValue","setContent","data","addBubble","bubbleText","removeBubble","nodeBubble","editBubble","ready","callback","document","registerElement","extends","eval","bubbleset","getBubbles","selection","getSelection","removeAllRanges","list","select","length","removeBubbles","fireChange","firstChild","removeChild","text","html2text","appendChild","ownerDocument","createTextNode","bubble","cursor","restore","dataAttributes","text2bubble","fireInput","contains","edit","textRange","currentTextRange","textClean","toString","fireEdit","events","dispatch","EV","BUBBLE_EDIT","bubbles","cancelable","detail","CHANGE","editText","PROPS","BUBBLE_VALUE","BUBBLE_INPUT","fireBeforeRemove","BEFORE_REMOVE","_require","drag","COMMON_EVENTS","blur","click","focus","keydown","EDITOR_EVENTS","keypress","keyup","paste","SELECT_EVENTS","PROXY_EVENTS","proxyLocal","mscontrolselect","prevent","resize","resizestart","nodeWrap","nodeEditor","setAttribute","onLocal","on","throttle","bind","off","offLocal","lastBubble","nodeSet","querySelector","headBubble","Array","slice","querySelectorAll","hasBubbles","Boolean","findBubbleLeft","focusNode","anchorNode","previousSibling","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","isBubbleNode","nodeType","TEXT_NODE","nodeValue","findBubbleRight","nextSibling","closestNodeSet","isEditorNode","parentNode","closestNodeBubble","prevBubble","target","nextBubble","ELEMENT_NODE","getAttribute","forEach","item","moveBubbles","nodeEditorFrom","nodeEditorTo","hasAttribute","bubbleDeformation","rangeParams","dataText","innerText","startOffset","endOffset","textFake","createZws","textNode","replaceChild","insertBefore","range","createRange","setStart","setEnd","addRange","arguments","undefined","bubbleFormation","classBubble","draggable","canUseDrag","wrap","createElement","key","escape","classes","String","trim","split","len","classList","add","begining","ending","separator","tokenizer","ranges","getBubbleRanges","nodes","deleteContents","textParts","map","trimIterator","filter","nonEmptyIterator","reduce","parts","str","concat","parseFragmentByEnding","parseFragmentByBeginning","isArray","fragment","createDocumentFragment","textPart","push","insertNode","children","childNodes","i","setEndBefore","setStartBefore","setEndAfter","reg","lastIndex","loop","exec","substring","res","index","isEmptyLeft","_correctSelection","correctSelection","startNode","isEmpty","isEmptyRight","_correctSelection2","endNode","replace","pointNode","remove","rangeCount","anchor","getRangeAt","surroundContents","collapse","replaceString","arrowLeft","extend","_correctSelection3","revert","isCollapsed","isNativeExtend","offset","checkZws","arrowRight","_correctSelection4","DOMContainer","implementation","createHTMLDocument","body","selectAll","fromNode","toNode","TEXT_ZWS","REG_ZWS","test","REG_REPLACE_NON_PRINTABLE","unescapeHtmlChar","chr","HTML_UNESCAPES","escapeHtmlChar","HTML_ESCAPES","raf","&","<",">","\"","'","`","&amp;","&lt;","&gt;","&quot;","&#39;","&#96;","REG_ESCAPED_HTML","REG_UNESCAPED_HTML","REG_HAS_ESCAPED_HTML","RegExp","source","REG_HAS_UNESCAPED_HTML","REG_IE","DOCUMENT_POSITION_CONTAINED_BY","focusOffset","anchorOffset","Math","min","max","position","DOCUMENT_POSITION_PRECEDING","runContext","animationCallback","apply","unescape","navigator","userAgent","isIE","onready","setTimeout","callbacks","readyState","attachEvent","HTMLImports","addEventListener","callContext","global","now","root","window","vendors","suffix","caf","last","queue","frameDuration","_now","next","cp","cancelled","e","round","handle","fn","cancel","polyfill","requestAnimationFrame","cancelAnimationFrame","process","getNanoSeconds","hrtime","loadTime","performance","hr","Date","getTime","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","timeout","run","Item","array","noop","nextTick","args","title","browser","env","argv","version","versions","addListener","once","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask","clear","basis","restoreBasis","fakeText","hasChildNodes","lastNode","isEqualNode","set","uniq","headList","lastList","startRangeSelect","setSelected","all","PATH_NOT_SELECTED","PATH_SELECTED","has","head","removeAttribute","toggleUniq","isSelected","removeSelected","KEY","a","Backspace","Bottom","Cmd","Comma","Delete","Enter","Esc","Left","Right","Semicolon","Space","Tab","Top","x","CLS","DRAGSTART","DROPZONE","DRAGEND","DRAGENTER","DRAGLEAVE","DROP","READY","CLICK_TIME","LOCAL_EVENTS","LOCK_COPY","OPTIONS","_defineProperty","obj","enumerable","writable","scrollX","html","documentElement","scrollLeft","clientLeft","scrollY","scrollTop","clientTop","element","params","dispatchEvent","Custom","dispatchLocalEvent","event","type","sharedData","immediatePropagationStopped","oneCallback","eventName","_callback","removeEventListener","toggleEvent","userCallback","isSet","isLocal","isOne","action","EV_ACTIONS","CustomEventCommon","keyCode","charCode","metaKey","ctrlKey","pageX","clientX","pageY","clientY","one","oneLocal","cancelBubble","returnValue","stopImmediatePropagation","stopPropagation","preventDefault","currentTarget","CustomEvent","addLocalEventListener","removeLocalEventListener","splice","doc","protoEvent","Event","issetCustomEvent","createEvent","evt","initCustomEvent","initEvent","native","mouse","onDragstart","currentDragSet","dataTransfer","effectAllowed","setData","setDragImage","getDragImage","DRAG_IMG","w","h","onDrop","onDropSuccess","onDragover","dropEffect","onDragenter","onDragleave","onDragend","_require2","EVENTS","dragend","dragenter","dragleave","dragover","dragstart","drop","dragImage","Image","src","fromNodeSet","toNodeSet","onMousedown","__drag__","nodeOffsetX","offsetX","nodeOffsetY","offsetY","onMousemove","onMouseup","onScroll","y","currentMoveSet","currentDragElement","dragSet","_","moveElement","cloneNode","style","cssText","Modernizr","csstransforms3d","transform","csstransforms","top","left","isDblclick","clickTime","code","shiftKey","onBackspace","onDelete","onArrowLeft","onArrowRight","isTextSelectAll","fromCharCode","isPrintableChar","onPasteSuccess","checkBubblePaste","isBubbling","onReplaceSuccess","clipboardData","getData","contentType","kind","some","getAsString","onTop","onBottom","begin","removeFromRight","firstBubble","secondBubble","copyBubbles","bubbleCopy","editBubbleKeyboardEvent","reinitOptions","optionName","attrName","prepareOptions","_OPTIONS$name","_slicedToArray","def","OPTIONS_PREPARE","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","Symbol","iterator","done","err","TypeError","_typeof","constructor","REG_STRREG","innerHTML","join","disableControls","func","Function","bool","match"],"mappings":"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","file":"x-bubbles-compact.min.js","sourcesContent":["var XBubbles =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar editor = __webpack_require__(2);\n\tvar utils = __webpack_require__(6);\n\tvar options = __webpack_require__(36);\n\t\n\tvar XBubbles = Object.create(HTMLDivElement.prototype, {\n\t    createdCallback: {\n\t        value: function value() {\n\t            initEditor(this);\n\t        }\n\t    },\n\t\n\t    attachedCallback: {\n\t        value: function value() {\n\t            initEditor(this);\n\t            this.editor.bubbling();\n\t        }\n\t    },\n\t\n\t    detachedCallback: {\n\t        value: function value() {\n\t            destroyEditor(this);\n\t        }\n\t    },\n\t\n\t    attributeChangedCallback: {\n\t        value: function value() /* name, prevValue, value */{\n\t            options(this);\n\t        }\n\t    },\n\t\n\t    options: {\n\t        value: function value(name, _value) {\n\t            return options(this, name, _value);\n\t        }\n\t    },\n\t\n\t    items: {\n\t        get: function get() {\n\t            return this.editor.getItems();\n\t        }\n\t    },\n\t\n\t    inputValue: {\n\t        get: function get() {\n\t            return this.editor.inputValue();\n\t        }\n\t    },\n\t\n\t    setContent: {\n\t        value: function value(data) {\n\t            return this.editor.setContent(data);\n\t        }\n\t    },\n\t\n\t    addBubble: {\n\t        value: function value(bubbleText, data) {\n\t            return this.editor.addBubble(bubbleText, data);\n\t        }\n\t    },\n\t\n\t    removeBubble: {\n\t        value: function value(nodeBubble) {\n\t            return this.editor.removeBubble(nodeBubble);\n\t        }\n\t    },\n\t\n\t    editBubble: {\n\t        value: function value(nodeBubble) {\n\t            return this.editor.editBubble(nodeBubble);\n\t        }\n\t    },\n\t\n\t    bubbling: {\n\t        value: function value() {\n\t            return this.editor.bubbling();\n\t        }\n\t    },\n\t\n\t    ready: {\n\t        value: function value(callback) {\n\t            utils.ready(callback, this);\n\t        }\n\t    }\n\t});\n\t\n\tmodule.exports = context.document.registerElement('x-bubbles', {\n\t    extends: 'div',\n\t    prototype: XBubbles\n\t});\n\t\n\tfunction initEditor(node) {\n\t    if (!node.editor) {\n\t        Object.defineProperty(node, 'editor', {\n\t            configurable: true,\n\t            value: editor.init(node)\n\t        });\n\t    }\n\t}\n\t\n\tfunction destroyEditor(node) {\n\t    if (node.editor) {\n\t        editor.destroy(node);\n\t        delete node.editor;\n\t    }\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function () {\n\t    /* eslint no-eval: 0 */\n\t    return this || (1, eval)('this');\n\t}();\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar bubbleset = __webpack_require__(3);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    EV = _require.EV,\n\t    PROPS = _require.PROPS;\n\t\n\tvar text = __webpack_require__(5);\n\tvar events = __webpack_require__(13);\n\tvar utils = __webpack_require__(6);\n\tvar drag = __webpack_require__(15);\n\tvar select = __webpack_require__(11);\n\t\n\tvar COMMON_EVENTS = {\n\t    blur: __webpack_require__(21),\n\t    click: __webpack_require__(22),\n\t    focus: __webpack_require__(23),\n\t    keydown: __webpack_require__(24)\n\t};\n\t\n\tvar EDITOR_EVENTS = {\n\t    blur: __webpack_require__(25),\n\t    click: __webpack_require__(26),\n\t    focus: __webpack_require__(27),\n\t    keydown: __webpack_require__(28),\n\t    keypress: __webpack_require__(29),\n\t    keyup: __webpack_require__(30),\n\t    paste: __webpack_require__(31)\n\t};\n\t\n\tvar SELECT_EVENTS = {\n\t    blur: __webpack_require__(32),\n\t    click: __webpack_require__(33),\n\t    keydown: __webpack_require__(34),\n\t    keypress: __webpack_require__(35)\n\t};\n\t\n\tvar PROXY_EVENTS = {\n\t    blur: events.proxyLocal,\n\t    click: events.proxyLocal,\n\t    focus: events.proxyLocal,\n\t    keydown: events.proxyLocal,\n\t    keypress: events.proxyLocal,\n\t    keyup: events.proxyLocal,\n\t    mscontrolselect: events.prevent,\n\t    paste: events.proxyLocal,\n\t    resize: events.prevent,\n\t    resizestart: events.prevent\n\t};\n\t\n\texports.init = function (nodeWrap) {\n\t    var nodeEditor = nodeWrap;\n\t    nodeEditor.setAttribute('contenteditable', 'true');\n\t    nodeEditor.setAttribute('spellcheck', 'false');\n\t\n\t    events.onLocal(nodeEditor, COMMON_EVENTS);\n\t    events.onLocal(nodeEditor, EDITOR_EVENTS);\n\t\n\t    if (nodeEditor.options('selection')) {\n\t        events.onLocal(nodeEditor, SELECT_EVENTS);\n\t        drag.init(nodeEditor);\n\t    }\n\t\n\t    events.on(nodeEditor, PROXY_EVENTS);\n\t\n\t    nodeEditor.fireChange = utils.throttle(fireChange, nodeEditor);\n\t    nodeEditor.fireEdit = utils.throttle(fireEdit, nodeEditor);\n\t    nodeEditor.fireInput = utils.throttle(fireInput, nodeEditor);\n\t    nodeEditor.fireBeforeRemove = fireBeforeRemove.bind(nodeEditor);\n\t\n\t    return {\n\t        addBubble: addBubble.bind(nodeEditor),\n\t        bubbling: bubbling.bind(nodeEditor),\n\t        editBubble: editBubble.bind(nodeEditor),\n\t        getItems: getItems.bind(nodeEditor),\n\t        inputValue: inputValue.bind(nodeEditor),\n\t        removeBubble: removeBubble.bind(nodeEditor),\n\t        setContent: setContent.bind(nodeEditor)\n\t    };\n\t};\n\t\n\texports.destroy = function (nodeWrap) {\n\t    var nodeEditor = nodeWrap;\n\t    events.off(nodeEditor, PROXY_EVENTS);\n\t    events.offLocal(nodeEditor, COMMON_EVENTS);\n\t    events.offLocal(nodeEditor, EDITOR_EVENTS);\n\t\n\t    if (nodeEditor.options('selection')) {\n\t        events.offLocal(nodeEditor, SELECT_EVENTS);\n\t        drag.destroy(nodeEditor);\n\t    }\n\t};\n\t\n\tfunction getItems() {\n\t    return bubbleset.getBubbles(this);\n\t}\n\t\n\tfunction setContent(data) {\n\t    var selection = context.getSelection();\n\t    selection && selection.removeAllRanges();\n\t\n\t    var list = select.get(this);\n\t    if (list.length) {\n\t        bubbleset.removeBubbles(this, list);\n\t        this.fireChange();\n\t    }\n\t\n\t    while (this.firstChild) {\n\t        this.removeChild(this.firstChild);\n\t    }\n\t\n\t    data = text.html2text(data);\n\t    this.appendChild(this.ownerDocument.createTextNode(data));\n\t    bubble.bubbling(this);\n\t    cursor.restore(this);\n\t}\n\t\n\tfunction addBubble(bubbleText, dataAttributes) {\n\t    var nodeBubble = bubble.create(this, bubbleText, dataAttributes);\n\t    if (!nodeBubble) {\n\t        return false;\n\t    }\n\t\n\t    if (text.text2bubble(this, nodeBubble)) {\n\t        this.fireInput();\n\t        this.fireChange();\n\t        cursor.restore(this);\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction removeBubble(nodeBubble) {\n\t    if (this.contains(nodeBubble)) {\n\t        bubbleset.removeBubbles(this, [nodeBubble]);\n\t        this.fireChange();\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction editBubble(nodeBubble) {\n\t    if (this.contains(nodeBubble)) {\n\t        return bubble.edit(this, nodeBubble);\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction inputValue() {\n\t    var textRange = text.currentTextRange(this);\n\t    return textRange && text.textClean(textRange.toString()) || '';\n\t}\n\t\n\tfunction bubbling() {\n\t    bubble.bubbling(this);\n\t}\n\t\n\t/**\n\t * Генерация события редактирования бабла.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireEdit\n\t * @param {HTMLElement} nodeBubble нода бабл\n\t * @this HTMLElement\n\t * @private\n\t */\n\tfunction fireEdit(nodeBubble) {\n\t    events.dispatch(this, EV.BUBBLE_EDIT, {\n\t        bubbles: false,\n\t        cancelable: false,\n\t        detail: { data: nodeBubble }\n\t    });\n\t}\n\t\n\t/**\n\t * Генерация события изменения набора баблов.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireChange\n\t * @this HTMLElement\n\t * @private\n\t */\n\tfunction fireChange() {\n\t    events.dispatch(this, EV.CHANGE, {\n\t        bubbles: false,\n\t        cancelable: false\n\t    });\n\t}\n\t\n\t/**\n\t * Генерация события ввода текста.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireInput\n\t * @this HTMLElement\n\t * @private\n\t */\n\tfunction fireInput() {\n\t    var editText = inputValue.call(this);\n\t\n\t    if (this[PROPS.BUBBLE_VALUE] !== editText) {\n\t        this[PROPS.BUBBLE_VALUE] = editText;\n\t\n\t        events.dispatch(this, EV.BUBBLE_INPUT, {\n\t            bubbles: false,\n\t            cancelable: false,\n\t            detail: { data: editText }\n\t        });\n\t    }\n\t}\n\t\n\t/**\n\t * Генерация события удаления баблов перед выполнением удаления из DOM.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireRemove\n\t * @param {array} list список удаляемых узлов\n\t * @this HTMLElement\n\t * @private\n\t */\n\tfunction fireBeforeRemove(list) {\n\t    events.dispatch(this, EV.BEFORE_REMOVE, {\n\t        bubbles: false,\n\t        cancelable: false,\n\t        detail: { data: list }\n\t    });\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubble = __webpack_require__(4);\n\tvar text = __webpack_require__(5);\n\t\n\texports.closestNodeBubble = closestNodeBubble;\n\texports.closestNodeSet = closestNodeSet;\n\texports.findBubbleLeft = findBubbleLeft;\n\texports.findBubbleRight = findBubbleRight;\n\texports.getBubbles = getBubbles;\n\texports.hasBubbles = hasBubbles;\n\texports.headBubble = headBubble;\n\texports.lastBubble = lastBubble;\n\texports.nextBubble = nextBubble;\n\texports.prevBubble = prevBubble;\n\texports.removeBubbles = removeBubbles;\n\texports.moveBubbles = moveBubbles;\n\t\n\tfunction lastBubble(nodeSet) {\n\t    return nodeSet.querySelector('[bubble]:last-child');\n\t}\n\t\n\tfunction headBubble(nodeSet) {\n\t    return nodeSet.querySelector('[bubble]:first-child');\n\t}\n\t\n\tfunction getBubbles(nodeSet) {\n\t    return Array.prototype.slice.call(nodeSet.querySelectorAll('[bubble]'));\n\t}\n\t\n\tfunction hasBubbles(nodeSet) {\n\t    return Boolean(nodeSet.querySelector('[bubble]'));\n\t}\n\t\n\tfunction findBubbleLeft(selection) {\n\t    if (!selection.focusNode || !selection.anchorNode) {\n\t        return;\n\t    }\n\t\n\t    var node = selection.focusNode.previousSibling;\n\t\n\t    if (selection.anchorNode !== selection.focusNode && selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n\t        node = selection.anchorNode.previousSibling;\n\t    }\n\t\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n\t            return;\n\t        }\n\t\n\t        node = node.previousSibling;\n\t    }\n\t}\n\t\n\tfunction findBubbleRight(selection) {\n\t    if (!selection.focusNode || !selection.anchorNode) {\n\t        return;\n\t    }\n\t\n\t    var node = selection.focusNode.nextSibling;\n\t\n\t    if (selection.anchorNode !== selection.focusNode && selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n\t        node = selection.anchorNode.nextSibling;\n\t    }\n\t\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n\t            return;\n\t        }\n\t\n\t        node = node.nextSibling;\n\t    }\n\t}\n\t\n\tfunction closestNodeSet(node) {\n\t    while (node) {\n\t        if (isEditorNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        node = node.parentNode;\n\t    }\n\t}\n\t\n\tfunction closestNodeBubble(node) {\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        if (isEditorNode(node)) {\n\t            return;\n\t        }\n\t\n\t        node = node.parentNode;\n\t    }\n\t}\n\t\n\tfunction prevBubble(target) {\n\t    var node = target && target.previousSibling;\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        node = node.previousSibling;\n\t    }\n\t}\n\t\n\tfunction nextBubble(target) {\n\t    var node = target && target.nextSibling;\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        node = node.nextSibling;\n\t    }\n\t}\n\t\n\tfunction isEditorNode(node) {\n\t    return node.nodeType === Node.ELEMENT_NODE && node.getAttribute('is') === 'x-bubbles';\n\t}\n\t\n\tfunction removeBubbles(nodeEditor, list) {\n\t    nodeEditor.fireBeforeRemove(list);\n\t    list.forEach(function (item) {\n\t        return nodeEditor.removeChild(item);\n\t    });\n\t}\n\t\n\tfunction moveBubbles(nodeEditorFrom, nodeEditorTo, list) {\n\t    nodeEditorFrom.fireBeforeRemove(list);\n\t    list.forEach(function (item) {\n\t        return nodeEditorTo.appendChild(item);\n\t    });\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar text = __webpack_require__(5);\n\t\n\tvar _require = __webpack_require__(6),\n\t    escape = _require.escape,\n\t    canUseDrag = _require.canUseDrag;\n\t\n\texports.isBubbleNode = isBubbleNode;\n\texports.bubbling = bubbling;\n\texports.create = create;\n\texports.edit = edit;\n\t\n\tfunction isBubbleNode(node) {\n\t    if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n\t        return false;\n\t    }\n\t\n\t    return node.hasAttribute('bubble');\n\t}\n\t\n\tfunction edit(nodeSet, nodeBubble) {\n\t    if (nodeBubble.hasAttribute('readonly')) {\n\t        return false;\n\t    }\n\t\n\t    var selection = context.getSelection();\n\t\n\t    if (!selection) {\n\t        return false;\n\t    }\n\t\n\t    var bubbleDeformation = nodeSet.options('bubbleDeformation');\n\t    var rangeParams = bubbleDeformation(nodeBubble);\n\t\n\t    if (!rangeParams) {\n\t        var dataText = text.textClean(nodeBubble.innerText);\n\t\n\t        rangeParams = {\n\t            text: dataText,\n\t            startOffset: 0,\n\t            endOffset: dataText.length\n\t        };\n\t    }\n\t\n\t    var textFake = text.createZws();\n\t    var textNode = context.document.createTextNode(rangeParams.text);\n\t\n\t    nodeSet.fireEdit(nodeBubble);\n\t    nodeSet.replaceChild(textNode, nodeBubble);\n\t    nodeSet.insertBefore(textFake, textNode);\n\t\n\t    var range = context.document.createRange();\n\t    range.setStart(textNode, rangeParams.startOffset);\n\t    range.setEnd(textNode, rangeParams.endOffset);\n\t\n\t    selection.removeAllRanges();\n\t    selection.addRange(range);\n\t    return true;\n\t}\n\t\n\t/**\n\t * У обертки нельзя делать tabindex=-1, иначе будет слетать фокус с поля ввода.\n\t * @param {HTMLElement} nodeEditor\n\t * @param {string} dataText\n\t * @param {Object} [dataAttributes={}]\n\t * @returns {?HTMLElement}\n\t */\n\tfunction create(nodeEditor, dataText) {\n\t    var dataAttributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    dataText = text.textClean(dataText);\n\t\n\t    if (!dataText) {\n\t        return;\n\t    }\n\t\n\t    var bubbleFormation = nodeEditor.options('bubbleFormation');\n\t    var classBubble = nodeEditor.options('classBubble');\n\t    var draggable = canUseDrag && nodeEditor.options('draggable') && nodeEditor.options('selection');\n\t    var wrap = nodeEditor.ownerDocument.createElement('span');\n\t\n\t    wrap.innerText = dataText;\n\t\n\t    for (var key in dataAttributes) {\n\t        if (dataAttributes[key]) {\n\t            wrap.setAttribute('data-' + key, escape(dataAttributes[key]));\n\t        }\n\t    }\n\t\n\t    bubbleFormation(wrap);\n\t\n\t    if (classBubble) {\n\t        var classes = String(classBubble).trim().split(/\\s+/);\n\t        var len = classes.length;\n\t\n\t        while (len--) {\n\t            wrap.classList.add(classes[len]);\n\t        }\n\t    }\n\t\n\t    wrap.setAttribute('bubble', '');\n\t    wrap.setAttribute('contenteditable', 'false');\n\t    draggable && wrap.setAttribute('draggable', 'true');\n\t\n\t    return wrap;\n\t}\n\t\n\tfunction bubbling(nodeSet) {\n\t    var begining = nodeSet.options('begining');\n\t    var ending = nodeSet.options('ending');\n\t    var separator = nodeSet.options('separator');\n\t    var tokenizer = nodeSet.options('tokenizer');\n\t    var ranges = getBubbleRanges(nodeSet);\n\t    var nodes = [];\n\t\n\t    ranges.forEach(function (range) {\n\t        var dataText = text.textClean(range.toString());\n\t\n\t        if (!dataText) {\n\t            range.deleteContents();\n\t            return;\n\t        }\n\t\n\t        var textParts = [dataText];\n\t\n\t        if (tokenizer) {\n\t            textParts = tokenizer(dataText);\n\t        } else {\n\t            if (separator) {\n\t                textParts = dataText.split(separator).map(trimIterator).filter(nonEmptyIterator);\n\t            }\n\t\n\t            if (ending) {\n\t                textParts = textParts.reduce(function (parts, str) {\n\t                    return parts.concat(parseFragmentByEnding(str, ending));\n\t                }, []).map(trimIterator).filter(nonEmptyIterator);\n\t            } else if (begining) {\n\t                textParts = textParts.reduce(function (parts, str) {\n\t                    return parts.concat(parseFragmentByBeginning(str, begining));\n\t                }, []).map(trimIterator).filter(nonEmptyIterator);\n\t            }\n\t        }\n\t\n\t        if (!Array.isArray(textParts) || !textParts.length) {\n\t            range.deleteContents();\n\t            return;\n\t        }\n\t\n\t        var fragment = context.document.createDocumentFragment();\n\t\n\t        textParts.forEach(function (textPart) {\n\t            var nodeBubble = create(nodeSet, textPart);\n\t            if (nodeBubble) {\n\t                fragment.appendChild(nodeBubble);\n\t                nodes.push(nodeBubble);\n\t            }\n\t        });\n\t\n\t        range.deleteContents();\n\t        range.insertNode(fragment);\n\t    });\n\t\n\t    nodeSet.fireInput();\n\t\n\t    if (nodes.length) {\n\t        nodeSet.fireChange();\n\t    }\n\t\n\t    return nodes;\n\t}\n\t\n\tfunction getBubbleRanges(nodeSet) {\n\t    var ranges = [];\n\t    var children = nodeSet.childNodes;\n\t    var range = void 0;\n\t    var node = void 0;\n\t\n\t    for (var i = 0; i < children.length; i++) {\n\t        node = children[i];\n\t\n\t        if (isBubbleNode(node)) {\n\t            if (range) {\n\t                range.setEndBefore(node);\n\t                ranges.push(range);\n\t                range = undefined;\n\t            }\n\t        } else {\n\t            if (!range) {\n\t                range = context.document.createRange();\n\t                range.setStartBefore(node);\n\t            }\n\t        }\n\t    }\n\t\n\t    if (range) {\n\t        range.setEndAfter(node);\n\t        ranges.push(range);\n\t    }\n\t\n\t    return ranges;\n\t}\n\t\n\tfunction trimIterator(str) {\n\t    return str.trim();\n\t}\n\t\n\tfunction nonEmptyIterator(str) {\n\t    return Boolean(str);\n\t}\n\t\n\tfunction parseFragmentByEnding(str, reg) {\n\t    var parts = [];\n\t    var lastIndex = 0;\n\t    var loop = 999;\n\t\n\t    reg.lastIndex = 0;\n\t    while (reg.exec(str) !== null && loop) {\n\t        loop--;\n\t        parts.push(str.substring(lastIndex, reg.lastIndex));\n\t        lastIndex = reg.lastIndex;\n\t    }\n\t\n\t    return parts;\n\t}\n\t\n\tfunction parseFragmentByBeginning(str, reg) {\n\t    var parts = [];\n\t    var res = void 0;\n\t    var index = 0;\n\t    var loop = 999;\n\t\n\t    reg.lastIndex = 0;\n\t    while ((res = reg.exec(str)) !== null && loop) {\n\t        loop--;\n\t        if (index !== res.index) {\n\t            parts.push(str.substring(index, res.index));\n\t            index = res.index;\n\t        }\n\t    }\n\t\n\t    parts.push(str.substring(index, str.length));\n\t    return parts;\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(6),\n\t    getSelection = _require.getSelection,\n\t    correctSelection = _require.correctSelection;\n\t\n\t/* eslint-disable max-len */\n\t\n\t\n\tvar REG_REPLACE_NON_PRINTABLE = /[\\0-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u037F-\\u0383\\u038B\\u038D\\u03A2\\u0528-\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B-\\u058E\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08A1\\u08AD-\\u08E3\\u08FF\\u0978\\u0980\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0C00\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C34\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5A-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C80\\u0C81\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D01\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D4F-\\u0D56\\u0D58-\\u0D5F\\u0D64\\u0D65\\u0D76-\\u0D78\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F5-\\u13FF\\u169D-\\u169F\\u16F1-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191D-\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C80-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7-\\u1CFF\\u1DE7-\\u1DFB\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BB-\\u20CF\\u20F1-\\u20FF\\u218A-\\u218F\\u23F4-\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2700\\u2B4D-\\u2B4F\\u2B5A-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E3C-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FCD-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA698-\\uA69E\\uA6F8-\\uA6FF\\uA78F\\uA794-\\uA79F\\uA7AB-\\uA7F7\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C5-\\uA8CD\\uA8DA-\\uA8DF\\uA8FC-\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9E0-\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAA7C-\\uAA7F\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F-\\uABBF\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE27-\\uFE2F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF]/g;\n\tvar REG_ZWS = /\\u200B/;\n\tvar TEXT_ZWS = '\\u200B';\n\t\n\texports.isEmptyLeft = isEmptyLeft;\n\texports.isEmptyRight = isEmptyRight;\n\texports.arrowRight = arrowRight;\n\texports.arrowLeft = arrowLeft;\n\texports.remove = remove;\n\texports.html2text = html2text;\n\texports.currentTextRange = currentTextRange;\n\texports.text2bubble = text2bubble;\n\texports.replaceString = replaceString;\n\texports.selectAll = selectAll;\n\texports.textClean = textClean;\n\texports.checkZws = checkZws;\n\texports.createZws = createZws;\n\t\n\tfunction isEmptyLeft(selection) {\n\t    var _correctSelection = correctSelection(selection),\n\t        startNode = _correctSelection.startNode,\n\t        startOffset = _correctSelection.startOffset;\n\t\n\t    var isEmpty = true;\n\t    var node = startNode;\n\t\n\t    while (node) {\n\t        if (node.nodeType === Node.TEXT_NODE) {\n\t            var value = startOffset > 0 ? node.nodeValue.substring(0, startOffset) : node.nodeValue;\n\t\n\t            if (textClean(value)) {\n\t                isEmpty = false;\n\t                break;\n\t            }\n\t        } else {\n\t            break;\n\t        }\n\t\n\t        startOffset = 0;\n\t        node = node.previousSibling;\n\t    }\n\t\n\t    return isEmpty;\n\t}\n\t\n\tfunction isEmptyRight(selection) {\n\t    var _correctSelection2 = correctSelection(selection),\n\t        endNode = _correctSelection2.endNode,\n\t        endOffset = _correctSelection2.endOffset;\n\t\n\t    var node = endNode;\n\t\n\t    while (node) {\n\t        if (node.nodeType === Node.TEXT_NODE) {\n\t            var value = endOffset > -1 && endOffset < node.nodeValue.length ? node.nodeValue.substring(endOffset) : node.nodeValue;\n\t\n\t            if (textClean(value)) {\n\t                return false;\n\t            }\n\t        } else {\n\t            return false;\n\t        }\n\t\n\t        endOffset = -1;\n\t        node = node.nextSibling;\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction text2bubble(nodeEditor, nodeBubble) {\n\t    var selection = getSelection(nodeEditor);\n\t    var range = selection && currentTextRange(nodeEditor, selection);\n\t\n\t    if (range) {\n\t        selection.removeAllRanges();\n\t        selection.addRange(range);\n\t        replace(selection, nodeBubble);\n\t    } else {\n\t        nodeEditor.appendChild(nodeBubble);\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction currentTextRange(nodeEditor, selection) {\n\t    selection = selection || getSelection(nodeEditor);\n\t    if (!selection) {\n\t        return;\n\t    }\n\t\n\t    var pointNode = selection.focusNode && selection.focusNode.nodeType === Node.TEXT_NODE ? selection.focusNode : selection.anchorNode && selection.anchorNode.nodeType === Node.TEXT_NODE ? selection.anchorNode : undefined;\n\t\n\t    if (!pointNode) {\n\t        return;\n\t    }\n\t\n\t    var startNode = pointNode;\n\t    var endNode = pointNode;\n\t    var item = pointNode;\n\t\n\t    while (item && item.nodeType === Node.TEXT_NODE) {\n\t        startNode = item;\n\t        item = item.previousSibling;\n\t    }\n\t\n\t    item = pointNode;\n\t\n\t    while (item && item.nodeType === Node.TEXT_NODE) {\n\t        endNode = item;\n\t        item = item.nextSibling;\n\t    }\n\t\n\t    var range = nodeEditor.ownerDocument.createRange();\n\t    range.setStartBefore(startNode);\n\t    range.setEndAfter(endNode);\n\t\n\t    return range;\n\t}\n\t\n\tfunction remove(selection) {\n\t    return replace(selection, createZws());\n\t}\n\t\n\tfunction replace(selection, node) {\n\t    if (!selection || !selection.rangeCount) {\n\t        return false;\n\t    }\n\t\n\t    var anchor = context.document.createElement('span');\n\t    selection.getRangeAt(0).surroundContents(anchor);\n\t    anchor.parentNode.replaceChild(node, anchor);\n\t\n\t    selection.removeAllRanges();\n\t\n\t    if (node.nodeType === Node.TEXT_NODE) {\n\t        var range = context.document.createRange();\n\t        // для ИЕ обязательно указывать node.nodeValue.length\n\t        range.setStart(node, node.nodeValue.length);\n\t        range.collapse(false);\n\t        selection.addRange(range);\n\t    } else {\n\t        selection.collapse(node, 0);\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction replaceString(data, selection) {\n\t    data = textClean(data);\n\t    if (!data) {\n\t        return false;\n\t    }\n\t\n\t    selection = selection || context.getSelection();\n\t    var textNode = context.document.createTextNode(data);\n\t\n\t    if (!replace(selection, textNode)) {\n\t        return false;\n\t    }\n\t\n\t    selection.collapse(textNode, textNode.nodeValue.length);\n\t    return true;\n\t}\n\t\n\tfunction arrowLeft(selection, extend) {\n\t    selection = selection || context.getSelection();\n\t\n\t    if (!selection || !selection.anchorNode || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n\t\n\t        return false;\n\t    }\n\t\n\t    var _correctSelection3 = correctSelection(selection),\n\t        startNode = _correctSelection3.startNode,\n\t        endNode = _correctSelection3.endNode,\n\t        startOffset = _correctSelection3.startOffset,\n\t        endOffset = _correctSelection3.endOffset,\n\t        revert = _correctSelection3.revert;\n\t\n\t    if (!selection.isCollapsed && !extend) {\n\t        selection.collapse(startNode, startOffset);\n\t        return true;\n\t    }\n\t\n\t    var isNativeExtend = Boolean(selection.extend);\n\t    revert = isNativeExtend ? revert : !revert;\n\t    var node = revert ? startNode : endNode;\n\t    var offset = revert ? startOffset : endOffset;\n\t\n\t    while (node) {\n\t        if (node.nodeType !== Node.TEXT_NODE) {\n\t            return false;\n\t        }\n\t\n\t        if (offset === null) {\n\t            offset = node.nodeValue.length;\n\t        }\n\t\n\t        if (offset - 1 < 0) {\n\t            node = node.previousSibling;\n\t            offset = null;\n\t            continue;\n\t        }\n\t\n\t        var text = node.nodeValue.substring(offset - 1, offset);\n\t\n\t        if (checkZws(text)) {\n\t            offset = offset - 1;\n\t            continue;\n\t        }\n\t\n\t        break;\n\t    }\n\t\n\t    if (!node || offset === null) {\n\t        return false;\n\t    }\n\t\n\t    if (extend) {\n\t        if (isNativeExtend) {\n\t            selection.extend(node, offset - 1);\n\t        } else {\n\t            var range = context.document.createRange();\n\t\n\t            if (revert) {\n\t                range.setStart(node, offset - 1);\n\t                range.setEnd(endNode, endOffset);\n\t            } else {\n\t                range.setStart(startNode, startOffset);\n\t                range.setEnd(node, offset - 1);\n\t            }\n\t\n\t            selection.removeAllRanges();\n\t            selection.addRange(range);\n\t        }\n\t    } else {\n\t        selection.collapse(node, offset - 1);\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction arrowRight(selection, extend) {\n\t    selection = selection || context.getSelection();\n\t\n\t    if (!selection || !selection.focusNode || selection.focusNode.nodeType !== Node.TEXT_NODE) {\n\t\n\t        return false;\n\t    }\n\t\n\t    var _correctSelection4 = correctSelection(selection),\n\t        startNode = _correctSelection4.startNode,\n\t        endNode = _correctSelection4.endNode,\n\t        startOffset = _correctSelection4.startOffset,\n\t        endOffset = _correctSelection4.endOffset,\n\t        revert = _correctSelection4.revert;\n\t\n\t    if (!selection.isCollapsed && !extend) {\n\t        selection.collapse(endNode, endOffset);\n\t        return true;\n\t    }\n\t\n\t    var node = revert ? startNode : endNode;\n\t    var offset = revert ? startOffset : endOffset;\n\t\n\t    while (node) {\n\t        if (node.nodeType !== Node.TEXT_NODE) {\n\t            return false;\n\t        }\n\t\n\t        var len = node.nodeValue.length;\n\t\n\t        if (offset + 1 > len) {\n\t            node = node.nextSibling;\n\t            offset = 0;\n\t            continue;\n\t        }\n\t\n\t        var text = node.nodeValue.substring(offset, offset + 1);\n\t\n\t        if (checkZws(text)) {\n\t            offset = offset + 1;\n\t            continue;\n\t        }\n\t\n\t        break;\n\t    }\n\t\n\t    if (!node) {\n\t        return false;\n\t    }\n\t\n\t    if (extend) {\n\t        var isNativeExtend = Boolean(selection.extend);\n\t\n\t        if (isNativeExtend) {\n\t            selection.extend(node, offset + 1);\n\t        } else {\n\t            var range = context.document.createRange();\n\t\n\t            if (revert) {\n\t                range.setStart(node, offset + 1);\n\t                range.setEnd(endNode, endOffset);\n\t            } else {\n\t                range.setStart(startNode, startOffset);\n\t                range.setEnd(node, offset + 1);\n\t            }\n\t\n\t            selection.removeAllRanges();\n\t            selection.addRange(range);\n\t        }\n\t    } else {\n\t        selection.collapse(node, offset + 1);\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction html2text(value) {\n\t    if (!value) {\n\t        return '';\n\t    }\n\t\n\t    var DOMContainer = context.document.implementation.createHTMLDocument('').body;\n\t    DOMContainer.innerText = value;\n\t\n\t    return DOMContainer.innerText.replace(/^[\\u0020\\u00a0]+$/gm, '').replace(/\\n/gm, ' ').trim();\n\t}\n\t\n\tfunction selectAll(selection, nodeSet) {\n\t    selection = selection || context.getSelection();\n\t    var node = selection && selection.anchorNode;\n\t\n\t    if (!node || node.nodeType !== Node.TEXT_NODE) {\n\t        return false;\n\t    }\n\t\n\t    var fromNode = void 0;\n\t    var toNode = void 0;\n\t    var item = node;\n\t\n\t    while (item && item.nodeType === Node.TEXT_NODE) {\n\t        fromNode = item;\n\t        item = item.previousSibling;\n\t    }\n\t\n\t    item = node;\n\t\n\t    while (item && item.nodeType === Node.TEXT_NODE) {\n\t        toNode = item;\n\t        item = item.nextSibling;\n\t    }\n\t\n\t    var hasBubbles = bubbleset.hasBubbles(nodeSet);\n\t    var range = context.document.createRange();\n\t    range.setStartBefore(fromNode);\n\t    range.setEndAfter(toNode);\n\t\n\t    var dataText = textClean(range.toString());\n\t\n\t    if (dataText || !dataText && !hasBubbles) {\n\t        if (!dataText) {\n\t            range.collapse();\n\t        }\n\t\n\t        selection.removeAllRanges();\n\t        selection.addRange(range);\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction createZws() {\n\t    return context.document.createTextNode(TEXT_ZWS);\n\t}\n\t\n\tfunction checkZws(value) {\n\t    return REG_ZWS.test(value);\n\t}\n\t\n\tfunction textClean(value) {\n\t    return String(value || '').trim().replace(REG_REPLACE_NON_PRINTABLE, '');\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar raf = __webpack_require__(7);\n\tvar context = __webpack_require__(1);\n\t\n\t/* eslint quotes: 0 */\n\t\n\tvar HTML_ESCAPES = {\n\t    '&': '&amp;',\n\t    '<': '&lt;',\n\t    '>': '&gt;',\n\t    '\"': '&quot;',\n\t    \"'\": '&#39;',\n\t    '`': '&#96;'\n\t};\n\t\n\tvar HTML_UNESCAPES = {\n\t    '&amp;': '&',\n\t    '&lt;': '<',\n\t    '&gt;': '>',\n\t    '&quot;': '\"',\n\t    '&#39;': \"'\",\n\t    '&#96;': '`'\n\t};\n\t\n\tvar REG_ESCAPED_HTML = /&(?:amp|lt|gt|quot|#39|#96);/g;\n\tvar REG_UNESCAPED_HTML = /[&<>\"'`]/g;\n\tvar REG_HAS_ESCAPED_HTML = RegExp(REG_ESCAPED_HTML.source);\n\tvar REG_HAS_UNESCAPED_HTML = RegExp(REG_UNESCAPED_HTML.source);\n\tvar REG_IE = /Trident|Edge/;\n\t\n\texports.getSelection = function (nodeEditor) {\n\t    var selection = context.getSelection();\n\t\n\t    if (selection && selection.anchorNode && nodeEditor.compareDocumentPosition(selection.anchorNode) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n\t        return selection;\n\t    }\n\t};\n\t\n\texports.correctSelection = function (selection) {\n\t    var endNode = selection.focusNode;\n\t    var endOffset = selection.focusOffset;\n\t    var startNode = selection.anchorNode;\n\t    var startOffset = selection.anchorOffset;\n\t    var revert = false;\n\t\n\t    if (startNode === endNode) {\n\t        startOffset = Math.min(selection.anchorOffset, selection.focusOffset);\n\t        endOffset = Math.max(selection.anchorOffset, selection.focusOffset);\n\t        revert = selection.anchorOffset > selection.focusOffset;\n\t    } else {\n\t        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n\t        if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n\t            startNode = selection.focusNode;\n\t            startOffset = selection.focusOffset;\n\t            endNode = selection.anchorNode;\n\t            endOffset = selection.anchorOffset;\n\t            revert = true;\n\t        }\n\t    }\n\t\n\t    return { startNode: startNode, endNode: endNode, startOffset: startOffset, endOffset: endOffset, revert: revert };\n\t};\n\t\n\texports.throttle = function (callback, runContext) {\n\t    var throttle = 0;\n\t    var animationCallback = function animationCallback() {\n\t        throttle = 0;\n\t    };\n\t\n\t    return function () {\n\t        if (throttle) {\n\t            return;\n\t        }\n\t\n\t        throttle = raf(animationCallback);\n\t\n\t        callback.apply(runContext || this, arguments);\n\t    };\n\t};\n\t\n\texports.escape = function (data) {\n\t    data = String(data);\n\t\n\t    if (data && REG_HAS_UNESCAPED_HTML.test(data)) {\n\t        return data.replace(REG_UNESCAPED_HTML, escapeHtmlChar);\n\t    }\n\t\n\t    return data;\n\t};\n\t\n\texports.unescape = function (data) {\n\t    data = String(data);\n\t\n\t    if (data && REG_HAS_ESCAPED_HTML.test(data)) {\n\t        return data.replace(REG_ESCAPED_HTML, unescapeHtmlChar);\n\t    }\n\t\n\t    return data;\n\t};\n\t\n\texports.canUseDrag = function () {\n\t    return !REG_IE.test(context.navigator.userAgent);\n\t}();\n\t\n\texports.isIE = function () {\n\t    return REG_IE.test(context.navigator.userAgent);\n\t}();\n\t\n\texports.ready = function () {\n\t    var callbacks = [];\n\t    var ready = false;\n\t\n\t    function onready() {\n\t        raf(function () {\n\t            context.setTimeout(function () {\n\t                ready = true;\n\t                callbacks.forEach(function (item) {\n\t                    return item[0].call(item[1]);\n\t                });\n\t                callbacks = [];\n\t            });\n\t        });\n\t    }\n\t\n\t    if (context.document.readyState === 'complete') {\n\t        onready();\n\t    } else if (context.document.readyState === 'interactive' && !context.attachEvent && (!context.HTMLImports || context.HTMLImports.ready)) {\n\t        onready();\n\t    } else {\n\t        context.addEventListener(context.HTMLImports && !context.HTMLImports.ready ? 'HTMLImportsLoaded' : 'DOMContentLoaded', onready);\n\t    }\n\t\n\t    return function (callback, callContext) {\n\t        if (ready) {\n\t            callback.call(callContext);\n\t        } else {\n\t            callbacks.push([callback, callContext]);\n\t        }\n\t    };\n\t}();\n\t\n\tfunction unescapeHtmlChar(chr) {\n\t    return HTML_UNESCAPES[chr];\n\t}\n\t\n\tfunction escapeHtmlChar(chr) {\n\t    return HTML_ESCAPES[chr];\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {var now = __webpack_require__(8)\n\t  , root = typeof window === 'undefined' ? global : window\n\t  , vendors = ['moz', 'webkit']\n\t  , suffix = 'AnimationFrame'\n\t  , raf = root['request' + suffix]\n\t  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\t\n\tfor(var i = 0; !raf && i < vendors.length; i++) {\n\t  raf = root[vendors[i] + 'Request' + suffix]\n\t  caf = root[vendors[i] + 'Cancel' + suffix]\n\t      || root[vendors[i] + 'CancelRequest' + suffix]\n\t}\n\t\n\t// Some versions of FF have rAF but not cAF\n\tif(!raf || !caf) {\n\t  var last = 0\n\t    , id = 0\n\t    , queue = []\n\t    , frameDuration = 1000 / 60\n\t\n\t  raf = function(callback) {\n\t    if(queue.length === 0) {\n\t      var _now = now()\n\t        , next = Math.max(0, frameDuration - (_now - last))\n\t      last = next + _now\n\t      setTimeout(function() {\n\t        var cp = queue.slice(0)\n\t        // Clear queue here to prevent\n\t        // callbacks from appending listeners\n\t        // to the current frame's queue\n\t        queue.length = 0\n\t        for(var i = 0; i < cp.length; i++) {\n\t          if(!cp[i].cancelled) {\n\t            try{\n\t              cp[i].callback(last)\n\t            } catch(e) {\n\t              setTimeout(function() { throw e }, 0)\n\t            }\n\t          }\n\t        }\n\t      }, Math.round(next))\n\t    }\n\t    queue.push({\n\t      handle: ++id,\n\t      callback: callback,\n\t      cancelled: false\n\t    })\n\t    return id\n\t  }\n\t\n\t  caf = function(handle) {\n\t    for(var i = 0; i < queue.length; i++) {\n\t      if(queue[i].handle === handle) {\n\t        queue[i].cancelled = true\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\tmodule.exports = function(fn) {\n\t  // Wrap in a new function to prevent\n\t  // `cancel` potentially being assigned\n\t  // to the native rAF function\n\t  return raf.call(root, fn)\n\t}\n\tmodule.exports.cancel = function() {\n\t  caf.apply(root, arguments)\n\t}\n\tmodule.exports.polyfill = function() {\n\t  root.requestAnimationFrame = raf\n\t  root.cancelAnimationFrame = caf\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {// Generated by CoffeeScript 1.7.1\n\t(function() {\n\t  var getNanoSeconds, hrtime, loadTime;\n\t\n\t  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n\t    module.exports = function() {\n\t      return performance.now();\n\t    };\n\t  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n\t    module.exports = function() {\n\t      return (getNanoSeconds() - loadTime) / 1e6;\n\t    };\n\t    hrtime = process.hrtime;\n\t    getNanoSeconds = function() {\n\t      var hr;\n\t      hr = hrtime();\n\t      return hr[0] * 1e9 + hr[1];\n\t    };\n\t    loadTime = getNanoSeconds();\n\t  } else if (Date.now) {\n\t    module.exports = function() {\n\t      return Date.now() - loadTime;\n\t    };\n\t    loadTime = Date.now();\n\t  } else {\n\t    module.exports = function() {\n\t      return new Date().getTime() - loadTime;\n\t    };\n\t    loadTime = new Date().getTime();\n\t  }\n\t\n\t}).call(this);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * @module x-bubbles/cursor\n\t */\n\t\n\tvar context = __webpack_require__(1);\n\tvar text = __webpack_require__(5);\n\tvar select = __webpack_require__(11);\n\t\n\texports.restore = restore;\n\texports.restoreBasis = restoreBasis;\n\t\n\t/**\n\t * Reset the cursor position to the end of the input field.\n\t * @alias module:x-bubbles/cursor.restore\n\t * @param {HTMLElement} nodeSet\n\t */\n\tfunction restore(nodeSet) {\n\t    select.clear(nodeSet);\n\t    var basis = restoreBasis(nodeSet);\n\t    var selection = context.getSelection();\n\t    selection.removeAllRanges();\n\t    selection.collapse(basis, 1);\n\t}\n\t\n\t/**\n\t * The creation of the fake text at the end childNodes\n\t * @alias module:x-bubbles/cursor.restoreBasis\n\t * @param {HTMLElement} nodeSet\n\t * @returns {HTMLTextElement} fake text node\n\t */\n\tfunction restoreBasis(nodeSet) {\n\t    var fakeText = text.createZws();\n\t\n\t    if (nodeSet.hasChildNodes()) {\n\t        var lastNode = nodeSet.childNodes[nodeSet.childNodes.length - 1];\n\t\n\t        if (lastNode.isEqualNode(fakeText)) {\n\t            fakeText = lastNode;\n\t        } else {\n\t            nodeSet.appendChild(fakeText);\n\t        }\n\t    } else {\n\t        nodeSet.appendChild(fakeText);\n\t    }\n\t\n\t    return fakeText;\n\t}\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar bubble = __webpack_require__(4);\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar slice = Array.prototype.slice;\n\tvar PATH_SELECTED = '[bubble][selected]';\n\tvar PATH_NOT_SELECTED = '[bubble]:not([selected])';\n\t\n\texports.all = all;\n\texports.add = add;\n\texports.clear = clear;\n\texports.get = get;\n\texports.uniq = uniq;\n\texports.head = head;\n\texports.last = last;\n\texports.has = has;\n\texports.range = range;\n\texports.toggleUniq = toggleUniq;\n\t\n\tfunction range(node) {\n\t    if (!bubble.isBubbleNode(node)) {\n\t        return;\n\t    }\n\t\n\t    var set = node.parentNode;\n\t    var list = get(set);\n\t\n\t    if (!list.length) {\n\t        uniq(node);\n\t        return;\n\t    }\n\t\n\t    clear(set);\n\t\n\t    var headList = list[0];\n\t    var lastList = list[list.length - 1];\n\t\n\t    if (headList === lastList || !set.startRangeSelect) {\n\t        set.startRangeSelect = headList;\n\t    }\n\t\n\t    var fromNode = void 0;\n\t    var toNode = void 0;\n\t    var position = node.compareDocumentPosition(set.startRangeSelect);\n\t\n\t    if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n\t        fromNode = set.startRangeSelect;\n\t        toNode = node;\n\t    } else {\n\t        fromNode = node;\n\t        toNode = set.startRangeSelect;\n\t    }\n\t\n\t    if (fromNode && toNode) {\n\t        var item = fromNode;\n\t\n\t        while (item) {\n\t            if (!setSelected(item)) {\n\t                break;\n\t            }\n\t\n\t            if (item === toNode) {\n\t                break;\n\t            }\n\t\n\t            item = item.nextSibling;\n\t        }\n\t\n\t        bubble.bubbling(set);\n\t    }\n\t}\n\t\n\tfunction all(nodeSet) {\n\t    slice.call(nodeSet.querySelectorAll(PATH_NOT_SELECTED)).forEach(function (item) {\n\t        return setSelected(item);\n\t    });\n\t    nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\t\n\t    bubble.bubbling(nodeSet);\n\t\n\t    var selection = context.getSelection();\n\t    selection && selection.removeAllRanges();\n\t}\n\t\n\tfunction has(nodeSet) {\n\t    return Boolean(nodeSet.querySelector(PATH_SELECTED));\n\t}\n\t\n\tfunction head(set) {\n\t    return get(set)[0];\n\t}\n\t\n\tfunction last(set) {\n\t    var list = get(set);\n\t    return list[list.length - 1];\n\t}\n\t\n\tfunction get(nodeSet) {\n\t    return slice.call(nodeSet.querySelectorAll(PATH_SELECTED));\n\t}\n\t\n\tfunction clear(nodeSet) {\n\t    get(nodeSet).forEach(function (item) {\n\t        return item.removeAttribute('selected');\n\t    });\n\t}\n\t\n\tfunction add(node) {\n\t    if (setSelected(node)) {\n\t        var nodeSet = bubbleset.closestNodeSet(node);\n\t\n\t        nodeSet.startRangeSelect = node;\n\t        // ???\n\t        bubble.bubbling(nodeSet);\n\t\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction uniq(node) {\n\t    if (!bubble.isBubbleNode(node)) {\n\t        return false;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(node);\n\t    var selection = context.getSelection();\n\t\n\t    selection && selection.removeAllRanges();\n\t    clear(nodeSet);\n\t\n\t    return add(node);\n\t}\n\t\n\tfunction toggleUniq(node) {\n\t    if (isSelected(node)) {\n\t        var nodeSet = bubbleset.closestNodeSet(node);\n\t\n\t        if (get(nodeSet).length === 1) {\n\t            return removeSelected(node);\n\t        }\n\t    }\n\t\n\t    return uniq(node);\n\t}\n\t\n\tfunction isSelected(node) {\n\t    return bubble.isBubbleNode(node) && node.hasAttribute('selected') || false;\n\t}\n\t\n\tfunction setSelected(node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t        node.setAttribute('selected', '');\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction removeSelected(node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t        node.removeAttribute('selected');\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.KEY = {\n\t    a: 65,\n\t    Backspace: 8,\n\t    Bottom: 40,\n\t    c: 67,\n\t    Cmd: 91,\n\t    Comma: 44, // ,\n\t    Delete: 46,\n\t    Enter: 13, // Enter\n\t    Esc: 27,\n\t    Left: 37,\n\t    Right: 39,\n\t    Semicolon: 59, // ;\n\t    Space: 32,\n\t    Tab: 9,\n\t    Top: 38,\n\t    x: 88\n\t};\n\t\n\texports.CLS = {\n\t    DRAGSTART: 'drag',\n\t    DROPZONE: 'dropzone'\n\t};\n\t\n\texports.EV = {\n\t    BEFORE_REMOVE: 'before-remove',\n\t    BUBBLE_EDIT: 'bubble-edit',\n\t    BUBBLE_INPUT: 'bubble-input',\n\t    CHANGE: 'change',\n\t    DRAGEND: 'dragend',\n\t    DRAGENTER: 'dragenter',\n\t    DRAGLEAVE: 'dragleave',\n\t    DRAGSTART: 'dragstart',\n\t    DROP: 'drop',\n\t    READY: 'ready'\n\t};\n\t\n\texports.PROPS = {\n\t    BUBBLE_VALUE: '__bubble_value__',\n\t    CLICK_TIME: '__click_time__',\n\t    LOCAL_EVENTS: '__events__',\n\t    LOCK_COPY: '__lock_copy__',\n\t    OPTIONS: '__options__'\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\t/**\n\t * @module x-bubbles/events\n\t */\n\t\n\tvar context = __webpack_require__(1);\n\tvar CustomEventCommon = __webpack_require__(14);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\texports.scrollX = scrollX;\n\texports.scrollY = scrollY;\n\texports.dispatch = dispatch;\n\t\n\texports.keyCode = function (event) {\n\t    return event.charCode || event.keyCode;\n\t};\n\t\n\texports.metaKey = function (event) {\n\t    return event.ctrlKey || event.metaKey;\n\t};\n\t\n\texports.pageX = function (event) {\n\t    return event.pageX === null && event.clientX !== null ? event.clientX + scrollX() : event.pageX;\n\t};\n\t\n\texports.pageY = function (event) {\n\t    return event.pageY === null && event.clientY !== null ? event.clientY + scrollY() : event.pageY;\n\t};\n\t\n\texports.one = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback, true, false, true);\n\t};\n\t\n\texports.on = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback);\n\t};\n\t\n\texports.off = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback, false);\n\t};\n\t\n\texports.oneLocal = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback, true, true, true);\n\t};\n\t\n\texports.onLocal = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback, true, true);\n\t};\n\t\n\texports.offLocal = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback, false, true);\n\t};\n\t\n\texports.prevent = function (event) {\n\t    event.cancelBubble = true;\n\t    event.returnValue = false;\n\t    event.stopImmediatePropagation();\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t    return false;\n\t};\n\t\n\texports.proxyLocal = function (event) {\n\t    dispatchLocalEvent(event.currentTarget, event);\n\t};\n\t\n\tfunction scrollX() {\n\t    var html = context.document.documentElement;\n\t    var body = context.document.body;\n\t    return (html && html.scrollLeft || body && body.scrollLeft || 0) - (html.clientLeft || 0);\n\t}\n\t\n\tfunction scrollY() {\n\t    var html = context.document.documentElement;\n\t    var body = context.document.body;\n\t    return (html && html.scrollTop || body && body.scrollTop || 0) - (html.clientTop || 0);\n\t}\n\t\n\t/**\n\t * Designer events.\n\t *\n\t * @example\n\t * const { Custom } = require('event');\n\t *\n\t * new Custom('custom-event', {\n\t *     bubbles: true,\n\t *     cancelable: true,\n\t *     detail: { data: '123' }\n\t * })\n\t *\n\t * @alias module:x-bubbles/event~Custom\n\t * @constructor\n\t */\n\tvar Custom = function () {\n\t    if (typeof context.CustomEvent === 'function') {\n\t        return context.CustomEvent;\n\t    }\n\t\n\t    return CustomEventCommon;\n\t}();\n\t\n\t/**\n\t * Dispatch event.\n\t *\n\t * @example\n\t * const { dispatch } = require('event');\n\t * dispatch(node, 'custom-event', {\n\t *     bubbles: true,\n\t *     cancelable: true,\n\t *     detail: { data: '123' }\n\t * })\n\t *\n\t * @alias module:x-bubbles/event.dispatch\n\t * @param {HTMLElement} element node events\n\t * @param {string} name event name\n\t * @param {Object} params the event parameters\n\t * @param {boolean} [params.bubbles=false]\n\t * @param {boolean} [params.cancelable=false]\n\t * @param {*} [params.detail]\n\t */\n\tfunction dispatch(element, name) {\n\t    var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    element.dispatchEvent(new Custom(name, params));\n\t}\n\t\n\tfunction dispatchLocalEvent(element, event) {\n\t    var callbacks = element[PROPS.LOCAL_EVENTS] && element[PROPS.LOCAL_EVENTS][event.type] || [];\n\t    var sharedData = {};\n\t\n\t    for (var i = 0; i < callbacks.length; i++) {\n\t        if (event.immediatePropagationStopped) {\n\t            break;\n\t        }\n\t\n\t        callbacks[i](event, sharedData);\n\t    }\n\t}\n\t\n\tfunction oneCallback(element, eventName, callback) {\n\t    return function _callback(event) {\n\t        element.removeEventListener(eventName, _callback);\n\t        callback(event);\n\t    };\n\t}\n\t\n\tvar EV_ACTIONS = {\n\t    addLocalEventListener: function addLocalEventListener(element, eventName, callback) {\n\t        if (!element[PROPS.LOCAL_EVENTS]) {\n\t            element[PROPS.LOCAL_EVENTS] = {};\n\t        }\n\t\n\t        if (!element[PROPS.LOCAL_EVENTS][eventName]) {\n\t            element[PROPS.LOCAL_EVENTS][eventName] = [];\n\t        }\n\t\n\t        element[PROPS.LOCAL_EVENTS][eventName].push(callback);\n\t    },\n\t\n\t    removeLocalEventListener: function removeLocalEventListener(element, eventName, callback) {\n\t        var callbacks = element[PROPS.LOCAL_EVENTS] && element[PROPS.LOCAL_EVENTS][eventName] || [];\n\t        var i = 0;\n\t\n\t        while (i < callbacks.length) {\n\t            if (callbacks[i] === callback) {\n\t                callbacks.splice(i, 1);\n\t            } else {\n\t                i++;\n\t            }\n\t        }\n\t    },\n\t\n\t    addEventListener: function addEventListener(element, eventName, callback) {\n\t        element.addEventListener(eventName, callback);\n\t    },\n\t\n\t    removeEventListener: function removeEventListener(element, eventName, callback) {\n\t        element.removeEventListener(eventName, callback);\n\t    }\n\t};\n\t\n\tfunction toggleEvent(element, eventName, userCallback) {\n\t    var isSet = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\t    var isLocal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\t    var isOne = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\t\n\t    var events = userCallback ? _defineProperty({}, eventName, userCallback) : eventName;\n\t    var action = '' + (isSet ? 'add' : 'remove') + (isLocal ? 'Local' : '') + 'EventListener';\n\t\n\t    for (var name in events) {\n\t        var callback = isOne ? oneCallback(element, name, events[name]) : events[name];\n\t        EV_ACTIONS[action](element, name, callback);\n\t    }\n\t}\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\t\n\t/**\n\t * @constant {Document}\n\t * @private\n\t */\n\tvar doc = context.document;\n\t\n\t/**\n\t * @constant {Object}\n\t * @private\n\t */\n\tvar protoEvent = context.Event.prototype;\n\t\n\tvar issetCustomEvent = false;\n\t\n\ttry {\n\t    issetCustomEvent = Boolean(doc.createEvent('CustomEvent'));\n\t} catch (e) {}\n\t// do nothing\n\t\n\t\n\t/**\n\t * The original function \"stopImmediatePropagation\"\n\t * @constant {function}\n\t * @private\n\t */\n\tvar stopImmediatePropagation = protoEvent.stopImmediatePropagation;\n\t\n\t/**\n\t * Override function to set properties \"immediatePropagationStopped\"\n\t */\n\tprotoEvent.stopImmediatePropagation = function () {\n\t    this.immediatePropagationStopped = true;\n\t\n\t    if (stopImmediatePropagation) {\n\t        stopImmediatePropagation.call(this);\n\t    } else {\n\t        this.stopPropagation();\n\t    }\n\t};\n\t\n\tvar CustomEventCommon = function () {\n\t    if (issetCustomEvent) {\n\t        return function (eventName, params) {\n\t            params = params || {};\n\t\n\t            var bubbles = Boolean(params.bubbles);\n\t            var cancelable = Boolean(params.cancelable);\n\t            var evt = doc.createEvent('CustomEvent');\n\t\n\t            evt.initCustomEvent(eventName, bubbles, cancelable, params.detail);\n\t\n\t            return evt;\n\t        };\n\t    }\n\t\n\t    return function (eventName, params) {\n\t        params = params || {};\n\t\n\t        var bubbles = Boolean(params.bubbles);\n\t        var cancelable = Boolean(params.cancelable);\n\t        var evt = doc.createEvent('Event');\n\t\n\t        evt.initEvent(eventName, bubbles, cancelable);\n\t        evt.detail = params.detail;\n\t\n\t        return evt;\n\t    };\n\t}();\n\t\n\tCustomEventCommon.prototype = protoEvent;\n\t\n\tmodule.exports = CustomEventCommon;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar native = __webpack_require__(16);\n\tvar mouse = __webpack_require__(19);\n\t\n\tvar _require = __webpack_require__(6),\n\t    canUseDrag = _require.canUseDrag;\n\t\n\texports.init = function (nodeSet) {\n\t    if (canUseDrag) {\n\t        return native.init(nodeSet);\n\t    }\n\t\n\t    return mouse.init(nodeSet);\n\t};\n\t\n\texports.destroy = function (nodeSet) {\n\t    if (canUseDrag) {\n\t        return native.destroy(nodeSet);\n\t    }\n\t\n\t    return mouse.destroy(nodeSet);\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar select = __webpack_require__(11);\n\tvar bubbleset = __webpack_require__(3);\n\tvar events = __webpack_require__(13);\n\t\n\tvar _require = __webpack_require__(12),\n\t    CLS = _require.CLS;\n\t\n\tvar _require2 = __webpack_require__(17),\n\t    getDragImage = _require2.getDragImage,\n\t    onDropSuccess = _require2.onDropSuccess,\n\t    DRAG_IMG = _require2.DRAG_IMG;\n\t\n\tvar EVENTS = {\n\t    dragend: onDragend,\n\t    dragenter: onDragenter,\n\t    dragleave: onDragleave,\n\t    dragover: onDragover,\n\t    dragstart: onDragstart,\n\t    drop: onDrop\n\t};\n\t\n\tvar currentDragSet = null;\n\t\n\texports.init = function (nodeSet) {\n\t    events.on(nodeSet, EVENTS);\n\t};\n\t\n\texports.destroy = function (nodeSet) {\n\t    events.off(nodeSet, EVENTS);\n\t};\n\t\n\tfunction onDragstart(event) {\n\t    event.stopPropagation();\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t    var nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t\n\t    if (!nodeSet || !nodeBubble) {\n\t        event.preventDefault();\n\t        return;\n\t    }\n\t\n\t    var selection = context.getSelection();\n\t    selection && selection.removeAllRanges();\n\t\n\t    currentDragSet = nodeSet;\n\t    nodeSet.classList.add(CLS.DRAGSTART);\n\t    select.add(nodeBubble);\n\t\n\t    event.dataTransfer.effectAllowed = 'move';\n\t    event.dataTransfer.setData('text/plain', '');\n\t\n\t    var list = select.get(currentDragSet);\n\t    if (list.length > 1) {\n\t        event.dataTransfer.setDragImage(getDragImage(), DRAG_IMG.w, DRAG_IMG.h);\n\t    }\n\t}\n\t\n\tfunction onDrop(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (!nodeSet || nodeSet === currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var list = select.get(currentDragSet);\n\t\n\t    if (list.length) {\n\t        bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n\t        context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n\t    }\n\t}\n\t\n\tfunction onDragover(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    event.dataTransfer.dropEffect = 'move';\n\t}\n\t\n\tfunction onDragenter(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t    if (nodeSet && nodeSet !== currentDragSet) {\n\t        nodeSet.classList.add(CLS.DROPZONE);\n\t    }\n\t}\n\t\n\tfunction onDragleave(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t    if (nodeSet && nodeSet !== currentDragSet) {\n\t        nodeSet.classList.remove(CLS.DROPZONE);\n\t    }\n\t}\n\t\n\tfunction onDragend(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    currentDragSet.classList.remove(CLS.DRAGSTART);\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (nodeSet && nodeSet !== currentDragSet) {\n\t        nodeSet.classList.remove(CLS.DROPZONE);\n\t    }\n\t\n\t    currentDragSet = null;\n\t}\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar DRAG_IMG = { w: 16, h: 16 };\n\t\n\tvar dragImage = null;\n\t\n\texports.DRAG_IMG = DRAG_IMG;\n\t\n\texports.getDragImage = function () {\n\t    if (!dragImage) {\n\t        dragImage = new Image();\n\t        dragImage.src = __webpack_require__(18);\n\t    }\n\t\n\t    return dragImage;\n\t};\n\t\n\texports.onDropSuccess = function (fromNodeSet, toNodeSet) {\n\t    fromNodeSet.fireChange();\n\t    toNodeSet.focus();\n\t    toNodeSet.fireChange();\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAVCAMAAAAw/0MlAAABblBMVEUAAABOXIZJWIKCkbeNnMKMmsJNW4VNW4VWZY57ibFHV4KVpMxRYImCkLh9jbpgcJ1fcJ1JWoaZqdNUZpaHmMaVpdJIWolTZJKHmMZEV4iXqNdkdqhjdal2iLx2ib2Knc6PodNJXpJJXpNOYpdpfLKCk8JPYpdofLNugblugrqUptdZdLdZd8Nfeb93js1+ksuGm9SGm9VHaLhJarxKZqxKbL9La7pNbr9Pb71Ucr1Wbag/XqU/X6pAVopffMdjf8ZphMpwicx2js9BW51CWZN/ldCBl9KCmNNFYKRFZbGJndWOodVKX5RKX5ZKYJdWdcNXbKJYdL1KYJtAVYpaeMVJXpJKbMBgebpjeLBjf8VLYp5kd65kgMlofLRog8log8tJYqBth8xugrpviMtNabBxi851jc8/X6t3i8BOaK56kdB9lNFOaa5Ob8FPY5qBl9NGXJODmNOEmdNQbrpRcsJUb7RGXJSTptmUptiUp9kfFguNAAAAK3RSTlMAJCQkJDw8P0JCRUVubpaWlpmZwMDAw8nJzMzV29vb7e3t7fDw+Pn5+fn8jndhZAAAAQhJREFUeF6tz2VXwgAYBtBnhBKKkgoGKPY2urvT7u7ujn/vtsM5fN/e+w8uJEaLa+HvR7Zfl8WILo293Qq8vykQaLXtGnRoPcH6i1L1oEcLidpde6BQc6shslXvaVSHIdD7S9c0Sv5+ACbfFRXftBoYuzijUry1AXPHJ1QK5349pvYOqeSPfCaM8Dkq/EFxHAMst0mDY3cL89Clkis0kqmd/CxgvUt8Ukg8rub4UYCZicTiT0rFY5HnNY4dBNC32GiGwtFt+aLhULOx9CWMdRAMbVXK6cyNfJl0ubL8IYytEDHe0/XX7IZ82e/9S3HsZSDpmSQZT/SiQ+UgGDtU6DKYnYrGTrMBon97+TS1J80efgAAAABJRU5ErkJggg==\"\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar events = __webpack_require__(13);\n\tvar utils = __webpack_require__(6);\n\tvar select = __webpack_require__(11);\n\tvar bubbleset = __webpack_require__(3);\n\tvar Modernizr = __webpack_require__(20);\n\t\n\tvar _require = __webpack_require__(12),\n\t    CLS = _require.CLS,\n\t    EV = _require.EV;\n\t\n\tvar _require2 = __webpack_require__(17),\n\t    getDragImage = _require2.getDragImage,\n\t    onDropSuccess = _require2.onDropSuccess,\n\t    DRAG_IMG = _require2.DRAG_IMG;\n\t\n\tvar currentDragSet = null;\n\tvar currentMoveSet = null;\n\tvar currentDragElement = null;\n\t\n\texports.init = function (nodeSet) {\n\t    events.on(nodeSet, 'mousedown', onMousedown);\n\t};\n\t\n\texports.destroy = function (nodeSet) {\n\t    events.off(nodeSet, 'mousedown', onMousedown);\n\t};\n\t\n\tfunction onMousedown(event) {\n\t    var nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t    if (!nodeBubble) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t    if (!nodeSet) {\n\t        return;\n\t    }\n\t\n\t    event.preventDefault();\n\t    nodeSet.focus();\n\t\n\t    var drag = nodeSet.__drag__ = {\n\t        nodeBubble: nodeBubble,\n\t        nodeOffsetX: event.offsetX,\n\t        nodeOffsetY: event.offsetY,\n\t        onMousemove: utils.throttle(onMousemove.bind(this, nodeSet)),\n\t        onMouseup: onMouseup.bind(this, nodeSet),\n\t        onScroll: utils.throttle(onScroll.bind(this, nodeSet)),\n\t        x: 0,\n\t        y: 0\n\t    };\n\t\n\t    currentDragSet = null;\n\t    currentMoveSet = null;\n\t    currentDragElement = null;\n\t\n\t    events.one(document, 'mouseup', drag.onMouseup);\n\t    events.on(document, 'mousemove', drag.onMousemove);\n\t    events.on(document, 'scroll', drag.onScroll);\n\t}\n\t\n\tfunction onMouseup(dragSet, event) {\n\t    var drag = dragSet.__drag__;\n\t    if (!drag) {\n\t        return;\n\t    }\n\t\n\t    events.off(document, 'mousemove', drag.onMousemove);\n\t    events.off(document, 'scroll', drag.onScroll);\n\t    delete dragSet.__drag__;\n\t\n\t    if (currentDragElement) {\n\t        currentDragElement.parentNode && currentDragElement.parentNode.removeChild(currentDragElement);\n\t        currentDragElement = null;\n\t    }\n\t\n\t    if (currentMoveSet) {\n\t        var _ = currentMoveSet;\n\t        currentMoveSet = null;\n\t\n\t        _.classList.remove(CLS.DROPZONE);\n\t        events.dispatch(_, EV.DRAGLEAVE, { bubbles: false, cancelable: false });\n\t    }\n\t\n\t    if (currentDragSet) {\n\t        var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t        if (nodeSet && nodeSet !== currentDragSet) {\n\t            var list = select.get(currentDragSet);\n\t\n\t            if (list.length) {\n\t                bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n\t                context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n\t            }\n\t        }\n\t\n\t        var _2 = currentDragSet;\n\t        currentDragSet = null;\n\t\n\t        _2.classList.remove(CLS.DRAGSTART);\n\t        events.dispatch(_2, EV.DROP, { bubbles: false, cancelable: false });\n\t        events.dispatch(_2, EV.DRAGEND, { bubbles: false, cancelable: false });\n\t    }\n\t}\n\t\n\tfunction onMousemove(dragSet) {\n\t    var drag = dragSet.__drag__;\n\t    if (!drag) {\n\t        return;\n\t    }\n\t\n\t    if (!currentDragSet) {\n\t        var selection = context.getSelection();\n\t        selection && selection.removeAllRanges();\n\t\n\t        currentDragSet = dragSet;\n\t        currentDragSet.classList.add(CLS.DRAGSTART);\n\t        select.add(drag.nodeBubble);\n\t\n\t        var moveElement = void 0;\n\t\n\t        if (select.get(currentDragSet).length === 1) {\n\t            moveElement = drag.nodeBubble.cloneNode(true);\n\t        }\n\t\n\t        if (!moveElement) {\n\t            moveElement = getDragImage();\n\t            drag.nodeOffsetX = DRAG_IMG.w;\n\t            drag.nodeOffsetY = DRAG_IMG.h;\n\t        }\n\t\n\t        currentDragElement = document.body.appendChild(document.createElement('div'));\n\t        currentDragElement.style.cssText = 'position:absolute;z-index:9999;pointer-events:none;top:0;left:0;';\n\t        currentDragElement.appendChild(moveElement);\n\t\n\t        events.dispatch(currentDragSet, EV.DRAGSTART, { bubbles: false, cancelable: false });\n\t    }\n\t\n\t    drag.x = event.clientX;\n\t    drag.y = event.clientY;\n\t    onScroll(dragSet);\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t    if (nodeSet && nodeSet !== currentDragSet) {\n\t        if (currentMoveSet && currentMoveSet !== nodeSet) {\n\t            currentMoveSet.classList.remove(CLS.DROPZONE);\n\t            nodeSet.classList.add(CLS.DROPZONE);\n\t            currentMoveSet = nodeSet;\n\t            events.dispatch(currentMoveSet, EV.DRAGENTER, { bubbles: false, cancelable: false });\n\t        } else if (!currentMoveSet) {\n\t            nodeSet.classList.add(CLS.DROPZONE);\n\t            currentMoveSet = nodeSet;\n\t            events.dispatch(currentMoveSet, EV.DRAGENTER, { bubbles: false, cancelable: false });\n\t        }\n\t    } else if (currentMoveSet) {\n\t        var _ = currentMoveSet;\n\t        currentMoveSet = null;\n\t\n\t        _.classList.remove(CLS.DROPZONE);\n\t        events.dispatch(_, EV.DRAGLEAVE, { bubbles: false, cancelable: false });\n\t    }\n\t}\n\t\n\tfunction onScroll(dragSet) {\n\t    var drag = dragSet.__drag__;\n\t    if (!drag || !currentDragElement) {\n\t        return;\n\t    }\n\t\n\t    var x = drag.x - drag.nodeOffsetX + events.scrollX();\n\t    var y = drag.y - drag.nodeOffsetY + events.scrollY();\n\t\n\t    if (Modernizr.csstransforms3d) {\n\t        currentDragElement.style.transform = 'translate3d(' + x + 'px, ' + y + 'px, 0px)';\n\t    } else if (Modernizr.csstransforms) {\n\t        currentDragElement.style.transform = 'translate(' + x + 'px, ' + y + 'px)';\n\t    } else {\n\t        currentDragElement.style.top = y + 'px';\n\t        currentDragElement.style.left = x + 'px';\n\t    }\n\t}\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = Modernizr;\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(13);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\t/**\n\t * @param {Event} event\n\t * @returns {?boolean}\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t    if (event.currentTarget[PROPS.LOCK_COPY]) {\n\t        return events.prevent(event);\n\t    }\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(13);\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t * @param {HTMLElement} [sharedData.nodeBubble]\n\t * @param {boolean} [sharedData.isDblclick]\n\t * @returns {?boolean}\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t    var nodeEditor = bubbleset.closestNodeSet(event.target);\n\t    if (!nodeEditor) {\n\t        return events.prevent(event);\n\t    }\n\t\n\t    sharedData.nodeEditor = nodeEditor;\n\t    sharedData.nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t    sharedData.isDblclick = false;\n\t\n\t    if (sharedData.nodeBubble) {\n\t        var clickTime = Date.now();\n\t        sharedData.isDblclick = nodeEditor[PROPS.CLICK_TIME] && clickTime - nodeEditor[PROPS.CLICK_TIME] < 200;\n\t\n\t        nodeEditor[PROPS.CLICK_TIME] = clickTime;\n\t    }\n\t};\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar raf = __webpack_require__(7);\n\tvar context = __webpack_require__(1);\n\tvar events = __webpack_require__(13);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\t/**\n\t * @param {Event} event\n\t * @returns {?boolean}\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t    var nodeEditor = event.currentTarget;\n\t    if (nodeEditor[PROPS.LOCK_COPY]) {\n\t        events.prevent(event);\n\t        delete nodeEditor[PROPS.LOCK_COPY];\n\t\n\t        // Safary 10 не сбрасывает курсор без задержки\n\t        raf(function () {\n\t            var selection = context.getSelection();\n\t            selection && selection.removeAllRanges();\n\t        });\n\t\n\t        return false;\n\t    }\n\t};\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(6);\n\tvar events = __webpack_require__(13);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t    var code = events.keyCode(event);\n\t    sharedData.nodeEditor = event.currentTarget;\n\t\n\t    switch (code) {\n\t        case KEY.Left:\n\t        case KEY.Right:\n\t        case KEY.Delete:\n\t        case KEY.Backspace:\n\t            event.preventDefault();\n\t            sharedData.selection = utils.getSelection(event.currentTarget);\n\t            break;\n\t    }\n\t};\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubble = __webpack_require__(4);\n\t\n\t/**\n\t * @param {Event} event\n\t */\n\tmodule.exports = function (event) {\n\t  bubble.bubbling(event.currentTarget);\n\t};\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(13);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(10);\n\tvar utils = __webpack_require__(6);\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} sharedData.nodeEditor\n\t * @param {HTMLElement} [sharedData.nodeBubble]\n\t * @param {boolean} sharedData.isDblclick\n\t */\n\tmodule.exports = function (event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    var nodeBubble = sharedData.nodeBubble;\n\t    var isDblclick = sharedData.isDblclick;\n\t\n\t    if (nodeBubble) {\n\t        if (isDblclick) {\n\t            if (!event.shiftKey && !events.metaKey(event)) {\n\t                bubble.edit(nodeEditor, nodeBubble);\n\t            }\n\t        } else if (!nodeEditor.options('selection')) {\n\t            bubble.bubbling(nodeEditor);\n\t            cursor.restore(nodeEditor);\n\t        }\n\t    } else {\n\t        var selection = utils.getSelection(nodeEditor);\n\t\n\t        if (!selection || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n\t            cursor.restore(nodeEditor);\n\t        }\n\t    }\n\t};\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar cursor = __webpack_require__(10);\n\t\n\t/**\n\t * @param {Event} event\n\t */\n\tmodule.exports = function (event) {\n\t  cursor.restore(event.currentTarget);\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(13);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(10);\n\tvar text = __webpack_require__(5);\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isTextSelectAll]\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t    var code = events.keyCode(event);\n\t    var metaKey = events.metaKey(event);\n\t\n\t    switch (code) {\n\t        case KEY.Esc:\n\t            event.preventDefault();\n\t            bubble.bubbling(sharedData.nodeEditor);\n\t            cursor.restore(sharedData.nodeEditor);\n\t            break;\n\t\n\t        case KEY.Backspace:\n\t            onBackspace(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Delete:\n\t            onDelete(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Left:\n\t            onArrowLeft(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Right:\n\t            onArrowRight(event, sharedData);\n\t            break;\n\t\n\t        case KEY.a:\n\t            if (metaKey) {\n\t                event.preventDefault();\n\t                sharedData.isTextSelectAll = text.selectAll(null, sharedData.nodeEditor);\n\t            }\n\t            break;\n\t    }\n\t};\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onBackspace(event, sharedData) {\n\t    var selection = sharedData.selection;\n\t    if (!selection) {\n\t        return;\n\t    }\n\t\n\t    var nodeEditor = sharedData.nodeEditor;\n\t\n\t    if (!selection.isCollapsed || text.arrowLeft(selection, true)) {\n\t        text.remove(selection);\n\t        nodeEditor.fireInput();\n\t    } else if (!nodeEditor.options('selection')) {\n\t        var nodeBubble = bubbleset.findBubbleLeft(selection);\n\t\n\t        if (nodeBubble) {\n\t            bubbleset.removeBubbles(nodeEditor, [nodeBubble]);\n\t            nodeEditor.fireChange();\n\t        }\n\t    } else {\n\t        sharedData.isEmptyLeft = true;\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onDelete(event, sharedData) {\n\t    var selection = sharedData.selection;\n\t    if (!selection) {\n\t        return;\n\t    }\n\t\n\t    var nodeEditor = sharedData.nodeEditor;\n\t\n\t    if (!selection.isCollapsed || text.arrowRight(selection, true)) {\n\t        text.remove(selection);\n\t        nodeEditor.fireInput();\n\t    } else if (!nodeEditor.options('selection')) {\n\t        var nodeBubble = bubbleset.findBubbleRight(selection);\n\t\n\t        if (nodeBubble) {\n\t            bubbleset.removeBubbles(nodeEditor, [nodeBubble]);\n\t            nodeEditor.fireChange();\n\t        }\n\t    } else {\n\t        sharedData.isEmptyRight = true;\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t */\n\tfunction onArrowLeft(event, sharedData) {\n\t    sharedData.isEmptyLeft = !text.arrowLeft(sharedData.selection, event.shiftKey);\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t */\n\tfunction onArrowRight(event, sharedData) {\n\t    sharedData.isEmptyRight = !text.arrowRight(sharedData.selection, event.shiftKey);\n\t}\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(13);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t\n\t/**\n\t * @param {Event} event\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t    var code = events.keyCode(event);\n\t    var nodeEditor = event.currentTarget;\n\t\n\t    if (code === KEY.Enter) {\n\t        event.preventDefault();\n\t        if (!nodeEditor.options('disableControls')) {\n\t            bubble.bubbling(nodeEditor);\n\t            cursor.restore(nodeEditor);\n\t        }\n\t    } else {\n\t        var separator = nodeEditor.options('separator');\n\t        if (separator && separator.test(String.fromCharCode(code))) {\n\t            event.preventDefault();\n\t            bubble.bubbling(nodeEditor);\n\t            cursor.restore(nodeEditor);\n\t        }\n\t    }\n\t};\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(13);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t\n\t/**\n\t * @param {Event} event\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t    var nodeEditor = event.currentTarget;\n\t    var code = events.keyCode(event);\n\t    var isPrintableChar = event.key ? event.key.length === 1 : (code > 47 || code === KEY.Space || code === KEY.Backspace) && code !== KEY.Cmd;\n\t\n\t    if (isPrintableChar) {\n\t        nodeEditor.fireInput();\n\t    }\n\t};\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar raf = __webpack_require__(7);\n\tvar context = __webpack_require__(1);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(10);\n\tvar text = __webpack_require__(5);\n\t\n\tvar _require = __webpack_require__(6),\n\t    isIE = _require.isIE;\n\t\n\tmodule.exports = function (event) {\n\t    event.preventDefault();\n\t    var nodeEditor = event.currentTarget;\n\t\n\t    if (context.clipboardData && context.clipboardData.getData) {\n\t        onPasteSuccess(nodeEditor, context.clipboardData.getData('Text'));\n\t    } else if (event.clipboardData) {\n\t        (function () {\n\t            var contentType = 'text/plain';\n\t            var clipboardData = event.clipboardData;\n\t            var data = clipboardData.getData && clipboardData.getData(contentType);\n\t\n\t            if (!onPasteSuccess(nodeEditor, data) && clipboardData.items) {\n\t                Array.prototype.slice.call(clipboardData.items).filter(function (item) {\n\t                    return item.kind === 'string' && item.type === contentType;\n\t                }).some(function (item) {\n\t                    item.getAsString(function (dataText) {\n\t                        onPasteSuccess(nodeEditor, dataText);\n\t                    });\n\t\n\t                    return true;\n\t                });\n\t            }\n\t        })();\n\t    }\n\t};\n\t\n\tfunction onPasteSuccess(nodeEditor, dataText) {\n\t    var checkBubblePaste = nodeEditor.options('checkBubblePaste');\n\t    var selection = context.getSelection();\n\t    var isBubbling = dataText && selection.isCollapsed && !nodeEditor.inputValue ? checkBubblePaste(dataText) : false;\n\t\n\t    if (text.replaceString(dataText, selection)) {\n\t        if (isBubbling) {\n\t            if (isIE) {\n\t                raf(function () {\n\t                    return onReplaceSuccess(nodeEditor);\n\t                });\n\t            } else {\n\t                onReplaceSuccess(nodeEditor);\n\t            }\n\t        } else {\n\t            nodeEditor.fireInput();\n\t        }\n\t\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction onReplaceSuccess(nodeEditor) {\n\t    bubble.bubbling(nodeEditor);\n\t    nodeEditor.focus();\n\t    raf(function () {\n\t        return cursor.restore(nodeEditor);\n\t    });\n\t}\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar select = __webpack_require__(11);\n\t\n\t/**\n\t * @param {Event} event\n\t */\n\tmodule.exports = function (event) {\n\t  select.clear(event.currentTarget);\n\t};\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(13);\n\tvar select = __webpack_require__(11);\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} sharedData.nodeEditor\n\t * @param {HTMLElement} [sharedData.nodeBubble]\n\t * @param {boolean} sharedData.isDblclick\n\t */\n\tmodule.exports = function (event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    var nodeBubble = sharedData.nodeBubble;\n\t    var isDblclick = sharedData.isDblclick;\n\t\n\t    if (nodeBubble) {\n\t        if (events.metaKey(event)) {\n\t            select.add(nodeBubble);\n\t        } else if (event.shiftKey) {\n\t            if (!nodeEditor.startRangeSelect) {\n\t                select.uniq(nodeBubble);\n\t            } else {\n\t                select.range(nodeBubble);\n\t            }\n\t        } else if (!isDblclick) {\n\t            select.toggleUniq(nodeBubble);\n\t        }\n\t    } else {\n\t        select.clear(nodeEditor);\n\t    }\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar raf = __webpack_require__(7);\n\tvar events = __webpack_require__(13);\n\tvar utils = __webpack_require__(6);\n\tvar bubble = __webpack_require__(4);\n\tvar select = __webpack_require__(11);\n\tvar bubbleset = __webpack_require__(3);\n\tvar cursor = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY,\n\t    PROPS = _require.PROPS;\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isTextSelectAll]\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t    var code = events.keyCode(event);\n\t    var metaKey = events.metaKey(event);\n\t\n\t    switch (code) {\n\t        case KEY.Backspace:\n\t            onBackspace(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Delete:\n\t            onDelete(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Left:\n\t            onArrowLeft(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Right:\n\t            onArrowRight(event, sharedData);\n\t            break;\n\t\n\t        // курсор в начало списка\n\t        case KEY.Top:\n\t            event.preventDefault();\n\t            onTop(event, sharedData);\n\t            break;\n\t\n\t        // курсор в конец списка\n\t        case KEY.Bottom:\n\t            event.preventDefault();\n\t            onBottom(event, sharedData);\n\t            break;\n\t\n\t        case KEY.a:\n\t            if (metaKey && !sharedData.isTextSelectAll) {\n\t                event.preventDefault();\n\t                select.all(sharedData.nodeEditor);\n\t            }\n\t            break;\n\t\n\t        case KEY.c:\n\t            metaKey && copyBubbles(sharedData.nodeEditor);\n\t            break;\n\t\n\t        case KEY.x:\n\t            metaKey && copyBubbles(sharedData.nodeEditor, function () {\n\t                return onDelete(event, sharedData);\n\t            });\n\t            break;\n\t    }\n\t};\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onTop(event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    if (nodeEditor.options('disableControls')) {\n\t        return;\n\t    }\n\t\n\t    var nodeBubble = bubbleset.headBubble(nodeEditor);\n\t    nodeBubble && select.uniq(nodeBubble);\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onBottom(event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    if (nodeEditor.options('disableControls')) {\n\t        return;\n\t    }\n\t\n\t    if (select.has(nodeEditor)) {\n\t        cursor.restore(nodeEditor);\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onBackspace(event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    var selection = sharedData.selection;\n\t\n\t    if (selection) {\n\t        if (sharedData.isEmptyLeft) {\n\t            var nodeBubble = bubbleset.findBubbleLeft(selection);\n\t            nodeBubble && select.uniq(nodeBubble);\n\t        }\n\t    } else if (!removeBubbles(nodeEditor)) {\n\t        nodeEditor.focus();\n\t        // без задержки не восстанавливает курсор\n\t        raf(function () {\n\t            return cursor.restore(nodeEditor);\n\t        });\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onDelete(event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    var selection = sharedData.selection;\n\t\n\t    if (selection) {\n\t        if (sharedData.isEmptyRight) {\n\t            var nodeBubble = bubbleset.findBubbleRight(selection);\n\t            nodeBubble && select.uniq(nodeBubble);\n\t        }\n\t    } else if (!removeBubbles(nodeEditor, true)) {\n\t        nodeEditor.focus();\n\t        // без задержки не восстанавливает курсор\n\t        raf(function () {\n\t            return cursor.restore(nodeEditor);\n\t        });\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onArrowLeft(event, sharedData) {\n\t    var selection = sharedData.selection;\n\t\n\t    if (selection) {\n\t        if (sharedData.isEmptyLeft) {\n\t            var nodeBubble = bubbleset.findBubbleLeft(selection);\n\t            nodeBubble && select.uniq(nodeBubble);\n\t        }\n\t    } else {\n\t        var nodeEditor = sharedData.nodeEditor;\n\t        var list = select.get(nodeEditor);\n\t        var begin = list.length > 1 && list[0] === nodeEditor.startRangeSelect ? list[list.length - 1] : list[0];\n\t\n\t        var node = bubbleset.prevBubble(begin);\n\t\n\t        if (node) {\n\t            if (event.shiftKey) {\n\t                select.range(node);\n\t            } else {\n\t                select.uniq(node);\n\t            }\n\t        }\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onArrowRight(event, sharedData) {\n\t    var selection = sharedData.selection;\n\t\n\t    if (selection) {\n\t        if (sharedData.isEmptyRight) {\n\t            var nodeBubble = bubbleset.findBubbleRight(selection);\n\t            nodeBubble && select.uniq(nodeBubble);\n\t        }\n\t    } else {\n\t        var nodeEditor = sharedData.nodeEditor;\n\t        var list = select.get(nodeEditor);\n\t        var begin = list.length > 1 && list[list.length - 1] === nodeEditor.startRangeSelect ? list[0] : list[list.length - 1];\n\t\n\t        var node = bubbleset.nextBubble(begin);\n\t\n\t        if (node) {\n\t            if (event.shiftKey) {\n\t                select.range(node);\n\t            } else {\n\t                select.uniq(node);\n\t            }\n\t\n\t            // } else if (begin && begin.nextSibling && begin.nextSibling.nodeType === Node.TEXT_NODE) {\n\t            //     select.clear(nodeEditor);\n\t            //     selection.collapse(begin.nextSibling, 0);\n\t        } else {\n\t            cursor.restore(nodeEditor);\n\t        }\n\t    }\n\t}\n\t\n\tfunction removeBubbles(nodeEditor) {\n\t    var removeFromRight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\n\t    var list = select.get(nodeEditor);\n\t    if (!list.length) {\n\t        return false;\n\t    }\n\t\n\t    var firstBubble = list[0].previousSibling;\n\t    var secondBubble = list[list.length - 1].nextSibling;\n\t\n\t    if (removeFromRight) {\n\t        var _ = firstBubble;\n\t        firstBubble = secondBubble;\n\t        secondBubble = _;\n\t    }\n\t\n\t    bubbleset.removeBubbles(nodeEditor, list);\n\t\n\t    if (bubble.isBubbleNode(firstBubble)) {\n\t        select.uniq(firstBubble);\n\t    } else if (bubble.isBubbleNode(secondBubble)) {\n\t        select.uniq(secondBubble);\n\t    } else {\n\t        nodeEditor.focus();\n\t        // без задержки не восстанавливает курсор\n\t        raf(function () {\n\t            return cursor.restore(nodeEditor);\n\t        });\n\t    }\n\t\n\t    nodeEditor.fireChange();\n\t    return true;\n\t}\n\t\n\tfunction copyBubbles(nodeEditor) {\n\t    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n\t\n\t    var selection = utils.getSelection(nodeEditor);\n\t    if (selection) {\n\t        return false;\n\t    }\n\t\n\t    var list = select.get(nodeEditor);\n\t    if (!list.length) {\n\t        return false;\n\t    }\n\t\n\t    var bubbleCopy = nodeEditor.options('bubbleCopy');\n\t    var value = bubbleCopy(list);\n\t\n\t    if (!value) {\n\t        return false;\n\t    }\n\t\n\t    nodeEditor[PROPS.LOCK_COPY] = true;\n\t\n\t    var target = nodeEditor.ownerDocument.createElement('input');\n\t    target.value = value;\n\t    target.style.cssText = '\\n        position: absolute;\\n        left: -9999px;\\n        width: 1px;\\n        height: 1px;\\n        margin: 0;\\n        padding: 0;\\n        border: none;';\n\t\n\t    nodeEditor.parentNode.appendChild(target);\n\t\n\t    events.one(target, {\n\t        keyup: function keyup() {\n\t            return nodeEditor.focus();\n\t        },\n\t        blur: function blur() {\n\t            target && target.parentNode && target.parentNode.removeChild(target);\n\t            raf(callback);\n\t        }\n\t    });\n\t\n\t    target.select();\n\t    return true;\n\t}\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(13);\n\tvar utils = __webpack_require__(6);\n\tvar bubble = __webpack_require__(4);\n\tvar select = __webpack_require__(11);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t\n\t/**\n\t * @param {Event} event\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t    var code = events.keyCode(event);\n\t    var nodeEditor = event.currentTarget;\n\t\n\t    if (code === KEY.Enter) {\n\t        event.preventDefault();\n\t        if (!nodeEditor.options('disableControls')) {\n\t            editBubbleKeyboardEvent(nodeEditor);\n\t        }\n\t    } else if (code === KEY.Space) {\n\t        if (editBubbleKeyboardEvent(nodeEditor)) {\n\t            event.preventDefault();\n\t        }\n\t    }\n\t};\n\t\n\tfunction editBubbleKeyboardEvent(nodeEditor) {\n\t    var selection = utils.getSelection(nodeEditor);\n\t\n\t    if (!selection || !selection.rangeCount) {\n\t        var list = select.get(nodeEditor);\n\t\n\t        if (list.length === 1) {\n\t            return bubble.edit(nodeEditor, list[0]);\n\t        }\n\t    }\n\t\n\t    return false;\n\t}\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar context = __webpack_require__(1);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\tvar REG_STRREG = /\\/(.+)\\/([gimy]{0,3})/i;\n\t\n\tvar OPTIONS = {\n\t    begining: ['reg', null, 'begining'],\n\t    bubbleCopy: ['func', function (list) {\n\t        return list.map(function (item) {\n\t            return item.innerHTML;\n\t        }).join(', ');\n\t    }, 'bubble-copy'],\n\t    bubbleDeformation: ['func', function () {}, 'bubble-deformation'],\n\t    bubbleFormation: ['func', function () {}, 'bubble-formation'],\n\t    checkBubblePaste: ['func', function () {\n\t        return true;\n\t    }, 'check-bubble-paste'],\n\t    classBubble: ['str', 'bubble', 'class-bubble'],\n\t    disableControls: ['bool', false, 'disable-controls'],\n\t    draggable: ['bool', true, 'draggable'],\n\t    ending: ['reg', null, 'ending'], // /\\@ya\\.ru/g\n\t    selection: ['bool', true, 'selection'],\n\t    separator: ['reg', /[,;]/, 'separator'],\n\t    tokenizer: ['func', null, 'tokenizer']\n\t};\n\t\n\tvar OPTIONS_PREPARE = {\n\t    func: function func(value) {\n\t        var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t        switch (type) {\n\t            case 'string':\n\t                return new Function('context', 'return context.' + value + ';')(context);\n\t\n\t            case 'function':\n\t                return value;\n\t        }\n\t    },\n\t    bool: function bool(value) {\n\t        var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t        switch (type) {\n\t            case 'string':\n\t                return value === 'true' || value === 'on';\n\t\n\t            case 'boolean':\n\t                return value;\n\t        }\n\t    },\n\t    noop: function noop(value) {\n\t        return value;\n\t    },\n\t    reg: function reg(value) {\n\t        var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t        switch (type) {\n\t            case 'string':\n\t                if (value) {\n\t                    var match = value.match(REG_STRREG);\n\t                    if (match) {\n\t                        return new RegExp(match[1], match[2]);\n\t                    }\n\t                }\n\t\n\t                return null;\n\t\n\t            case 'object':\n\t                if (value instanceof context.RegExp || value === null) {\n\t                    return value;\n\t                }\n\t        }\n\t    },\n\t    str: function str(value) {\n\t        if (typeof value !== 'undefined') {\n\t            return value ? String(value) : '';\n\t        }\n\t    }\n\t};\n\t\n\tmodule.exports = function (node, name, value) {\n\t    if (name) {\n\t        if (!node[PROPS.OPTIONS]) {\n\t            reinitOptions(node);\n\t        }\n\t\n\t        if (typeof value !== 'undefined') {\n\t            node[PROPS.OPTIONS][name] = value;\n\t            prepareOptions(node[PROPS.OPTIONS]);\n\t        } else {\n\t            return node[PROPS.OPTIONS][name];\n\t        }\n\t    } else {\n\t        reinitOptions(node);\n\t    }\n\t};\n\t\n\tfunction reinitOptions(node) {\n\t    var options = node[PROPS.OPTIONS] = node[PROPS.OPTIONS] || {};\n\t\n\t    for (var optionName in OPTIONS) {\n\t        var attrName = 'data-' + OPTIONS[optionName][2];\n\t        if (node.hasAttribute(attrName)) {\n\t            options[optionName] = node.getAttribute(attrName);\n\t        }\n\t    }\n\t\n\t    prepareOptions(options);\n\t}\n\t\n\tfunction prepareOptions(options) {\n\t    for (var name in OPTIONS) {\n\t        var _OPTIONS$name = _slicedToArray(OPTIONS[name], 2),\n\t            type = _OPTIONS$name[0],\n\t            def = _OPTIONS$name[1];\n\t\n\t        options[name] = OPTIONS_PREPARE[type](options[name]);\n\t        if (typeof options[name] === 'undefined') {\n\t            options[name] = def;\n\t        }\n\t    }\n\t}\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** x-bubbles-compact.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 64bde8ef5bd9efdee1bb\n **/","const context = require('./context');\nconst editor = require('./core/editor');\nconst utils = require('./core/utils');\nconst options = require('./core/options');\n\nconst XBubbles = Object.create(HTMLDivElement.prototype, {\n    createdCallback: {\n        value: function () {\n            initEditor(this);\n        }\n    },\n\n    attachedCallback: {\n        value: function () {\n            initEditor(this);\n            this.editor.bubbling();\n        }\n    },\n\n    detachedCallback: {\n        value: function () {\n            destroyEditor(this);\n        }\n    },\n\n    attributeChangedCallback: {\n        value: function (/* name, prevValue, value */) {\n            options(this);\n        }\n    },\n\n    options: {\n        value: function (name, value) {\n            return options(this, name, value);\n        }\n    },\n\n    items: {\n        get: function () {\n            return this.editor.getItems();\n        }\n    },\n\n    inputValue: {\n        get: function () {\n            return this.editor.inputValue();\n        }\n    },\n\n    setContent: {\n        value: function (data) {\n            return this.editor.setContent(data);\n        }\n    },\n\n    addBubble: {\n        value: function (bubbleText, data) {\n            return this.editor.addBubble(bubbleText, data);\n        }\n    },\n\n    removeBubble: {\n        value: function (nodeBubble) {\n            return this.editor.removeBubble(nodeBubble);\n        }\n    },\n\n    editBubble: {\n        value: function (nodeBubble) {\n            return this.editor.editBubble(nodeBubble);\n        }\n    },\n\n    bubbling: {\n        value: function () {\n            return this.editor.bubbling();\n        }\n    },\n\n    ready: {\n        value: function (callback) {\n            utils.ready(callback, this);\n        }\n    },\n});\n\nmodule.exports = context.document.registerElement('x-bubbles', {\n    extends: 'div',\n    prototype: XBubbles\n});\n\nfunction initEditor(node) {\n    if (!node.editor) {\n        Object.defineProperty(node, 'editor', {\n            configurable: true,\n            value: editor.init(node)\n        });\n    }\n}\n\nfunction destroyEditor(node) {\n    if (node.editor) {\n        editor.destroy(node);\n        delete node.editor;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","module.exports = (function () {\n    /* eslint no-eval: 0 */\n    return this || (1, eval)('this');\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./context.js\n **/","const context = require('../context');\nconst bubbleset = require('./bubbleset');\nconst bubble = require('./bubble');\nconst cursor = require('./cursor');\nconst { EV, PROPS } = require('./constant');\nconst text = require('./text');\nconst events = require('./events');\nconst utils = require('./utils');\nconst drag = require('./drag');\nconst select = require('./select');\n\nconst COMMON_EVENTS = {\n    blur: require('./common/blur'),\n    click: require('./common/click'),\n    focus: require('./common/focus'),\n    keydown: require('./common/keydown'),\n};\n\nconst EDITOR_EVENTS = {\n    blur: require('./editor/blur'),\n    click: require('./editor/click'),\n    focus: require('./editor/focus'),\n    keydown: require('./editor/keydown'),\n    keypress: require('./editor/keypress'),\n    keyup: require('./editor/keyup'),\n    paste: require('./editor/paste'),\n};\n\nconst SELECT_EVENTS = {\n    blur: require('./select/blur'),\n    click: require('./select/click'),\n    keydown: require('./select/keydown'),\n    keypress: require('./select/keypress'),\n};\n\nconst PROXY_EVENTS = {\n    blur: events.proxyLocal,\n    click: events.proxyLocal,\n    focus: events.proxyLocal,\n    keydown: events.proxyLocal,\n    keypress: events.proxyLocal,\n    keyup: events.proxyLocal,\n    mscontrolselect: events.prevent,\n    paste: events.proxyLocal,\n    resize: events.prevent,\n    resizestart: events.prevent,\n};\n\nexports.init = function (nodeWrap) {\n    const nodeEditor = nodeWrap;\n    nodeEditor.setAttribute('contenteditable', 'true');\n    nodeEditor.setAttribute('spellcheck', 'false');\n\n    events.onLocal(nodeEditor, COMMON_EVENTS);\n    events.onLocal(nodeEditor, EDITOR_EVENTS);\n\n    if (nodeEditor.options('selection')) {\n        events.onLocal(nodeEditor, SELECT_EVENTS);\n        drag.init(nodeEditor);\n    }\n\n    events.on(nodeEditor, PROXY_EVENTS);\n\n    nodeEditor.fireChange = utils.throttle(fireChange, nodeEditor);\n    nodeEditor.fireEdit = utils.throttle(fireEdit, nodeEditor);\n    nodeEditor.fireInput = utils.throttle(fireInput, nodeEditor);\n    nodeEditor.fireBeforeRemove = fireBeforeRemove.bind(nodeEditor);\n\n    return {\n        addBubble: addBubble.bind(nodeEditor),\n        bubbling: bubbling.bind(nodeEditor),\n        editBubble: editBubble.bind(nodeEditor),\n        getItems: getItems.bind(nodeEditor),\n        inputValue: inputValue.bind(nodeEditor),\n        removeBubble: removeBubble.bind(nodeEditor),\n        setContent: setContent.bind(nodeEditor),\n    };\n};\n\nexports.destroy = function (nodeWrap) {\n    const nodeEditor = nodeWrap;\n    events.off(nodeEditor, PROXY_EVENTS);\n    events.offLocal(nodeEditor, COMMON_EVENTS);\n    events.offLocal(nodeEditor, EDITOR_EVENTS);\n\n    if (nodeEditor.options('selection')) {\n        events.offLocal(nodeEditor, SELECT_EVENTS);\n        drag.destroy(nodeEditor);\n    }\n};\n\nfunction getItems() {\n    return bubbleset.getBubbles(this);\n}\n\nfunction setContent(data) {\n    var selection = context.getSelection();\n    selection && selection.removeAllRanges();\n\n    const list = select.get(this);\n    if (list.length) {\n        bubbleset.removeBubbles(this, list);\n        this.fireChange();\n    }\n\n    while (this.firstChild) {\n        this.removeChild(this.firstChild);\n    }\n\n    data = text.html2text(data);\n    this.appendChild(this.ownerDocument.createTextNode(data));\n    bubble.bubbling(this);\n    cursor.restore(this);\n}\n\nfunction addBubble(bubbleText, dataAttributes) {\n    const nodeBubble = bubble.create(this, bubbleText, dataAttributes);\n    if (!nodeBubble) {\n        return false;\n    }\n\n    if (text.text2bubble(this, nodeBubble)) {\n        this.fireInput();\n        this.fireChange();\n        cursor.restore(this);\n        return true;\n    }\n\n    return false;\n}\n\nfunction removeBubble(nodeBubble) {\n    if (this.contains(nodeBubble)) {\n        bubbleset.removeBubbles(this, [ nodeBubble ]);\n        this.fireChange();\n        return true;\n    }\n\n    return false;\n}\n\nfunction editBubble(nodeBubble) {\n    if (this.contains(nodeBubble)) {\n        return bubble.edit(this, nodeBubble);\n    }\n\n    return false;\n}\n\nfunction inputValue() {\n    const textRange = text.currentTextRange(this);\n    return textRange && text.textClean(textRange.toString()) || '';\n}\n\nfunction bubbling() {\n    bubble.bubbling(this);\n}\n\n/**\n * Генерация события редактирования бабла.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireEdit\n * @param {HTMLElement} nodeBubble нода бабл\n * @this HTMLElement\n * @private\n */\nfunction fireEdit(nodeBubble) {\n    events.dispatch(this, EV.BUBBLE_EDIT, {\n        bubbles: false,\n        cancelable: false,\n        detail: { data: nodeBubble }\n    });\n}\n\n/**\n * Генерация события изменения набора баблов.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireChange\n * @this HTMLElement\n * @private\n */\nfunction fireChange() {\n    events.dispatch(this, EV.CHANGE, {\n        bubbles: false,\n        cancelable: false\n    });\n}\n\n/**\n * Генерация события ввода текста.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireInput\n * @this HTMLElement\n * @private\n */\nfunction fireInput() {\n    const editText = inputValue.call(this);\n\n    if (this[ PROPS.BUBBLE_VALUE ] !== editText) {\n        this[ PROPS.BUBBLE_VALUE ] = editText;\n\n        events.dispatch(this, EV.BUBBLE_INPUT, {\n            bubbles: false,\n            cancelable: false,\n            detail: { data: editText }\n        });\n    }\n}\n\n/**\n * Генерация события удаления баблов перед выполнением удаления из DOM.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireRemove\n * @param {array} list список удаляемых узлов\n * @this HTMLElement\n * @private\n */\nfunction fireBeforeRemove(list) {\n    events.dispatch(this, EV.BEFORE_REMOVE, {\n        bubbles: false,\n        cancelable: false,\n        detail: { data: list }\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/editor.js\n **/","const bubble = require('./bubble');\nconst text = require('./text');\n\nexports.closestNodeBubble = closestNodeBubble;\nexports.closestNodeSet = closestNodeSet;\nexports.findBubbleLeft = findBubbleLeft;\nexports.findBubbleRight = findBubbleRight;\nexports.getBubbles = getBubbles;\nexports.hasBubbles = hasBubbles;\nexports.headBubble = headBubble;\nexports.lastBubble = lastBubble;\nexports.nextBubble = nextBubble;\nexports.prevBubble = prevBubble;\nexports.removeBubbles = removeBubbles;\nexports.moveBubbles = moveBubbles;\n\nfunction lastBubble(nodeSet) {\n    return nodeSet.querySelector('[bubble]:last-child');\n}\n\nfunction headBubble(nodeSet) {\n    return nodeSet.querySelector('[bubble]:first-child');\n}\n\nfunction getBubbles(nodeSet) {\n    return Array.prototype.slice.call(nodeSet.querySelectorAll('[bubble]'));\n}\n\nfunction hasBubbles(nodeSet) {\n    return Boolean(nodeSet.querySelector('[bubble]'));\n}\n\nfunction findBubbleLeft(selection) {\n    if (!selection.focusNode || !selection.anchorNode) {\n        return;\n    }\n\n    let node = selection.focusNode.previousSibling;\n\n    if (selection.anchorNode !== selection.focusNode &&\n        selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n        node = selection.anchorNode.previousSibling;\n    }\n\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n            return;\n        }\n\n        node = node.previousSibling;\n    }\n}\n\nfunction findBubbleRight(selection) {\n    if (!selection.focusNode || !selection.anchorNode) {\n        return;\n    }\n\n    let node = selection.focusNode.nextSibling;\n\n    if (selection.anchorNode !== selection.focusNode &&\n        selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n        node = selection.anchorNode.nextSibling;\n    }\n\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n            return;\n        }\n\n        node = node.nextSibling;\n    }\n}\n\nfunction closestNodeSet(node) {\n    while (node) {\n        if (isEditorNode(node)) {\n            return node;\n        }\n\n        node = node.parentNode;\n    }\n}\n\nfunction closestNodeBubble(node) {\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        if (isEditorNode(node)) {\n            return;\n        }\n\n        node = node.parentNode;\n    }\n}\n\nfunction prevBubble(target) {\n    let node = target && target.previousSibling;\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        node = node.previousSibling;\n    }\n}\n\nfunction nextBubble(target) {\n    let node = target && target.nextSibling;\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        node = node.nextSibling;\n    }\n}\n\nfunction isEditorNode(node) {\n    return (\n        node.nodeType === Node.ELEMENT_NODE &&\n        node.getAttribute('is') === 'x-bubbles'\n    );\n}\n\nfunction removeBubbles(nodeEditor, list) {\n    nodeEditor.fireBeforeRemove(list);\n    list.forEach(item => nodeEditor.removeChild(item));\n}\n\nfunction moveBubbles(nodeEditorFrom, nodeEditorTo, list) {\n    nodeEditorFrom.fireBeforeRemove(list);\n    list.forEach(item => nodeEditorTo.appendChild(item));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/bubbleset.js\n **/","const context = require('../context');\nconst text = require('./text');\nconst { escape, canUseDrag } = require('./utils');\n\nexports.isBubbleNode = isBubbleNode;\nexports.bubbling = bubbling;\nexports.create = create;\nexports.edit = edit;\n\nfunction isBubbleNode(node) {\n    if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n        return false;\n    }\n\n    return node.hasAttribute('bubble');\n}\n\nfunction edit(nodeSet, nodeBubble) {\n    if (nodeBubble.hasAttribute('readonly')) {\n        return false;\n    }\n\n    const selection = context.getSelection();\n\n    if (!selection) {\n        return false;\n    }\n\n    const bubbleDeformation = nodeSet.options('bubbleDeformation');\n    let rangeParams = bubbleDeformation(nodeBubble);\n\n    if (!rangeParams) {\n        const dataText = text.textClean(nodeBubble.innerText);\n\n        rangeParams = {\n            text: dataText,\n            startOffset: 0,\n            endOffset: dataText.length\n        };\n    }\n\n    const textFake = text.createZws();\n    const textNode = context.document.createTextNode(rangeParams.text);\n\n    nodeSet.fireEdit(nodeBubble);\n    nodeSet.replaceChild(textNode, nodeBubble);\n    nodeSet.insertBefore(textFake, textNode);\n\n    const range = context.document.createRange();\n    range.setStart(textNode, rangeParams.startOffset);\n    range.setEnd(textNode, rangeParams.endOffset);\n\n    selection.removeAllRanges();\n    selection.addRange(range);\n    return true;\n}\n\n/**\n * У обертки нельзя делать tabindex=-1, иначе будет слетать фокус с поля ввода.\n * @param {HTMLElement} nodeEditor\n * @param {string} dataText\n * @param {Object} [dataAttributes={}]\n * @returns {?HTMLElement}\n */\nfunction create(nodeEditor, dataText, dataAttributes = {}) {\n    dataText = text.textClean(dataText);\n\n    if (!dataText) {\n        return;\n    }\n\n    const bubbleFormation = nodeEditor.options('bubbleFormation');\n    const classBubble = nodeEditor.options('classBubble');\n    const draggable = canUseDrag && nodeEditor.options('draggable') && nodeEditor.options('selection');\n    const wrap = nodeEditor.ownerDocument.createElement('span');\n\n    wrap.innerText = dataText;\n\n    for (let key in dataAttributes) {\n        if (dataAttributes[ key ]) {\n            wrap.setAttribute(`data-${key}`, escape(dataAttributes[ key ]));\n        }\n    }\n\n    bubbleFormation(wrap);\n\n    if (classBubble) {\n        const classes = String(classBubble).trim().split(/\\s+/);\n        let len = classes.length;\n\n        while (len--) {\n            wrap.classList.add(classes[ len ]);\n        }\n    }\n\n    wrap.setAttribute('bubble', '');\n    wrap.setAttribute('contenteditable', 'false');\n    draggable && wrap.setAttribute('draggable', 'true');\n\n    return wrap;\n}\n\nfunction bubbling(nodeSet) {\n    const begining = nodeSet.options('begining');\n    const ending = nodeSet.options('ending');\n    const separator = nodeSet.options('separator');\n    const tokenizer = nodeSet.options('tokenizer');\n    const ranges = getBubbleRanges(nodeSet);\n    const nodes = [];\n\n    ranges.forEach(function (range) {\n        const dataText = text.textClean(range.toString());\n\n        if (!dataText) {\n            range.deleteContents();\n            return;\n        }\n\n        let textParts = [ dataText ];\n\n        if (tokenizer) {\n            textParts = tokenizer(dataText);\n\n        } else {\n            if (separator) {\n                textParts = dataText\n                    .split(separator)\n                    .map(trimIterator)\n                    .filter(nonEmptyIterator);\n            }\n\n            if (ending) {\n                textParts = textParts\n                    .reduce((parts, str) => parts.concat(parseFragmentByEnding(str, ending)), [])\n                    .map(trimIterator)\n                    .filter(nonEmptyIterator);\n\n            } else if (begining) {\n                textParts = textParts\n                    .reduce((parts, str) => parts.concat(parseFragmentByBeginning(str, begining)), [])\n                    .map(trimIterator)\n                    .filter(nonEmptyIterator);\n            }\n        }\n\n        if (!Array.isArray(textParts) || !textParts.length) {\n            range.deleteContents();\n            return;\n        }\n\n        const fragment = context.document.createDocumentFragment();\n\n        textParts.forEach(function (textPart) {\n            const nodeBubble = create(nodeSet, textPart);\n            if (nodeBubble) {\n                fragment.appendChild(nodeBubble);\n                nodes.push(nodeBubble);\n            }\n        });\n\n        range.deleteContents();\n        range.insertNode(fragment);\n    });\n\n    nodeSet.fireInput();\n\n    if (nodes.length) {\n        nodeSet.fireChange();\n    }\n\n    return nodes;\n}\n\nfunction getBubbleRanges(nodeSet) {\n    const ranges = [];\n    const children = nodeSet.childNodes;\n    let range;\n    let node;\n\n    for (let i = 0; i < children.length; i++) {\n        node = children[ i ];\n\n        if (isBubbleNode(node)) {\n            if (range) {\n                range.setEndBefore(node);\n                ranges.push(range);\n                range = undefined;\n            }\n\n        } else {\n            if (!range) {\n                range = context.document.createRange();\n                range.setStartBefore(node);\n            }\n        }\n    }\n\n    if (range) {\n        range.setEndAfter(node);\n        ranges.push(range);\n    }\n\n    return ranges;\n}\n\nfunction trimIterator(str) {\n    return str.trim();\n}\n\nfunction nonEmptyIterator(str) {\n    return Boolean(str);\n}\n\nfunction parseFragmentByEnding(str, reg) {\n    const parts = [];\n    let lastIndex = 0;\n    let loop = 999;\n\n    reg.lastIndex = 0;\n    while (reg.exec(str) !== null && loop) {\n        loop--;\n        parts.push(str.substring(lastIndex, reg.lastIndex));\n        lastIndex = reg.lastIndex;\n    }\n\n    return parts;\n}\n\nfunction parseFragmentByBeginning(str, reg) {\n    const parts = [];\n    let res;\n    let index = 0;\n    let loop = 999;\n\n    reg.lastIndex = 0;\n    while ((res = reg.exec(str)) !== null && loop) {\n        loop--;\n        if (index !== res.index) {\n            parts.push(str.substring(index, res.index));\n            index = res.index;\n        }\n    }\n\n    parts.push(str.substring(index, str.length));\n    return parts;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/bubble.js\n **/","const context = require('../context');\nconst bubbleset = require('./bubbleset');\nconst { getSelection, correctSelection } = require('./utils');\n\n/* eslint-disable max-len */\nconst REG_REPLACE_NON_PRINTABLE = /[\\0-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u037F-\\u0383\\u038B\\u038D\\u03A2\\u0528-\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B-\\u058E\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08A1\\u08AD-\\u08E3\\u08FF\\u0978\\u0980\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0C00\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C34\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5A-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C80\\u0C81\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D01\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D4F-\\u0D56\\u0D58-\\u0D5F\\u0D64\\u0D65\\u0D76-\\u0D78\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F5-\\u13FF\\u169D-\\u169F\\u16F1-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191D-\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C80-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7-\\u1CFF\\u1DE7-\\u1DFB\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BB-\\u20CF\\u20F1-\\u20FF\\u218A-\\u218F\\u23F4-\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2700\\u2B4D-\\u2B4F\\u2B5A-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E3C-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FCD-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA698-\\uA69E\\uA6F8-\\uA6FF\\uA78F\\uA794-\\uA79F\\uA7AB-\\uA7F7\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C5-\\uA8CD\\uA8DA-\\uA8DF\\uA8FC-\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9E0-\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAA7C-\\uAA7F\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F-\\uABBF\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE27-\\uFE2F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF]/g;\nconst REG_ZWS = /\\u200B/;\nconst TEXT_ZWS = '\\u200B';\n\nexports.isEmptyLeft = isEmptyLeft;\nexports.isEmptyRight = isEmptyRight;\nexports.arrowRight = arrowRight;\nexports.arrowLeft = arrowLeft;\nexports.remove = remove;\nexports.html2text = html2text;\nexports.currentTextRange = currentTextRange;\nexports.text2bubble = text2bubble;\nexports.replaceString = replaceString;\nexports.selectAll = selectAll;\nexports.textClean = textClean;\nexports.checkZws = checkZws;\nexports.createZws = createZws;\n\nfunction isEmptyLeft(selection) {\n    let { startNode, startOffset } = correctSelection(selection);\n    let isEmpty = true;\n    let node = startNode;\n\n    while (node) {\n        if (node.nodeType === Node.TEXT_NODE) {\n            const value = startOffset > 0 ? node.nodeValue.substring(0, startOffset) : node.nodeValue;\n\n            if (textClean(value)) {\n                isEmpty = false;\n                break;\n            }\n\n        } else {\n            break;\n        }\n\n        startOffset = 0;\n        node = node.previousSibling;\n    }\n\n    return isEmpty;\n}\n\nfunction isEmptyRight(selection) {\n    let { endNode, endOffset } = correctSelection(selection);\n    let node = endNode;\n\n    while (node) {\n        if (node.nodeType === Node.TEXT_NODE) {\n            const value = endOffset > -1 && endOffset < node.nodeValue.length ? node.nodeValue.substring(endOffset) : node.nodeValue;\n\n            if (textClean(value)) {\n                return false;\n            }\n\n        } else {\n            return false;\n        }\n\n        endOffset = -1;\n        node = node.nextSibling;\n    }\n\n    return true;\n}\n\nfunction text2bubble(nodeEditor, nodeBubble) {\n    const selection = getSelection(nodeEditor);\n    const range = selection && currentTextRange(nodeEditor, selection);\n\n    if (range) {\n        selection.removeAllRanges();\n        selection.addRange(range);\n        replace(selection, nodeBubble);\n\n    } else {\n        nodeEditor.appendChild(nodeBubble);\n    }\n\n    return true;\n}\n\nfunction currentTextRange(nodeEditor, selection) {\n    selection = selection || getSelection(nodeEditor);\n    if (!selection) {\n        return;\n    }\n\n    const pointNode = do {\n        if (selection.focusNode && selection.focusNode.nodeType === Node.TEXT_NODE) {\n            selection.focusNode;\n\n        } else if (selection.anchorNode && selection.anchorNode.nodeType === Node.TEXT_NODE) {\n            selection.anchorNode;\n\n        } else {\n            undefined;\n        }\n    };\n\n    if (!pointNode) {\n        return;\n    }\n\n    let startNode = pointNode;\n    let endNode = pointNode;\n    let item = pointNode;\n\n    while (item && item.nodeType === Node.TEXT_NODE) {\n        startNode = item;\n        item = item.previousSibling;\n    }\n\n    item = pointNode;\n\n    while (item && item.nodeType === Node.TEXT_NODE) {\n        endNode = item;\n        item = item.nextSibling;\n    }\n\n    const range = nodeEditor.ownerDocument.createRange();\n    range.setStartBefore(startNode);\n    range.setEndAfter(endNode);\n\n    return range;\n}\n\nfunction remove(selection) {\n    return replace(selection, createZws());\n}\n\nfunction replace(selection, node) {\n    if (!selection || !selection.rangeCount) {\n        return false;\n    }\n\n    const anchor = context.document.createElement('span');\n    selection.getRangeAt(0).surroundContents(anchor);\n    anchor.parentNode.replaceChild(node, anchor);\n\n    selection.removeAllRanges();\n\n    if (node.nodeType === Node.TEXT_NODE) {\n        const range = context.document.createRange();\n        // для ИЕ обязательно указывать node.nodeValue.length\n        range.setStart(node, node.nodeValue.length);\n        range.collapse(false);\n        selection.addRange(range);\n\n    } else {\n        selection.collapse(node, 0);\n    }\n\n    return true;\n}\n\nfunction replaceString(data, selection) {\n    data = textClean(data);\n    if (!data) {\n        return false;\n    }\n\n    selection = selection || context.getSelection();\n    const textNode = context.document.createTextNode(data);\n\n    if (!replace(selection, textNode)) {\n        return false;\n    }\n\n    selection.collapse(textNode, textNode.nodeValue.length);\n    return true;\n}\n\nfunction arrowLeft(selection, extend) {\n    selection = selection || context.getSelection();\n\n    if (!selection ||\n        !selection.anchorNode ||\n        selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n\n        return false;\n    }\n\n    let { startNode, endNode, startOffset, endOffset, revert } = correctSelection(selection);\n\n    if (!selection.isCollapsed && !extend) {\n        selection.collapse(startNode, startOffset);\n        return true;\n    }\n\n    const isNativeExtend = Boolean(selection.extend);\n    revert = isNativeExtend ? revert : !revert;\n    let node = revert ? startNode : endNode;\n    let offset = revert ? startOffset : endOffset;\n\n    while (node) {\n        if (node.nodeType !== Node.TEXT_NODE) {\n            return false;\n        }\n\n        if (offset === null) {\n            offset = node.nodeValue.length;\n        }\n\n        if (offset - 1 < 0) {\n            node = node.previousSibling;\n            offset = null;\n            continue;\n        }\n\n        const text = node.nodeValue.substring(offset - 1, offset);\n\n        if (checkZws(text)) {\n            offset = offset - 1;\n            continue;\n        }\n\n        break;\n    }\n\n    if (!node || offset === null) {\n        return false;\n    }\n\n    if (extend) {\n        if (isNativeExtend) {\n            selection.extend(node, offset - 1);\n\n        } else {\n            const range = context.document.createRange();\n\n            if (revert) {\n                range.setStart(node, offset - 1);\n                range.setEnd(endNode, endOffset);\n\n            } else {\n                range.setStart(startNode, startOffset);\n                range.setEnd(node, offset - 1);\n            }\n\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n\n    } else {\n        selection.collapse(node, offset - 1);\n    }\n\n    return true;\n}\n\nfunction arrowRight(selection, extend) {\n    selection = selection || context.getSelection();\n\n    if (!selection ||\n        !selection.focusNode ||\n        selection.focusNode.nodeType !== Node.TEXT_NODE) {\n\n        return false;\n    }\n\n    let { startNode, endNode, startOffset, endOffset, revert } = correctSelection(selection);\n\n    if (!selection.isCollapsed && !extend) {\n        selection.collapse(endNode, endOffset);\n        return true;\n    }\n\n    let node = revert ? startNode : endNode;\n    let offset = revert ? startOffset : endOffset;\n\n    while (node) {\n        if (node.nodeType !== Node.TEXT_NODE) {\n            return false;\n        }\n\n        const len = node.nodeValue.length;\n\n        if (offset + 1 > len) {\n            node = node.nextSibling;\n            offset = 0;\n            continue;\n        }\n\n        const text = node.nodeValue.substring(offset, offset + 1);\n\n        if (checkZws(text)) {\n            offset = offset + 1;\n            continue;\n        }\n\n        break;\n    }\n\n    if (!node) {\n        return false;\n    }\n\n    if (extend) {\n        const isNativeExtend = Boolean(selection.extend);\n\n        if (isNativeExtend) {\n            selection.extend(node, offset + 1);\n\n        } else {\n            const range = context.document.createRange();\n\n            if (revert) {\n                range.setStart(node, offset + 1);\n                range.setEnd(endNode, endOffset);\n\n            } else {\n                range.setStart(startNode, startOffset);\n                range.setEnd(node, offset + 1);\n            }\n\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n\n    } else {\n        selection.collapse(node, offset + 1);\n    }\n\n    return true;\n}\n\nfunction html2text(value) {\n    if (!value) {\n        return '';\n    }\n\n    var DOMContainer = context.document.implementation.createHTMLDocument('').body;\n    DOMContainer.innerText = value;\n\n    return DOMContainer.innerText\n        .replace(/^[\\u0020\\u00a0]+$/gm, '')\n        .replace(/\\n/gm, ' ')\n        .trim();\n}\n\nfunction selectAll(selection, nodeSet) {\n    selection = selection || context.getSelection();\n    const node = selection && selection.anchorNode;\n\n    if (!node || node.nodeType !== Node.TEXT_NODE) {\n        return false;\n    }\n\n    let fromNode;\n    let toNode;\n    let item = node;\n\n    while (item && item.nodeType === Node.TEXT_NODE) {\n        fromNode = item;\n        item = item.previousSibling;\n    }\n\n    item = node;\n\n    while (item && item.nodeType === Node.TEXT_NODE) {\n        toNode = item;\n        item = item.nextSibling;\n    }\n\n    const hasBubbles = bubbleset.hasBubbles(nodeSet);\n    const range = context.document.createRange();\n    range.setStartBefore(fromNode);\n    range.setEndAfter(toNode);\n\n    const dataText = textClean(range.toString());\n\n    if (dataText || (!dataText && !hasBubbles)) {\n        if (!dataText) {\n            range.collapse();\n        }\n\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return true;\n    }\n\n    return false;\n}\n\nfunction createZws() {\n    return context.document.createTextNode(TEXT_ZWS);\n}\n\nfunction checkZws(value) {\n    return REG_ZWS.test(value);\n}\n\nfunction textClean(value) {\n    return String(value || '')\n        .trim()\n        .replace(REG_REPLACE_NON_PRINTABLE, '');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/text.js\n **/","const raf = require('raf');\nconst context = require('../context');\n\n/* eslint quotes: 0 */\n\nconst HTML_ESCAPES = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '`': '&#96;'\n};\n\nconst HTML_UNESCAPES = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\",\n    '&#96;': '`'\n};\n\nconst REG_ESCAPED_HTML = /&(?:amp|lt|gt|quot|#39|#96);/g;\nconst REG_UNESCAPED_HTML = /[&<>\"'`]/g;\nconst REG_HAS_ESCAPED_HTML = RegExp(REG_ESCAPED_HTML.source);\nconst REG_HAS_UNESCAPED_HTML = RegExp(REG_UNESCAPED_HTML.source);\nconst REG_IE = /Trident|Edge/;\n\nexports.getSelection = function (nodeEditor) {\n    const selection = context.getSelection();\n\n    if (selection && selection.anchorNode && (nodeEditor.compareDocumentPosition(selection.anchorNode) & Node.DOCUMENT_POSITION_CONTAINED_BY)) {\n        return selection;\n    }\n};\n\nexports.correctSelection = function (selection) {\n    let endNode = selection.focusNode;\n    let endOffset = selection.focusOffset;\n    let startNode = selection.anchorNode;\n    let startOffset = selection.anchorOffset;\n    let revert = false;\n\n    if (startNode === endNode) {\n        startOffset = Math.min(selection.anchorOffset, selection.focusOffset);\n        endOffset = Math.max(selection.anchorOffset, selection.focusOffset);\n        revert = selection.anchorOffset > selection.focusOffset;\n\n    } else {\n        const position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n            startNode = selection.focusNode;\n            startOffset = selection.focusOffset;\n            endNode = selection.anchorNode;\n            endOffset = selection.anchorOffset;\n            revert = true;\n        }\n    }\n\n    return { startNode, endNode, startOffset, endOffset, revert };\n};\n\nexports.throttle = function (callback, runContext) {\n    let throttle = 0;\n    const animationCallback = function () {\n        throttle = 0;\n    };\n\n    return function () {\n        if (throttle) {\n            return;\n        }\n\n        throttle = raf(animationCallback);\n\n        callback.apply(runContext || this, arguments);\n    };\n};\n\nexports.escape = function (data) {\n    data = String(data);\n\n    if (data && REG_HAS_UNESCAPED_HTML.test(data)) {\n        return data.replace(REG_UNESCAPED_HTML, escapeHtmlChar);\n    }\n\n    return data;\n};\n\nexports.unescape = function (data) {\n    data = String(data);\n\n    if (data && REG_HAS_ESCAPED_HTML.test(data)) {\n        return data.replace(REG_ESCAPED_HTML, unescapeHtmlChar);\n    }\n\n    return data;\n};\n\nexports.canUseDrag = (function () {\n    return !REG_IE.test(context.navigator.userAgent);\n})();\n\nexports.isIE = (function () {\n    return REG_IE.test(context.navigator.userAgent);\n})();\n\nexports.ready = (function () {\n    let callbacks = [];\n    let ready = false;\n\n    function onready() {\n        raf(function () {\n            context.setTimeout(function () {\n                ready = true;\n                callbacks.forEach(item => item[0].call(item[1]));\n                callbacks = [];\n            });\n        });\n    }\n\n    if (context.document.readyState === 'complete') {\n        onready();\n\n    } else if (context.document.readyState === 'interactive' && !context.attachEvent && (!context.HTMLImports || context.HTMLImports.ready)) {\n        onready();\n\n    } else {\n        context.addEventListener(context.HTMLImports && !context.HTMLImports.ready ? 'HTMLImportsLoaded' : 'DOMContentLoaded', onready);\n    }\n\n    return function (callback, callContext) {\n        if (ready) {\n            callback.call(callContext);\n\n        } else {\n            callbacks.push([ callback, callContext ]);\n        }\n    };\n})();\n\nfunction unescapeHtmlChar(chr) {\n    return HTML_UNESCAPES[ chr ];\n}\n\nfunction escapeHtmlChar(chr) {\n    return HTML_ESCAPES[ chr ];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/utils.js\n **/","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function() {\n  root.requestAnimationFrame = raf\n  root.cancelAnimationFrame = caf\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/raf/index.js\n ** module id = 7\n ** module chunks = 0\n **/","// Generated by CoffeeScript 1.7.1\n(function() {\n  var getNanoSeconds, hrtime, loadTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - loadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    loadTime = getNanoSeconds();\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/performance-now/lib/performance-now.js\n ** module id = 8\n ** module chunks = 0\n **/","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/process/browser.js\n ** module id = 9\n ** module chunks = 0\n **/","/**\n * @module x-bubbles/cursor\n */\n\nconst context = require('../context');\nconst text = require('./text');\nconst select = require('./select');\n\nexports.restore = restore;\nexports.restoreBasis = restoreBasis;\n\n/**\n * Reset the cursor position to the end of the input field.\n * @alias module:x-bubbles/cursor.restore\n * @param {HTMLElement} nodeSet\n */\nfunction restore(nodeSet) {\n    select.clear(nodeSet);\n    const basis = restoreBasis(nodeSet);\n    const selection = context.getSelection();\n    selection.removeAllRanges();\n    selection.collapse(basis, 1);\n}\n\n/**\n * The creation of the fake text at the end childNodes\n * @alias module:x-bubbles/cursor.restoreBasis\n * @param {HTMLElement} nodeSet\n * @returns {HTMLTextElement} fake text node\n */\nfunction restoreBasis(nodeSet) {\n    let fakeText = text.createZws();\n\n    if (nodeSet.hasChildNodes()) {\n        const lastNode = nodeSet.childNodes[ nodeSet.childNodes.length - 1 ];\n\n        if (lastNode.isEqualNode(fakeText)) {\n            fakeText = lastNode;\n\n        } else {\n            nodeSet.appendChild(fakeText);\n        }\n\n    } else {\n        nodeSet.appendChild(fakeText);\n    }\n\n    return fakeText;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/cursor.js\n **/","const context = require('../context');\nconst bubble = require('./bubble');\nconst bubbleset = require('./bubbleset');\n\nconst slice = Array.prototype.slice;\nconst PATH_SELECTED = '[bubble][selected]';\nconst PATH_NOT_SELECTED = '[bubble]:not([selected])';\n\nexports.all = all;\nexports.add = add;\nexports.clear = clear;\nexports.get = get;\nexports.uniq = uniq;\nexports.head = head;\nexports.last = last;\nexports.has = has;\nexports.range = range;\nexports.toggleUniq = toggleUniq;\n\nfunction range(node) {\n    if (!bubble.isBubbleNode(node)) {\n        return;\n    }\n\n    const set = node.parentNode;\n    const list = get(set);\n\n    if (!list.length) {\n        uniq(node);\n        return;\n    }\n\n    clear(set);\n\n    const headList = list[0];\n    const lastList = list[ list.length - 1 ];\n\n    if (headList === lastList || !set.startRangeSelect) {\n        set.startRangeSelect = headList;\n    }\n\n    let fromNode;\n    let toNode;\n    const position = node.compareDocumentPosition(set.startRangeSelect);\n\n    if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n        fromNode = set.startRangeSelect;\n        toNode = node;\n\n    } else {\n        fromNode = node;\n        toNode = set.startRangeSelect;\n    }\n\n    if (fromNode && toNode) {\n        let item = fromNode;\n\n        while (item) {\n            if (!setSelected(item)) {\n                break;\n            }\n\n            if (item === toNode) {\n                break;\n            }\n\n            item = item.nextSibling;\n        }\n\n        bubble.bubbling(set);\n    }\n}\n\nfunction all(nodeSet) {\n    slice.call(nodeSet.querySelectorAll(PATH_NOT_SELECTED)).forEach(item => setSelected(item));\n    nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\n    bubble.bubbling(nodeSet);\n\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n}\n\nfunction has(nodeSet) {\n    return Boolean(nodeSet.querySelector(PATH_SELECTED));\n}\n\nfunction head(set) {\n    return get(set)[0];\n}\n\nfunction last(set) {\n    const list = get(set);\n    return list[ list.length - 1 ];\n}\n\nfunction get(nodeSet) {\n    return slice.call(nodeSet.querySelectorAll(PATH_SELECTED));\n}\n\nfunction clear(nodeSet) {\n    get(nodeSet).forEach(item => item.removeAttribute('selected'));\n}\n\nfunction add(node) {\n    if (setSelected(node)) {\n        const nodeSet = bubbleset.closestNodeSet(node);\n\n        nodeSet.startRangeSelect = node;\n        // ???\n        bubble.bubbling(nodeSet);\n\n        return true;\n    }\n\n    return false;\n}\n\nfunction uniq(node) {\n    if (!bubble.isBubbleNode(node)) {\n        return false;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(node);\n    const selection = context.getSelection();\n\n    selection && selection.removeAllRanges();\n    clear(nodeSet);\n\n    return add(node);\n}\n\nfunction toggleUniq(node) {\n    if (isSelected(node)) {\n        const nodeSet = bubbleset.closestNodeSet(node);\n\n        if (get(nodeSet).length === 1) {\n            return removeSelected(node);\n        }\n    }\n\n    return uniq(node);\n}\n\nfunction isSelected(node) {\n    return bubble.isBubbleNode(node) && node.hasAttribute('selected') || false;\n}\n\nfunction setSelected(node) {\n    if (bubble.isBubbleNode(node)) {\n        node.setAttribute('selected', '');\n        return true;\n    }\n\n    return false;\n}\n\nfunction removeSelected(node) {\n    if (bubble.isBubbleNode(node)) {\n        node.removeAttribute('selected');\n        return true;\n    }\n\n    return false;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/select.js\n **/","exports.KEY = {\n    a: 65,\n    Backspace: 8,\n    Bottom: 40,\n    c: 67,\n    Cmd: 91,\n    Comma: 44, // ,\n    Delete: 46,\n    Enter: 13, // Enter\n    Esc: 27,\n    Left: 37,\n    Right: 39,\n    Semicolon: 59, // ;\n    Space: 32,\n    Tab: 9,\n    Top: 38,\n    x: 88,\n};\n\nexports.CLS = {\n    DRAGSTART: 'drag',\n    DROPZONE: 'dropzone',\n};\n\nexports.EV = {\n    BEFORE_REMOVE: 'before-remove',\n    BUBBLE_EDIT: 'bubble-edit',\n    BUBBLE_INPUT: 'bubble-input',\n    CHANGE: 'change',\n    DRAGEND: 'dragend',\n    DRAGENTER: 'dragenter',\n    DRAGLEAVE: 'dragleave',\n    DRAGSTART: 'dragstart',\n    DROP: 'drop',\n    READY: 'ready',\n};\n\nexports.PROPS = {\n    BUBBLE_VALUE: '__bubble_value__',\n    CLICK_TIME: '__click_time__',\n    LOCAL_EVENTS: '__events__',\n    LOCK_COPY: '__lock_copy__',\n    OPTIONS: '__options__',\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/constant.js\n **/","/**\n * @module x-bubbles/events\n */\n\nconst context = require('../context');\nconst CustomEventCommon = require('../polyfills/CustomEventCommon');\nconst { PROPS } = require('./constant');\n\nexports.scrollX = scrollX;\nexports.scrollY = scrollY;\nexports.dispatch = dispatch;\n\nexports.keyCode = function (event) {\n    return event.charCode || event.keyCode;\n};\n\nexports.metaKey = function (event) {\n    return event.ctrlKey || event.metaKey;\n};\n\nexports.pageX = function (event) {\n    return (event.pageX === null && event.clientX !== null) ?\n        event.clientX + scrollX() :\n        event.pageX;\n};\n\nexports.pageY = function (event) {\n    return (event.pageY === null && event.clientY !== null) ?\n        event.clientY + scrollY() :\n        event.pageY;\n};\n\nexports.one = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, true, false, true);\n};\n\nexports.on = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback);\n};\n\nexports.off = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, false);\n};\n\nexports.oneLocal = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, true, true, true);\n};\n\nexports.onLocal = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, true, true);\n};\n\nexports.offLocal = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, false, true);\n};\n\nexports.prevent = function (event) {\n    event.cancelBubble = true;\n    event.returnValue = false;\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    event.preventDefault();\n    return false;\n};\n\nexports.proxyLocal = function (event) {\n    dispatchLocalEvent(event.currentTarget, event);\n};\n\nfunction scrollX() {\n    const html = context.document.documentElement;\n    const body = context.document.body;\n    return (html && html.scrollLeft || body && body.scrollLeft || 0) - (html.clientLeft || 0);\n}\n\nfunction scrollY() {\n    const html = context.document.documentElement;\n    const body = context.document.body;\n    return (html && html.scrollTop || body && body.scrollTop || 0) - (html.clientTop || 0);\n}\n\n/**\n * Designer events.\n *\n * @example\n * const { Custom } = require('event');\n *\n * new Custom('custom-event', {\n *     bubbles: true,\n *     cancelable: true,\n *     detail: { data: '123' }\n * })\n *\n * @alias module:x-bubbles/event~Custom\n * @constructor\n */\nconst Custom = (function () {\n    if (typeof context.CustomEvent === 'function') {\n        return context.CustomEvent;\n    }\n\n    return CustomEventCommon;\n}());\n\n/**\n * Dispatch event.\n *\n * @example\n * const { dispatch } = require('event');\n * dispatch(node, 'custom-event', {\n *     bubbles: true,\n *     cancelable: true,\n *     detail: { data: '123' }\n * })\n *\n * @alias module:x-bubbles/event.dispatch\n * @param {HTMLElement} element node events\n * @param {string} name event name\n * @param {Object} params the event parameters\n * @param {boolean} [params.bubbles=false]\n * @param {boolean} [params.cancelable=false]\n * @param {*} [params.detail]\n */\nfunction dispatch(element, name, params = {}) {\n    element.dispatchEvent(new Custom(name, params));\n}\n\nfunction dispatchLocalEvent(element, event) {\n    const callbacks = element[ PROPS.LOCAL_EVENTS ] && element[ PROPS.LOCAL_EVENTS ][ event.type ] || [];\n    const sharedData = {};\n\n    for (let i = 0; i < callbacks.length; i++) {\n        if (event.immediatePropagationStopped) {\n            break;\n        }\n\n        callbacks[ i ](event, sharedData);\n    }\n}\n\nfunction oneCallback(element, eventName, callback) {\n    return function _callback(event) {\n        element.removeEventListener(eventName, _callback);\n        callback(event);\n    };\n}\n\nconst EV_ACTIONS = {\n    addLocalEventListener: function (element, eventName, callback) {\n        if (!element[ PROPS.LOCAL_EVENTS ]) {\n            element[ PROPS.LOCAL_EVENTS ] = {};\n        }\n\n        if (!element[ PROPS.LOCAL_EVENTS ][ eventName ]) {\n            element[ PROPS.LOCAL_EVENTS ][ eventName ] = [];\n        }\n\n        element[ PROPS.LOCAL_EVENTS ][ eventName ].push(callback);\n    },\n\n    removeLocalEventListener: function (element, eventName, callback) {\n        const callbacks = element[ PROPS.LOCAL_EVENTS ] && element[ PROPS.LOCAL_EVENTS ][ eventName ] || [];\n        let i = 0;\n\n        while (i < callbacks.length) {\n            if (callbacks[ i ] === callback) {\n                callbacks.splice(i, 1);\n\n            } else {\n                i++;\n            }\n        }\n    },\n\n    addEventListener: function (element, eventName, callback) {\n        element.addEventListener(eventName, callback);\n    },\n\n    removeEventListener: function (element, eventName, callback) {\n        element.removeEventListener(eventName, callback);\n    },\n};\n\nfunction toggleEvent(element, eventName, userCallback, isSet = true, isLocal = false, isOne = false) {\n    const events = userCallback ? { [ eventName ]: userCallback } : eventName;\n    const action = `${isSet ? 'add' : 'remove'}${isLocal ? 'Local' : ''}EventListener`;\n\n    for (const name in events) {\n        const callback = isOne ? oneCallback(element, name, events[ name ]) : events[ name ];\n        EV_ACTIONS[ action ](element, name, callback);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/events.js\n **/","const context = require('../context');\n\n/**\n * @constant {Document}\n * @private\n */\nconst doc = context.document;\n\n/**\n * @constant {Object}\n * @private\n */\nconst protoEvent = context.Event.prototype;\n\nlet issetCustomEvent = false;\n\ntry {\n    issetCustomEvent = Boolean(doc.createEvent('CustomEvent'));\n} catch (e) {\n    // do nothing\n}\n\n/**\n * The original function \"stopImmediatePropagation\"\n * @constant {function}\n * @private\n */\nconst stopImmediatePropagation = protoEvent.stopImmediatePropagation;\n\n/**\n * Override function to set properties \"immediatePropagationStopped\"\n */\nprotoEvent.stopImmediatePropagation = function () {\n    this.immediatePropagationStopped = true;\n\n    if (stopImmediatePropagation) {\n        stopImmediatePropagation.call(this);\n\n    } else {\n        this.stopPropagation();\n    }\n};\n\nlet CustomEventCommon = (function () {\n    if (issetCustomEvent) {\n        return function (eventName, params) {\n            params = params || {};\n\n            let bubbles = Boolean(params.bubbles);\n            let cancelable = Boolean(params.cancelable);\n            let evt = doc.createEvent('CustomEvent');\n\n            evt.initCustomEvent(eventName, bubbles, cancelable, params.detail);\n\n            return evt;\n        };\n    }\n\n    return function (eventName, params) {\n        params = params || {};\n\n        let bubbles = Boolean(params.bubbles);\n        let cancelable = Boolean(params.cancelable);\n        let evt = doc.createEvent('Event');\n\n        evt.initEvent(eventName, bubbles, cancelable);\n        evt.detail = params.detail;\n\n        return evt;\n    };\n}());\n\nCustomEventCommon.prototype = protoEvent;\n\nmodule.exports = CustomEventCommon;\n\n\n\n/** WEBPACK FOOTER **\n ** ./polyfills/CustomEventCommon.js\n **/","const native = require('./drag/native');\nconst mouse = require('./drag/mouse');\nconst { canUseDrag } = require('./utils');\n\nexports.init = function (nodeSet) {\n    if (canUseDrag) {\n        return native.init(nodeSet);\n    }\n\n    return mouse.init(nodeSet);\n};\n\nexports.destroy = function (nodeSet) {\n    if (canUseDrag) {\n        return native.destroy(nodeSet);\n    }\n\n    return mouse.destroy(nodeSet);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/drag.js\n **/","const context = require('../../context');\nconst select = require('../select');\nconst bubbleset = require('../bubbleset');\nconst events = require('../events');\nconst { CLS } = require('../constant');\nconst { getDragImage, onDropSuccess, DRAG_IMG } = require('./common');\n\nconst EVENTS = {\n    dragend: onDragend,\n    dragenter: onDragenter,\n    dragleave: onDragleave,\n    dragover: onDragover,\n    dragstart: onDragstart,\n    drop: onDrop,\n};\n\nlet currentDragSet = null;\n\nexports.init = function (nodeSet) {\n    events.on(nodeSet, EVENTS);\n};\n\nexports.destroy = function (nodeSet) {\n    events.off(nodeSet, EVENTS);\n};\n\nfunction onDragstart(event) {\n    event.stopPropagation();\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    const nodeBubble = bubbleset.closestNodeBubble(event.target);\n\n    if (!nodeSet || !nodeBubble) {\n        event.preventDefault();\n        return;\n    }\n\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n\n    currentDragSet = nodeSet;\n    nodeSet.classList.add(CLS.DRAGSTART);\n    select.add(nodeBubble);\n\n    event.dataTransfer.effectAllowed = 'move';\n    event.dataTransfer.setData('text/plain', '');\n\n    const list = select.get(currentDragSet);\n    if (list.length > 1) {\n        event.dataTransfer.setDragImage(getDragImage(), DRAG_IMG.w, DRAG_IMG.h);\n    }\n}\n\nfunction onDrop(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (!nodeSet || nodeSet === currentDragSet) {\n        return;\n    }\n\n    const list = select.get(currentDragSet);\n\n    if (list.length) {\n        bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n        context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n    }\n}\n\nfunction onDragover(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    event.dataTransfer.dropEffect = 'move';\n}\n\nfunction onDragenter(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (nodeSet && nodeSet !== currentDragSet) {\n        nodeSet.classList.add(CLS.DROPZONE);\n    }\n}\n\nfunction onDragleave(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (nodeSet && nodeSet !== currentDragSet) {\n        nodeSet.classList.remove(CLS.DROPZONE);\n    }\n}\n\nfunction onDragend(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    currentDragSet.classList.remove(CLS.DRAGSTART);\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (nodeSet && nodeSet !== currentDragSet) {\n        nodeSet.classList.remove(CLS.DROPZONE);\n    }\n\n    currentDragSet = null;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/drag/native.js\n **/","const DRAG_IMG = { w: 16, h: 16 };\n\nlet dragImage = null;\n\nexports.DRAG_IMG = DRAG_IMG;\n\nexports.getDragImage = function () {\n    if (!dragImage) {\n        dragImage = new Image();\n        dragImage.src = require('url?mimetype=image/png!./bubbles.png');\n    }\n\n    return dragImage;\n};\n\nexports.onDropSuccess = function (fromNodeSet, toNodeSet) {\n    fromNodeSet.fireChange();\n    toNodeSet.focus();\n    toNodeSet.fireChange();\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/drag/common.js\n **/","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAVCAMAAAAw/0MlAAABblBMVEUAAABOXIZJWIKCkbeNnMKMmsJNW4VNW4VWZY57ibFHV4KVpMxRYImCkLh9jbpgcJ1fcJ1JWoaZqdNUZpaHmMaVpdJIWolTZJKHmMZEV4iXqNdkdqhjdal2iLx2ib2Knc6PodNJXpJJXpNOYpdpfLKCk8JPYpdofLNugblugrqUptdZdLdZd8Nfeb93js1+ksuGm9SGm9VHaLhJarxKZqxKbL9La7pNbr9Pb71Ucr1Wbag/XqU/X6pAVopffMdjf8ZphMpwicx2js9BW51CWZN/ldCBl9KCmNNFYKRFZbGJndWOodVKX5RKX5ZKYJdWdcNXbKJYdL1KYJtAVYpaeMVJXpJKbMBgebpjeLBjf8VLYp5kd65kgMlofLRog8log8tJYqBth8xugrpviMtNabBxi851jc8/X6t3i8BOaK56kdB9lNFOaa5Ob8FPY5qBl9NGXJODmNOEmdNQbrpRcsJUb7RGXJSTptmUptiUp9kfFguNAAAAK3RSTlMAJCQkJDw8P0JCRUVubpaWlpmZwMDAw8nJzMzV29vb7e3t7fDw+Pn5+fn8jndhZAAAAQhJREFUeF6tz2VXwgAYBtBnhBKKkgoGKPY2urvT7u7ujn/vtsM5fN/e+w8uJEaLa+HvR7Zfl8WILo293Qq8vykQaLXtGnRoPcH6i1L1oEcLidpde6BQc6shslXvaVSHIdD7S9c0Sv5+ACbfFRXftBoYuzijUry1AXPHJ1QK5349pvYOqeSPfCaM8Dkq/EFxHAMst0mDY3cL89Clkis0kqmd/CxgvUt8Ukg8rub4UYCZicTiT0rFY5HnNY4dBNC32GiGwtFt+aLhULOx9CWMdRAMbVXK6cyNfJl0ubL8IYytEDHe0/XX7IZ82e/9S3HsZSDpmSQZT/SiQ+UgGDtU6DKYnYrGTrMBon97+TS1J80efgAAAABJRU5ErkJggg==\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/url-loader?mimetype=image/png!./core/drag/bubbles.png\n ** module id = 18\n ** module chunks = 0\n **/","const context = require('../../context');\nconst events = require('../events');\nconst utils = require('../utils');\nconst select = require('../select');\nconst bubbleset = require('../bubbleset');\nconst Modernizr = require('modernizr');\nconst { CLS, EV } = require('../constant');\nconst { getDragImage, onDropSuccess, DRAG_IMG } = require('./common');\n\nlet currentDragSet = null;\nlet currentMoveSet = null;\nlet currentDragElement = null;\n\nexports.init = function (nodeSet) {\n    events.on(nodeSet, 'mousedown', onMousedown);\n};\n\nexports.destroy = function (nodeSet) {\n    events.off(nodeSet, 'mousedown', onMousedown);\n};\n\nfunction onMousedown(event) {\n    const nodeBubble = bubbleset.closestNodeBubble(event.target);\n    if (!nodeBubble) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (!nodeSet) {\n        return;\n    }\n\n    event.preventDefault();\n    nodeSet.focus();\n\n    const drag = nodeSet.__drag__ = {\n        nodeBubble: nodeBubble,\n        nodeOffsetX: event.offsetX,\n        nodeOffsetY: event.offsetY,\n        onMousemove: utils.throttle(onMousemove.bind(this, nodeSet)),\n        onMouseup: onMouseup.bind(this, nodeSet),\n        onScroll: utils.throttle(onScroll.bind(this, nodeSet)),\n        x: 0,\n        y: 0,\n    };\n\n    currentDragSet = null;\n    currentMoveSet = null;\n    currentDragElement = null;\n\n    events.one(document, 'mouseup', drag.onMouseup);\n    events.on(document, 'mousemove', drag.onMousemove);\n    events.on(document, 'scroll', drag.onScroll);\n}\n\nfunction onMouseup(dragSet, event) {\n    const drag = dragSet.__drag__;\n    if (!drag) {\n        return;\n    }\n\n    events.off(document, 'mousemove', drag.onMousemove);\n    events.off(document, 'scroll', drag.onScroll);\n    delete dragSet.__drag__;\n\n    if (currentDragElement) {\n        currentDragElement.parentNode && currentDragElement.parentNode.removeChild(currentDragElement);\n        currentDragElement = null;\n    }\n\n    if (currentMoveSet) {\n        const _ = currentMoveSet;\n        currentMoveSet = null;\n\n        _.classList.remove(CLS.DROPZONE);\n        events.dispatch(_, EV.DRAGLEAVE, { bubbles: false, cancelable: false });\n    }\n\n    if (currentDragSet) {\n        const nodeSet = bubbleset.closestNodeSet(event.target);\n\n        if (nodeSet && nodeSet !== currentDragSet) {\n            const list = select.get(currentDragSet);\n\n            if (list.length) {\n                bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n                context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n            }\n        }\n\n        const _ = currentDragSet;\n        currentDragSet = null;\n\n        _.classList.remove(CLS.DRAGSTART);\n        events.dispatch(_, EV.DROP, { bubbles: false, cancelable: false });\n        events.dispatch(_, EV.DRAGEND, { bubbles: false, cancelable: false });\n    }\n}\n\nfunction onMousemove(dragSet) {\n    const drag = dragSet.__drag__;\n    if (!drag) {\n        return;\n    }\n\n    if (!currentDragSet) {\n        const selection = context.getSelection();\n        selection && selection.removeAllRanges();\n\n        currentDragSet = dragSet;\n        currentDragSet.classList.add(CLS.DRAGSTART);\n        select.add(drag.nodeBubble);\n\n        let moveElement;\n\n        if (select.get(currentDragSet).length === 1) {\n            moveElement = drag.nodeBubble.cloneNode(true);\n        }\n\n        if (!moveElement) {\n            moveElement = getDragImage();\n            drag.nodeOffsetX = DRAG_IMG.w;\n            drag.nodeOffsetY = DRAG_IMG.h;\n        }\n\n        currentDragElement = document.body.appendChild(document.createElement('div'));\n        currentDragElement.style.cssText = 'position:absolute;z-index:9999;pointer-events:none;top:0;left:0;';\n        currentDragElement.appendChild(moveElement);\n\n        events.dispatch(currentDragSet, EV.DRAGSTART, { bubbles: false, cancelable: false });\n    }\n\n    drag.x = event.clientX;\n    drag.y = event.clientY;\n    onScroll(dragSet);\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (nodeSet && nodeSet !== currentDragSet) {\n        if (currentMoveSet && currentMoveSet !== nodeSet) {\n            currentMoveSet.classList.remove(CLS.DROPZONE);\n            nodeSet.classList.add(CLS.DROPZONE);\n            currentMoveSet = nodeSet;\n            events.dispatch(currentMoveSet, EV.DRAGENTER, { bubbles: false, cancelable: false });\n\n        } else if (!currentMoveSet) {\n            nodeSet.classList.add(CLS.DROPZONE);\n            currentMoveSet = nodeSet;\n            events.dispatch(currentMoveSet, EV.DRAGENTER, { bubbles: false, cancelable: false });\n        }\n\n    } else if (currentMoveSet) {\n        const _ = currentMoveSet;\n        currentMoveSet = null;\n\n        _.classList.remove(CLS.DROPZONE);\n        events.dispatch(_, EV.DRAGLEAVE, { bubbles: false, cancelable: false });\n    }\n}\n\nfunction onScroll(dragSet) {\n    const drag = dragSet.__drag__;\n    if (!drag || !currentDragElement) {\n        return;\n    }\n\n    const x = drag.x - drag.nodeOffsetX + events.scrollX();\n    const y = drag.y - drag.nodeOffsetY + events.scrollY();\n\n    if (Modernizr.csstransforms3d) {\n        currentDragElement.style.transform = `translate3d(${x}px, ${y}px, 0px)`;\n\n    } else if (Modernizr.csstransforms) {\n        currentDragElement.style.transform = `translate(${x}px, ${y}px)`;\n\n    } else {\n        currentDragElement.style.top = `${y}px`;\n        currentDragElement.style.left = `${x}px`;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/drag/mouse.js\n **/","module.exports = Modernizr;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"var\":\"Modernizr\",\"root\":\"modernizr\",\"commonjs2\":\"modernizr\",\"commonjs\":\"modernizr\",\"amd\":\"modernizr\"}\n ** module id = 20\n ** module chunks = 0\n **/","const events = require('../events');\nconst { PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @returns {?boolean}\n */\nmodule.exports = function (event) {\n    if (event.currentTarget[ PROPS.LOCK_COPY ]) {\n        return events.prevent(event);\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/common/blur.js\n **/","const events = require('../events');\nconst bubbleset = require('../bubbleset');\nconst { PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} [sharedData.nodeEditor]\n * @param {HTMLElement} [sharedData.nodeBubble]\n * @param {boolean} [sharedData.isDblclick]\n * @returns {?boolean}\n */\nmodule.exports = function (event, sharedData) {\n    const nodeEditor = bubbleset.closestNodeSet(event.target);\n    if (!nodeEditor) {\n        return events.prevent(event);\n    }\n\n    sharedData.nodeEditor = nodeEditor;\n    sharedData.nodeBubble = bubbleset.closestNodeBubble(event.target);\n    sharedData.isDblclick = false;\n\n    if (sharedData.nodeBubble) {\n        const clickTime = Date.now();\n        sharedData.isDblclick = nodeEditor[ PROPS.CLICK_TIME ] && (clickTime - nodeEditor[ PROPS.CLICK_TIME ]) < 200;\n\n        nodeEditor[ PROPS.CLICK_TIME ] = clickTime;\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/common/click.js\n **/","const raf = require('raf');\nconst context = require('../../context');\nconst events = require('../events');\nconst { PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @returns {?boolean}\n */\nmodule.exports = function (event) {\n    const nodeEditor = event.currentTarget;\n    if (nodeEditor[ PROPS.LOCK_COPY ]) {\n        events.prevent(event);\n        delete nodeEditor[ PROPS.LOCK_COPY ];\n\n        // Safary 10 не сбрасывает курсор без задержки\n        raf(() => {\n            const selection = context.getSelection();\n            selection && selection.removeAllRanges();\n        });\n\n        return false;\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/common/focus.js\n **/","const utils = require('../utils');\nconst events = require('../events');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    sharedData.nodeEditor = event.currentTarget;\n\n    switch (code) {\n    case KEY.Left:\n    case KEY.Right:\n    case KEY.Delete:\n    case KEY.Backspace:\n        event.preventDefault();\n        sharedData.selection = utils.getSelection(event.currentTarget);\n        break;\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/common/keydown.js\n **/","const bubble = require('../bubble');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    bubble.bubbling(event.currentTarget);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/editor/blur.js\n **/","const events = require('../events');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst utils = require('../utils');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} sharedData.nodeEditor\n * @param {HTMLElement} [sharedData.nodeBubble]\n * @param {boolean} sharedData.isDblclick\n */\nmodule.exports = function (event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const nodeBubble = sharedData.nodeBubble;\n    const isDblclick = sharedData.isDblclick;\n\n    if (nodeBubble) {\n        if (isDblclick) {\n            if (!event.shiftKey && !events.metaKey(event)) {\n                bubble.edit(nodeEditor, nodeBubble);\n            }\n\n        } else if (!nodeEditor.options('selection')) {\n            bubble.bubbling(nodeEditor);\n            cursor.restore(nodeEditor);\n        }\n\n    } else {\n        const selection = utils.getSelection(nodeEditor);\n\n        if (!selection || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n            cursor.restore(nodeEditor);\n        }\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/editor/click.js\n **/","const cursor = require('../cursor');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    cursor.restore(event.currentTarget);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/editor/focus.js\n **/","const events = require('../events');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst text = require('../text');\nconst bubbleset = require('../bubbleset');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isTextSelectAll]\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    const metaKey = events.metaKey(event);\n\n    switch (code) {\n    case KEY.Esc:\n        event.preventDefault();\n        bubble.bubbling(sharedData.nodeEditor);\n        cursor.restore(sharedData.nodeEditor);\n        break;\n\n    case KEY.Backspace:\n        onBackspace(event, sharedData);\n        break;\n\n    case KEY.Delete:\n        onDelete(event, sharedData);\n        break;\n\n    case KEY.Left:\n        onArrowLeft(event, sharedData);\n        break;\n\n    case KEY.Right:\n        onArrowRight(event, sharedData);\n        break;\n\n    case KEY.a:\n        if (metaKey) {\n            event.preventDefault();\n            sharedData.isTextSelectAll = text.selectAll(null, sharedData.nodeEditor);\n        }\n        break;\n    }\n};\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onBackspace(event, sharedData) {\n    const selection = sharedData.selection;\n    if (!selection) {\n        return;\n    }\n\n    const nodeEditor = sharedData.nodeEditor;\n\n    if (!selection.isCollapsed || text.arrowLeft(selection, true)) {\n        text.remove(selection);\n        nodeEditor.fireInput();\n\n    } else if (!nodeEditor.options('selection')) {\n        const nodeBubble = bubbleset.findBubbleLeft(selection);\n\n        if (nodeBubble) {\n            bubbleset.removeBubbles(nodeEditor, [ nodeBubble ]);\n            nodeEditor.fireChange();\n        }\n\n    } else {\n        sharedData.isEmptyLeft = true;\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onDelete(event, sharedData) {\n    const selection = sharedData.selection;\n    if (!selection) {\n        return;\n    }\n\n    const nodeEditor = sharedData.nodeEditor;\n\n    if (!selection.isCollapsed || text.arrowRight(selection, true)) {\n        text.remove(selection);\n        nodeEditor.fireInput();\n\n    } else if (!nodeEditor.options('selection')) {\n        const nodeBubble = bubbleset.findBubbleRight(selection);\n\n        if (nodeBubble) {\n            bubbleset.removeBubbles(nodeEditor, [ nodeBubble ]);\n            nodeEditor.fireChange();\n        }\n\n    } else {\n        sharedData.isEmptyRight = true;\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n */\nfunction onArrowLeft(event, sharedData) {\n    sharedData.isEmptyLeft = !text.arrowLeft(sharedData.selection, event.shiftKey);\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n */\nfunction onArrowRight(event, sharedData) {\n    sharedData.isEmptyRight = !text.arrowRight(sharedData.selection, event.shiftKey);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/editor/keydown.js\n **/","const events = require('../events');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    const code = events.keyCode(event);\n    const nodeEditor = event.currentTarget;\n\n    if (code === KEY.Enter) {\n        event.preventDefault();\n        if (!nodeEditor.options('disableControls')) {\n            bubble.bubbling(nodeEditor);\n            cursor.restore(nodeEditor);\n        }\n\n    } else {\n        const separator = nodeEditor.options('separator');\n        if (separator && separator.test(String.fromCharCode(code))) {\n            event.preventDefault();\n            bubble.bubbling(nodeEditor);\n            cursor.restore(nodeEditor);\n        }\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/editor/keypress.js\n **/","const events = require('../events');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    const nodeEditor = event.currentTarget;\n    const code = events.keyCode(event);\n    const isPrintableChar = do {\n        if (event.key) {\n            event.key.length === 1;\n\n        } else {\n            ((code > 47 || code === KEY.Space || code === KEY.Backspace) && code !== KEY.Cmd);\n        }\n    };\n\n    if (isPrintableChar) {\n        nodeEditor.fireInput();\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/editor/keyup.js\n **/","const raf = require('raf');\nconst context = require('../../context');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst text = require('../text');\nconst { isIE } = require('../utils');\n\nmodule.exports = function (event) {\n    event.preventDefault();\n    const nodeEditor = event.currentTarget;\n\n    if (context.clipboardData && context.clipboardData.getData) {\n        onPasteSuccess(nodeEditor, context.clipboardData.getData('Text'));\n\n    } else if (event.clipboardData) {\n        const contentType = 'text/plain';\n        const clipboardData = event.clipboardData;\n        const data = clipboardData.getData && clipboardData.getData(contentType);\n\n        if (!onPasteSuccess(nodeEditor, data) && clipboardData.items) {\n            Array.prototype.slice.call(clipboardData.items)\n                .filter(item => item.kind === 'string' && item.type === contentType)\n                .some(function (item) {\n                    item.getAsString(function (dataText) {\n                        onPasteSuccess(nodeEditor, dataText);\n                    });\n\n                    return true;\n                });\n        }\n    }\n};\n\nfunction onPasteSuccess(nodeEditor, dataText) {\n    const checkBubblePaste = nodeEditor.options('checkBubblePaste');\n    const selection = context.getSelection();\n    const isBubbling = do {\n        if (dataText && selection.isCollapsed && !nodeEditor.inputValue) {\n            checkBubblePaste(dataText);\n\n        } else {\n            false;\n        }\n    };\n\n    if (text.replaceString(dataText, selection)) {\n        if (isBubbling) {\n            if (isIE) {\n                raf(() => onReplaceSuccess(nodeEditor));\n\n            } else {\n                onReplaceSuccess(nodeEditor);\n            }\n\n        } else {\n            nodeEditor.fireInput();\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\nfunction onReplaceSuccess(nodeEditor) {\n    bubble.bubbling(nodeEditor);\n    nodeEditor.focus();\n    raf(() => cursor.restore(nodeEditor));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/editor/paste.js\n **/","const select = require('../select');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    select.clear(event.currentTarget);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/select/blur.js\n **/","const events = require('../events');\nconst select = require('../select');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} sharedData.nodeEditor\n * @param {HTMLElement} [sharedData.nodeBubble]\n * @param {boolean} sharedData.isDblclick\n */\nmodule.exports = function (event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const nodeBubble = sharedData.nodeBubble;\n    const isDblclick = sharedData.isDblclick;\n\n    if (nodeBubble) {\n        if (events.metaKey(event)) {\n            select.add(nodeBubble);\n\n        } else if (event.shiftKey) {\n            if (!nodeEditor.startRangeSelect) {\n                select.uniq(nodeBubble);\n\n            } else {\n                select.range(nodeBubble);\n            }\n\n        } else if (!isDblclick) {\n            select.toggleUniq(nodeBubble);\n        }\n\n    } else {\n        select.clear(nodeEditor);\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/select/click.js\n **/","const raf = require('raf');\nconst events = require('../events');\nconst utils = require('../utils');\nconst bubble = require('../bubble');\nconst select = require('../select');\nconst bubbleset = require('../bubbleset');\nconst cursor = require('../cursor');\nconst { KEY, PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isTextSelectAll]\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    const metaKey = events.metaKey(event);\n\n    switch (code) {\n    case KEY.Backspace:\n        onBackspace(event, sharedData);\n        break;\n\n    case KEY.Delete:\n        onDelete(event, sharedData);\n        break;\n\n    case KEY.Left:\n        onArrowLeft(event, sharedData);\n        break;\n\n    case KEY.Right:\n        onArrowRight(event, sharedData);\n        break;\n\n    // курсор в начало списка\n    case KEY.Top:\n        event.preventDefault();\n        onTop(event, sharedData);\n        break;\n\n    // курсор в конец списка\n    case KEY.Bottom:\n        event.preventDefault();\n        onBottom(event, sharedData);\n        break;\n\n    case KEY.a:\n        if (metaKey && !sharedData.isTextSelectAll) {\n            event.preventDefault();\n            select.all(sharedData.nodeEditor);\n        }\n        break;\n\n    case KEY.c:\n        metaKey && copyBubbles(sharedData.nodeEditor);\n        break;\n\n    case KEY.x:\n        metaKey && copyBubbles(sharedData.nodeEditor, () => onDelete(event, sharedData));\n        break;\n    }\n};\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onTop(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    if (nodeEditor.options('disableControls')) {\n        return;\n    }\n\n    const nodeBubble = bubbleset.headBubble(nodeEditor);\n    nodeBubble && select.uniq(nodeBubble);\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onBottom(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    if (nodeEditor.options('disableControls')) {\n        return;\n    }\n\n    if (select.has(nodeEditor)) {\n        cursor.restore(nodeEditor);\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onBackspace(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyLeft) {\n            const nodeBubble = bubbleset.findBubbleLeft(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else if (!removeBubbles(nodeEditor)) {\n        nodeEditor.focus();\n        // без задержки не восстанавливает курсор\n        raf(() => cursor.restore(nodeEditor));\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onDelete(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyRight) {\n            const nodeBubble = bubbleset.findBubbleRight(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else if (!removeBubbles(nodeEditor, true)) {\n        nodeEditor.focus();\n        // без задержки не восстанавливает курсор\n        raf(() => cursor.restore(nodeEditor));\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onArrowLeft(event, sharedData) {\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyLeft) {\n            const nodeBubble = bubbleset.findBubbleLeft(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else {\n        const nodeEditor = sharedData.nodeEditor;\n        const list = select.get(nodeEditor);\n        const begin = do {\n            if (list.length > 1 && list[ 0 ] === nodeEditor.startRangeSelect) {\n                list[ list.length - 1 ];\n\n            } else {\n                list[ 0 ];\n            }\n        };\n\n        const node = bubbleset.prevBubble(begin);\n\n        if (node) {\n            if (event.shiftKey) {\n                select.range(node);\n\n            } else {\n                select.uniq(node);\n            }\n        }\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onArrowRight(event, sharedData) {\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyRight) {\n            const nodeBubble = bubbleset.findBubbleRight(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else {\n        const nodeEditor = sharedData.nodeEditor;\n        const list = select.get(nodeEditor);\n        const begin = do {\n            if (list.length > 1 && list[ list.length - 1 ] === nodeEditor.startRangeSelect) {\n                list[ 0 ];\n\n            } else {\n                list[ list.length - 1 ];\n            }\n        };\n\n        const node = bubbleset.nextBubble(begin);\n\n        if (node) {\n            if (event.shiftKey) {\n                select.range(node);\n\n            } else {\n                select.uniq(node);\n            }\n\n        // } else if (begin && begin.nextSibling && begin.nextSibling.nodeType === Node.TEXT_NODE) {\n        //     select.clear(nodeEditor);\n        //     selection.collapse(begin.nextSibling, 0);\n\n        } else {\n            cursor.restore(nodeEditor);\n        }\n    }\n}\n\nfunction removeBubbles(nodeEditor, removeFromRight = false) {\n    const list = select.get(nodeEditor);\n    if (!list.length) {\n        return false;\n    }\n\n    let firstBubble = list[ 0 ].previousSibling;\n    let secondBubble = list[ list.length - 1 ].nextSibling;\n\n    if (removeFromRight) {\n        let _ = firstBubble;\n        firstBubble = secondBubble;\n        secondBubble = _;\n    }\n\n    bubbleset.removeBubbles(nodeEditor, list);\n\n    if (bubble.isBubbleNode(firstBubble)) {\n        select.uniq(firstBubble);\n\n    } else if (bubble.isBubbleNode(secondBubble)) {\n        select.uniq(secondBubble);\n\n    } else {\n        nodeEditor.focus();\n        // без задержки не восстанавливает курсор\n        raf(() => cursor.restore(nodeEditor));\n    }\n\n    nodeEditor.fireChange();\n    return true;\n}\n\nfunction copyBubbles(nodeEditor, callback = function () {}) {\n    const selection = utils.getSelection(nodeEditor);\n    if (selection) {\n        return false;\n    }\n\n    const list = select.get(nodeEditor);\n    if (!list.length) {\n        return false;\n    }\n\n    const bubbleCopy = nodeEditor.options('bubbleCopy');\n    const value = bubbleCopy(list);\n\n    if (!value) {\n        return false;\n    }\n\n    nodeEditor[ PROPS.LOCK_COPY ] = true;\n\n    const target = nodeEditor.ownerDocument.createElement('input');\n    target.value = value;\n    target.style.cssText = `\n        position: absolute;\n        left: -9999px;\n        width: 1px;\n        height: 1px;\n        margin: 0;\n        padding: 0;\n        border: none;`;\n\n    nodeEditor.parentNode.appendChild(target);\n\n    events.one(target, {\n        keyup: () => nodeEditor.focus(),\n        blur: () => {\n            target && target.parentNode && target.parentNode.removeChild(target);\n            raf(callback);\n        }\n    });\n\n    target.select();\n    return true;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/select/keydown.js\n **/","const events = require('../events');\nconst utils = require('../utils');\nconst bubble = require('../bubble');\nconst select = require('../select');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    const code = events.keyCode(event);\n    const nodeEditor = event.currentTarget;\n\n    if (code === KEY.Enter) {\n        event.preventDefault();\n        if (!nodeEditor.options('disableControls')) {\n            editBubbleKeyboardEvent(nodeEditor);\n        }\n\n    } else if (code === KEY.Space) {\n        if (editBubbleKeyboardEvent(nodeEditor)) {\n            event.preventDefault();\n        }\n    }\n};\n\nfunction editBubbleKeyboardEvent(nodeEditor) {\n    const selection = utils.getSelection(nodeEditor);\n\n    if (!selection || !selection.rangeCount) {\n        const list = select.get(nodeEditor);\n\n        if (list.length === 1) {\n            return bubble.edit(nodeEditor, list[0]);\n        }\n    }\n\n    return false;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/select/keypress.js\n **/","const context = require('../context');\nconst { PROPS } = require('./constant');\n\nconst REG_STRREG = /\\/(.+)\\/([gimy]{0,3})/i;\n\nconst OPTIONS = {\n    begining:           [ 'reg', null, 'begining' ],\n    bubbleCopy:         [ 'func', function (list) {\n        return list.map(item => item.innerHTML).join(', ');\n    }, 'bubble-copy' ],\n    bubbleDeformation:  [ 'func', function () {}, 'bubble-deformation' ],\n    bubbleFormation:    [ 'func', function () {}, 'bubble-formation' ],\n    checkBubblePaste:   [ 'func', function () {\n        return true;\n    }, 'check-bubble-paste' ],\n    classBubble:        [ 'str', 'bubble', 'class-bubble' ],\n    disableControls:    [ 'bool', false, 'disable-controls' ],\n    draggable:          [ 'bool', true, 'draggable' ],\n    ending:             [ 'reg', null, 'ending' ], // /\\@ya\\.ru/g\n    selection:          [ 'bool', true, 'selection' ],\n    separator:          [ 'reg', /[,;]/, 'separator' ],\n    tokenizer:          [ 'func', null, 'tokenizer' ],\n};\n\nconst OPTIONS_PREPARE = {\n    func: function (value) {\n        const type = typeof value;\n        switch (type) {\n        case 'string':\n            return new Function('context', `return context.${value};`)(context);\n\n        case 'function':\n            return value;\n        }\n    },\n    bool: function (value) {\n        const type = typeof value;\n        switch (type) {\n        case 'string':\n            return (value === 'true' || value === 'on');\n\n        case 'boolean':\n            return value;\n        }\n    },\n    noop: function (value) {\n        return value;\n    },\n    reg: function (value) {\n        const type = typeof value;\n        switch (type) {\n        case 'string':\n            if (value) {\n                const match = value.match(REG_STRREG);\n                if (match) {\n                    return new RegExp(match[1], match[2]);\n                }\n            }\n\n            return null;\n\n        case 'object':\n            if (value instanceof context.RegExp || value === null) {\n                return value;\n            }\n        }\n    },\n    str: function (value) {\n        if (typeof value !== 'undefined') {\n            return value ? String(value) : '';\n        }\n    },\n};\n\nmodule.exports = function (node, name, value) {\n    if (name) {\n        if (!node[ PROPS.OPTIONS ]) {\n            reinitOptions(node);\n        }\n\n        if (typeof value !== 'undefined') {\n            node[ PROPS.OPTIONS ][ name ] = value;\n            prepareOptions(node[ PROPS.OPTIONS ]);\n\n        } else {\n            return node[ PROPS.OPTIONS ][ name ];\n        }\n\n    } else {\n        reinitOptions(node);\n    }\n};\n\nfunction reinitOptions(node) {\n    const options = node[ PROPS.OPTIONS ] = node[ PROPS.OPTIONS ] || {};\n\n    for (const optionName in OPTIONS) {\n        const attrName = `data-${OPTIONS[ optionName ][2]}`;\n        if (node.hasAttribute(attrName)) {\n            options[ optionName ] = node.getAttribute(attrName);\n        }\n    }\n\n    prepareOptions(options);\n}\n\nfunction prepareOptions(options) {\n    for (let name in OPTIONS) {\n        const [ type, def ] = OPTIONS[ name ];\n        options[ name ] = OPTIONS_PREPARE[ type ](options[ name ]);\n        if (typeof options[ name ] === 'undefined') {\n            options[ name ] = def;\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/options.js\n **/"],"sourceRoot":""}